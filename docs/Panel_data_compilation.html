<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ana Macanovic" />

<meta name="date" content="2025-04-10" />

<title>Preparation: Professor-year panel compilation</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a>
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="index.html">
    <span class="glyphicon glyphicon glyphicon glyphicon-info-sign"></span>
     
    About
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-menu-hamburger"></span>
     
    DPM preparation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="NARCIS_collection.html">NARCIS data scrape</a>
    </li>
    <li>
      <a href="OpenAlex_Altmetric_data_download.html">Open Alex and Altmetric data download</a>
    </li>
    <li>
      <a href="Gender_inference.html">Gender inference</a>
    </li>
    <li>
      <a href="Grant_parsing.html">Grant parsing</a>
    </li>
    <li>
      <a href="Printed_news_preparation.html">Printed news preparation</a>
    </li>
    <li>
      <a href="Online_news_preparation.html">Online news preparation</a>
    </li>
    <li>
      <a href="Data_coverage.html">NARCIS and OA database comparison</a>
    </li>
    <li>
      <a href="SJR_CiteScore_comparison.html">SJR and CiteScore comparison</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-tasks"></span>
     
    DPM Panel Dataset
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Panel_data_compilation.html">Panel dataset preparation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-ok-sign"></span>
     
    Analyses and Results
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Analyses_main.html">Main analyses</a>
    </li>
    <li>
      <a href="Supplement_data_information.html">SI S2 Dataset information</a>
    </li>
    <li>
      <a href="Analyses_supplemental_descriptive.html">SI S3 Additional descriptive results</a>
    </li>
    <li>
      <a href="Analyses_supplemental_regressions.html">SI S4 Additional regression results</a>
    </li>
    <li>
      <a href="News_classification_other_functions.html">Resources and functions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-info-sign"></span>
     
    Robustness checks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Analyses_robustness.html">Poisson, negative binomial, logistic models</a>
    </li>
    <li>
      <a href="Analyses_robustness_fe.html">Fixed effect models</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-zoom-in"></span>
     
    Additional sample
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Additional_sample_analyses.html">Analyses of the additional sample (N = 980)</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/amacanovic/limits_gender_equity">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Preparation: Professor-year panel
compilation</h1>
<h4 class="author">Ana Macanovic</h4>
<h4 class="date">2025-04-10</h4>

</div>


<div id="panel-data-compilation" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Panel data
compilation</h1>
<p>This script compiles our various data resources into a panel dataset
of professors’ publications, citations, mentions, and coauthorships per
year.</p>
<p>The code below also produces some variables not used in the main
analyses. Refer to <em>Table S4</em> in the SI Appendix for the final
variables used in our analysis.</p>
<p>Load the packages:</p>
<pre class="r"><code># load the helper function file
source(&quot;helper_functions.R&quot;)
packages_to_load &lt;- c(&quot;readr&quot;, &quot;dplyr&quot;, &quot;tidyr&quot;, &quot;PerformanceAnalytics&quot;,
                      &quot;tidyverse&quot;, &quot;RPostgres&quot;, &quot;lubridate&quot;, &quot;psych&quot;,
                      &quot;digest&quot;, &quot;DBI&quot;, &quot;RODBC&quot;, &quot;odbc&quot;, &quot;gridExtra&quot;,
                      &quot;panelr&quot;, &quot;skimr&quot;, &quot;foreach&quot;, &quot;vegan&quot;, &quot;knitr&quot;,
                      &quot;doParallel&quot;)

fpackage_check(packages_to_load)

# For full reproducibility, load the packages with groundhog using the code below instead
# of the fpackage_check function

# library(groundhog)
# groundhog.library(packages_to_load, date = &quot;2023-12-01&quot;)</code></pre>
<p>Connect to the database:</p>
<pre class="r"><code># fill in own credentials
port &lt;- 5432
user &lt;- &quot;postgres&quot;
password &lt;- &quot;dutchmediaprofssql&quot;
database_name &lt;- &quot;postgres&quot;


con &lt;- dbConnect(Postgres(),
                 dbname= database_name,
                 port = port,
                 user = user, 
                 password = password)

con # Checks connection is working</code></pre>
</div>
<div id="narcis-data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> NARCIS data</h1>
<p>Load the professor NARCIS profiles to start with</p>
<pre class="r"><code>narcis_prof_info &lt;- dbReadTable(con, &quot;narcis_prof_info&quot;)</code></pre>
<p>Get a foundational panel dataset spanning between 1973 and 2023:</p>
<pre class="r"><code>baseline_panel &lt;- expand.grid(unique(narcis_prof_info$profile_id), c(1973:2023))
colnames(baseline_panel) &lt;- c(&quot;profile_id&quot;, &quot;year&quot;)</code></pre>
</div>
<div id="publications-and-citations" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Publications and
citations</h1>
<p>Load publication info for all professors and tidy it up:</p>
<pre class="r"><code># all professors, their pubs, and the yearly citation breakdown
oa_prof_pubs &lt;- dbReadTable(con, &quot;oa_prof_pubs&quot;)

# detailed information about pubications
oa_pubs_unique &lt;- dbReadTable(con, &quot;oa_prof_pubs_unique&quot;)

# dataset matching professor IDs to publications
oa_prof_pub_matching &lt;- dbReadTable(con, &quot;oa_prof_pub_match&quot;)

# match publication infromation with professors
oa_prof_pubs_unique &lt;- merge(oa_pubs_unique,
                             oa_prof_pub_matching[c(&quot;id&quot;, &quot;au_id&quot;, &quot;au_display_name&quot;, &quot;profile_id&quot;)],
                             all.x = TRUE,
                             all.y = TRUE,
                             by = &quot;id&quot;)</code></pre>
<p>Get single author publications only:</p>
<pre class="r"><code># get information listing coauthors (au_id) per paper (id)
coauthor_info &lt;- dbGetQuery(con, &quot;select \&quot;id\&quot;, \&quot;au_id\&quot; FROM oa_coauthor_info;&quot;)

# leave only publications without any coauthors
oa_prof_pubs_unique_single_au &lt;- filter(oa_prof_pubs_unique, 
                                        ! id %in% coauthor_info$id)</code></pre>
<div id="yearly-publication-counts" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Yearly publication
counts</h2>
<p>Get yearly publication counts per professor, filtering out everything
but articles, books, book chapters:</p>
<pre class="r"><code>prof_year_pubs &lt;- oa_prof_pubs_unique %&gt;% 
  filter(!is.na(publication_year) &amp; publication_year &gt;= 1973 &amp; publication_year &lt;= 2023 &amp; 
           type %in% c(&quot;article&quot;, &quot;book&quot;, &quot;book-chapter&quot;))%&gt;%
  group_by(profile_id, publication_year)%&gt;%
  summarise(count_pubs = n())%&gt;%
  arrange(profile_id, publication_year)%&gt;%
  mutate(count_pubs_total = cumsum(count_pubs))%&gt;%
  arrange(profile_id, publication_year)

# rename for merging
colnames(prof_year_pubs)[which(colnames(prof_year_pubs) == &quot;publication_year&quot;)] &lt;- &quot;year&quot;</code></pre>
<p>Now, get their yearly citations (2012-2023):</p>
<pre class="r"><code>prof_year_citations &lt;- oa_prof_pubs %&gt;% 
  filter(!is.na(publication_year) &amp; !is.na(counts_by_year_year) &amp; publication_year &gt;= 1973 &amp; publication_year &lt;= 2023 &amp;
           type %in% c(&quot;article&quot;, &quot;book&quot;, &quot;book-chapter&quot;))%&gt;%
  group_by(profile_id, counts_by_year_year)%&gt;%
  summarise(cited_by = sum(counts_by_year_cited_by_count))%&gt;%
  arrange(profile_id, counts_by_year_year) %&gt;%
  mutate(cited_by_total_oa = cumsum(cited_by))%&gt;%
  arrange(profile_id, counts_by_year_year)

# rename for merging
colnames(prof_year_citations)[which(colnames(prof_year_citations) == &quot;counts_by_year_year&quot;)] &lt;- &quot;year&quot;

prof_year_citations &lt;- prof_year_citations %&gt;%
  filter(year &lt;= 2023)</code></pre>
<p>Now, we want to know how many citations there were before 2012, so we
get the totals and then generate a new column getting the pre-2012
citations + each year’s citations:</p>
<pre class="r"><code># total citations per prof
prof_total_citations &lt;- oa_prof_pubs_unique %&gt;%
  filter(!is.na(publication_year) &amp; publication_year &gt;= 1973 &amp; publication_year &lt;= 2023 &amp; 
           type %in% c(&quot;article&quot;, &quot;book&quot;, &quot;book-chapter&quot;))%&gt;%
  group_by(profile_id)%&gt;%
  summarise(cited_by_since_pub_2024 = sum(cited_by_count))
# rename for merging
colnames(prof_total_citations)[which(colnames(prof_total_citations) == &quot;publication_year&quot;)] &lt;- &quot;year&quot;


# get the citations preceding 2012 by deducting the 2012 citations from the total
latest_citation &lt;- prof_year_citations %&gt;%
  group_by(profile_id)%&gt;%
  slice(which.max(year))

# merge these two, replace NAs
prof_total_citations &lt;- merge(prof_total_citations,
                              latest_citation[c(&quot;profile_id&quot;, &quot;cited_by_total_oa&quot;)],
                              by = &quot;profile_id&quot;,
                              all.x = TRUE,
                              all.y = TRUE)

prof_total_citations &lt;- prof_total_citations %&gt;%
  replace(is.na(.), 0)

# get the citation count for profs before 2012
prof_total_citations$cited_by_before_2012 &lt;- prof_total_citations$cited_by_since_pub_2024 - prof_total_citations$cited_by_total_oa
  
# if this number negative (which it can be due to OA problems), replace by 0
prof_total_citations$cited_by_before_2012 &lt;- ifelse(prof_total_citations$cited_by_before_2012 &lt; 0,
                                                    0,
                                                    prof_total_citations$cited_by_before_2012)

# merge this with citation data
prof_year_citations &lt;- merge(prof_year_citations,
                             prof_total_citations[c(&quot;profile_id&quot;, &quot;cited_by_before_2012&quot;)],
                             all.x = TRUE,
                             by = &quot;profile_id&quot;)

# get cumulative citations of pre 2012 + the year in question
prof_year_citations$cited_by_total_all &lt;- prof_year_citations$cited_by_total_oa + prof_year_citations$cited_by_before_2012</code></pre>
<p>Merge the publication and citation counts with the baseline
panel:</p>
<pre class="r"><code>prof_year_pubs_citations &lt;- merge(baseline_panel,
                                  prof_year_pubs,
                                  all.x = TRUE,
                                  all.y = TRUE,
                                  by = c(&quot;profile_id&quot;, &quot;year&quot;))


prof_year_pubs_citations &lt;- merge(prof_year_pubs_citations,
                                  prof_year_citations,
                                  all.x = TRUE,
                                  all.y = TRUE,
                                  by = c(&quot;profile_id&quot;, &quot;year&quot;))</code></pre>
<p>Tidy this all up:</p>
<pre class="r"><code># fill some NAs for publication counts, but we will not do this for citations
prof_year_pubs_citations$count_pubs &lt;- ifelse(is.na(prof_year_pubs_citations$count_pubs),
                                              0,
                                              prof_year_pubs_citations$count_pubs)

prof_year_pubs_citations &lt;- prof_year_pubs_citations %&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id)%&gt;%
  mutate(count_pubs_total = cumsum(count_pubs))


# fill the citations before 2012
prof_year_pubs_citations &lt;- prof_year_pubs_citations %&gt;%
  group_by(profile_id)%&gt;%
  fill(cited_by_before_2012, .direction = &quot;up&quot;)</code></pre>
<p>For each professor, get the first publication year and merge with the
rest:</p>
<pre class="r"><code># get professor entry years
prof_entry_year &lt;- oa_prof_pubs_unique %&gt;%
  filter(publication_year &gt;= 1973 &amp; publication_year &lt;= 2023 &amp; 
           type %in% c(&quot;article&quot;, &quot;book&quot;, &quot;book-chapter&quot;))%&gt;%
  group_by(profile_id)%&gt;%
  slice(which.min(publication_year))%&gt;%
  select(profile_id, publication_year)

# rename
colnames(prof_entry_year)[2] &lt;- &quot;first_pub&quot;

# merge
prof_year_pubs_citations &lt;- merge(prof_year_pubs_citations,
                                  prof_entry_year,
                                  all.x = TRUE,
                                  by = &quot;profile_id&quot;)

# get indicator of years since first pub
prof_year_pubs_citations$years_since_first_pub &lt;- prof_year_pubs_citations$year - prof_year_pubs_citations$first_pub</code></pre>
<p>Merge this with professor gender:</p>
<pre class="r"><code>prof_gender &lt;- dbReadTable(con, &quot;gender_table&quot;)

prof_year_pubs_citations &lt;- merge(prof_year_pubs_citations,
                                  prof_gender[c(&quot;profile_id&quot;, &quot;inferred_gender&quot;)],
                                  all.x = TRUE,
                                  by = &quot;profile_id&quot;)</code></pre>
<p>Add information about their publications. Load the Scimago
scores:</p>
<pre class="r"><code>oa_pubs_all_scimago &lt;- dbReadTable(con, &quot;oa_prof_pubs_unique_scimago&quot;)</code></pre>
<p>Tidy up the data and compile:</p>
<pre class="r"><code>oa_pubs_all_scimago$sjr &lt;- as.numeric(str_replace(oa_pubs_all_scimago$sjr, &quot;,&quot;, &quot;.&quot;))

yearly_scimago &lt;- oa_pubs_all_scimago %&gt;%
  filter(publication_year &gt;=1973 &amp; publication_year &lt;= 2023) %&gt;%
  group_by(profile_id, publication_year)%&gt;%
  summarise(sum_sjr = sum(sjr, na.rm = TRUE),
            sum_hindex = sum(h_index, na.rm = TRUE),
            count_q1 = sum(sjr_best_quartile == &quot;Q1&quot;),
            count_scimago_indicators = n())</code></pre>
<p>Merge with the publication and citation data:</p>
<pre class="r"><code>prof_year_pubs_citations_sci &lt;- merge(prof_year_pubs_citations,
                                      yearly_scimago,
                                      by.x = c(&quot;profile_id&quot;, &quot;year&quot;),
                                      by.y = c(&quot;profile_id&quot;, &quot;publication_year&quot;),
                                      all.x = TRUE)</code></pre>
<p>Replace NAs with 0s if year is after 1999:</p>
<pre class="r"><code>prof_year_pubs_citations_sci &lt;- prof_year_pubs_citations_sci%&gt;% 
  mutate(sum_sjr  =  ifelse(year &gt;= 1999 &amp; is.na(sum_sjr), 0 , sum_sjr),
         sum_hindex  =  ifelse(year &gt;= 1999 &amp; is.na(sum_hindex), 0 , sum_hindex),
         count_q1  =  ifelse(year &gt;= 1999 &amp; is.na(count_q1), 0 , count_q1),
         count_scimago_indicators = ifelse(year &gt;= 1999 &amp; is.na(count_scimago_indicators), 0 , count_scimago_indicators)
  )</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_pubs_citations_sci, &quot;panel_datasets/prof_year_pubs_citations.csv&quot;)</code></pre>
</div>
</div>
<div id="grant-information" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Grant information</h1>
<p>Get all the grant information:</p>
<pre class="r"><code>nwo_grants &lt;- dbReadTable(con, &quot;narcis_nwo_grant_info&quot;)
erc_grants &lt;- dbReadTable(con, &quot;erc_grant_info&quot;)</code></pre>
<p>Get this into a binary format:</p>
<pre class="r"><code># for NWO
nwo_grants$veni &lt;- ifelse(nwo_grants$grant == &quot;veni&quot;, 1, 0)
nwo_grants$vidi &lt;- ifelse(nwo_grants$grant == &quot;vidi&quot;, 1, 0)
nwo_grants$vici &lt;- ifelse(nwo_grants$grant == &quot;vici&quot;, 1, 0)
nwo_grants$spinoza &lt;- ifelse(nwo_grants$grant == &quot;spinoza&quot;, 1, 0)
nwo_grants$stevin &lt;- ifelse(nwo_grants$grant == &quot;stevin&quot;, 1, 0)
# select only the necessary columns
nwo_grants &lt;- nwo_grants %&gt;%
  select(year:stevin)

# any grant
nwo_grants$any_nwo &lt;- ifelse(rowSums(nwo_grants[, 3:7]) &gt; 0, 1, 0)

# for ERC
erc_grants$advanced &lt;- ifelse(erc_grants$grant == &quot;Advanced grants&quot;, 1, 0)
erc_grants$consolidator &lt;- ifelse(erc_grants$grant == &quot;Consolidator grants&quot;, 1, 0)
erc_grants$starting  &lt;- ifelse(erc_grants$grant == &quot;Starting grants&quot;, 1, 0)
erc_grants$synergy &lt;- ifelse(erc_grants$grant == &quot;Synergy grants&quot;, 1, 0)
# select only the necessary columns
erc_grants &lt;- erc_grants %&gt;%
  select(profile_id:synergy)

# any grant
erc_grants$any_erc &lt;- ifelse(rowSums(erc_grants[, 3:6]) &gt; 0, 1, 0)</code></pre>
<p>Accumulate grants, make sure there are no duplicates, and arrange
nicely:</p>
<pre class="r"><code>nwo_cumulative &lt;- nwo_grants %&gt;%
  filter(year &gt;= 1973 &amp; year &lt;= 2023)%&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id)%&gt;%
  mutate(nwo_total = cumsum(any_nwo))%&gt;%
  distinct(profile_id, year, .keep_all = TRUE)

erc_cumulative &lt;- erc_grants %&gt;%
  filter(year &gt;= 1973 &amp; year &lt;= 2023)%&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id)%&gt;%
  mutate(erc_total = cumsum(any_erc))%&gt;%
  distinct(profile_id,year, .keep_all = TRUE)</code></pre>
<p>Combine this with pubs and citations:</p>
<pre class="r"><code>prof_year_pubs_citations_grants &lt;- merge(prof_year_pubs_citations_sci,
                                         nwo_cumulative,
                                         all.x = TRUE,
                                         by = c(&quot;profile_id&quot;, &quot;year&quot;))

prof_year_pubs_citations_grants &lt;- merge(prof_year_pubs_citations_grants,
                                         erc_cumulative,
                                         all.x = TRUE,
                                         by = c(&quot;profile_id&quot;, &quot;year&quot;))

# replace NAs
prof_year_pubs_citations_grants &lt;- prof_year_pubs_citations_grants %&gt;%
  mutate_at(vars(veni:erc_total), ~replace_na(., 0))

# fix the cumulatives
prof_year_pubs_citations_grants &lt;- prof_year_pubs_citations_grants %&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id)%&gt;%
  mutate(nwo_total = cumsum(any_nwo),
         erc_total = cumsum(any_erc))</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_pubs_citations_grants, &quot;panel_datasets/prof_year_pubs_citations_grants.csv&quot;)</code></pre>
<pre class="r"><code>gc()
rm(erc_grants)
rm(erc_cumulative)
rm(nwo_cumulative)
rm(nwo_grants)</code></pre>
</div>
<div id="altmetric-attention" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Altmetric
attention</h1>
<p>Get all the attention measures we have per paper:</p>
<pre class="r"><code>attention_news &lt;- dbReadTable(con, &quot;altmetric_pub_att_news&quot;)
attention_blogs &lt;- dbReadTable(con, &quot;altmetric_pub_att_blogs&quot;)

# merge the papers with their authors
attention_news_profs &lt;- merge(attention_news,
                        oa_prof_pub_matching[c(&quot;id&quot;, &quot;profile_id&quot;)],
                        by = &quot;id&quot;)

# merge the papers with their authors
attention_blogs_profs &lt;- merge(attention_blogs,
                        oa_prof_pub_matching[c(&quot;id&quot;, &quot;profile_id&quot;)],
                        by = &quot;id&quot;)</code></pre>
<p>Compile the two attention sources together:</p>
<pre class="r"><code>attention_news_profs &lt;- attention_news_profs[c(&quot;id&quot;, &quot;title&quot;, &quot;url&quot;, &quot;license&quot;, &quot;posted_on&quot;, 
                                               &quot;summary&quot;, &quot;author_name&quot;, &quot;author_url&quot;, &quot;profile_id&quot;)]

attention_blogs_profs &lt;- attention_blogs_profs[c(&quot;id&quot;, &quot;title&quot;, &quot;url&quot;, &quot;license&quot;, &quot;posted_on&quot;, 
                                               &quot;summary&quot;, &quot;author_name&quot;, &quot;author_url&quot;, &quot;profile_id&quot;)]

attention_news_blogs_profs &lt;- rbind(attention_news_profs,
                                    attention_blogs_profs)</code></pre>
<p>Load in news mentions with full text (“response” not an error, but
200 for success) and match to professors, seeking if their last name is
mentioned here:</p>
<pre class="r"><code>attention_news_full &lt;- dbGetQuery(con, &quot;select * from pub_att_news_full_text where \&quot;response\&quot;=&#39;200&#39;&quot;)

attention_news_full_match &lt;- merge(attention_news_full,
                                   attention_news_blogs_profs[c(&quot;url&quot;, &quot;profile_id&quot;, &quot;id&quot;)],
                                   by = c(&quot;url&quot;))

# merge this with professor last names
attention_news_full_match &lt;- merge(attention_news_full_match,
                                   narcis_prof_info[c(&quot;profile_id&quot;, &quot;last&quot;, &quot;first&quot;)],
                                   by = &quot;profile_id&quot;)

# remove the duplicates
attention_news_full_match$dupl &lt;- duplicated(attention_news_full_match[c(&quot;url&quot;, &quot;id&quot;, &quot;profile_id&quot;)])

attention_news_full_match &lt;- attention_news_full_match %&gt;%
  filter(dupl == FALSE)%&gt;%
  select(-dupl)

attention_news_full_match$first_last &lt;- paste(attention_news_full_match$first, attention_news_full_match$last)</code></pre>
<p>Get the language of each mention:</p>
<pre class="r"><code>attention_news_lang &lt;- rep(NA, nrow(attention_news_full_match))

for (i in 1:nrow(attention_news_full_match)){
  content &lt;- attention_news_full_match$content[i]
  
  if (!is.na(content)){
    
    #now, identify the language based on the first 300 characters of the content,
    #or, if shorter, the whole string
    if (nchar(content)&gt;300){
      language &lt;- fastText::language_identification(input_obj = substr(content, 1, 300),
                                                    pre_trained_language_model_path = &quot;resources/lid.176.ftz&quot;,
                                                    k = 1,
                                                    th = 0.0,
                                                    verbose = FALSE)
      language &lt;- as.character(language$iso_lang_1)
      
    }else{
      language &lt;- fastText::language_identification(input_obj = content,
                                                    pre_trained_language_model_path = &quot;resources/lid.176.ftz&quot;,
                                                    k = 1,
                                                    th = 0.0,
                                                    verbose = FALSE)
      language &lt;- as.charact
      er(language$iso_lang_1)
    }
    attention_news_lang[i] &lt;- language
  }
    
 print(i)   
}</code></pre>
<p>Seek professor last name mentions in the full texts of news
articles:</p>
<pre class="r"><code>attention_news_full_match$last_name_mention &lt;- str_detect(tolower(attention_news_full_match$content), paste0(&quot;\\b&quot;, attention_news_full_match$last, &quot;\\b&quot;))

attention_news_full_match$first_last_mention &lt;- str_detect(tolower(attention_news_full_match$content), paste0(&quot;\\b&quot;, attention_news_full_match$first_last, &quot;\\b&quot;))

keyword_list_1 &lt;- c(&quot;hoogleraar&quot;, &quot;universitair docent&quot;, &quot;universitair hoofddocent&quot;, &quot;assistant professor&quot;, &quot;associate professor&quot;,
                  &quot;onderzoeker&quot;, &quot;researcher&quot;, &quot;universiteitshoogleraar&quot;, &quot;professor&quot;)

keyword_list_1 &lt;- paste(paste0(&quot;\\b&quot;, keyword_list_1, &quot;\\b&quot;), collapse =&quot;|&quot;)

keyword_list_final &lt;- paste(keyword_list_1, paste(c(&quot;^\\bwetenschap&quot;, &quot;^\\bscien&quot;,  &quot;^\\buniversit&quot;,
                                                    &quot;\\bdr\\.&quot;, &quot;\\bprof\\.&quot;), collapse = &quot;|&quot;), collapse = &quot;|&quot;)

attention_news_full_match$keyword &lt;- str_detect(tolower(attention_news_full_match$content), keyword_list_final)

# both name and keyword!
attention_news_full_match$first_last_key &lt;- ifelse(attention_news_full_match$first_last_mention == TRUE &amp; 
                                                     attention_news_full_match$keyword == TRUE,
                                                   TRUE,
                                                   FALSE)</code></pre>
<p>Merge the name mentions with the rest of the data:</p>
<pre class="r"><code>attention_news_blogs_profs_names &lt;- merge(attention_news_blogs_profs,
                                          attention_news_full_match[c(&quot;profile_id&quot;, &quot;url&quot;, &quot;id&quot;, 
                                                                      &quot;last_name_mention&quot;, &quot;first_last_mention&quot;)],
                                          by = c(&quot;profile_id&quot;,&quot;url&quot;, &quot;id&quot;),
                                          all.x = TRUE)</code></pre>
<p>Classify news attention:</p>
<pre class="r"><code># load the classification objects
source(&quot;resources/altmetric_news_outlet_classification.R&quot;)

attention_news_blogs_profs_names$source_type &lt;- NA

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_aggregator,
                                                 &quot;news_aggregator&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_sci_aggregator,
                                                 &quot;sci_news_aggregator&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_finance,
                                                 &quot;finance_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_general,
                                                 &quot;general_interest_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_general_local,
                                                 &quot;general_interest_local_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_medical,
                                                 &quot;medical_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_pop_sci,
                                                 &quot;popsci_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)

attention_news_blogs_profs_names$source_type &lt;- ifelse(attention_news_blogs_profs_names$author_name %in% att_news_sci_portal,
                                                 &quot;science_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)

# if nothing yet, check for blogs
blog_names &lt;- unique(attention_blogs$author_name)

attention_news_blogs_profs_names$source_type &lt;- ifelse((is.na(attention_news_blogs_profs_names$source_type) &amp; attention_news_blogs_profs_names$author_name %in% blog_names),
                                                 &quot;online_blog&quot;,
                                                 attention_news_blogs_profs_names$source_type)

# if nothing yet, set as other
attention_news_blogs_profs_names$source_type &lt;- ifelse(is.na(attention_news_blogs_profs_names$source_type),
                                                 &quot;other_news&quot;,
                                                 attention_news_blogs_profs_names$source_type)</code></pre>
<p>Write this out into the database:</p>
<pre class="r"><code>dbWriteTable(con, &quot;altmetric_att_prepared&quot;, attention_news_blogs_profs_names)</code></pre>
<p>Compile the attention per professor per year:</p>
<pre class="r"><code># get a year from the &quot;posted on&quot; string
attention_news_blogs_profs_names$year &lt;- year(as_date(attention_news_blogs_profs_names$posted_on))

prof_year_attention_online &lt;- attention_news_blogs_profs_names %&gt;%
  filter(year &gt;= 2011 &amp; year &lt;= 2023)%&gt;%
  group_by(profile_id, source_type, year)%&gt;%
  summarise(alt_attn = n())%&gt;%
  arrange(profile_id, source_type, year)%&gt;%
  pivot_wider(names_from = source_type, values_from = c(alt_attn))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year)

colnames(prof_year_attention_online)[-c(1:2)] &lt;- paste0(&quot;alt_&quot;, colnames(prof_year_attention_online)[-c(1:2)])</code></pre>
<p>Do the same, but deduplicating multiple paper mentions in single news
articles:</p>
<pre class="r"><code>prof_year_attention_online_dedupe &lt;- attention_news_blogs_profs_names %&gt;%
  filter(year &gt;= 2011 &amp; year &lt;= 2023)%&gt;%
  distinct(profile_id, url, title, posted_on, author_name,.keep_all = TRUE)%&gt;%
  group_by(profile_id, source_type, year)%&gt;%
  summarise(alt_attn = n())%&gt;%
  arrange(profile_id, source_type, year)%&gt;%
  pivot_wider(names_from = source_type, values_from = c(alt_attn))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year)

colnames(prof_year_attention_online_dedupe)[-c(1:2)] &lt;- paste0(&quot;alt_ded_&quot;, colnames(prof_year_attention_online_dedupe)[-c(1:2)])

# rearrange to match the column order of the other dataframe above
prof_year_attention_online_dedupe &lt;- prof_year_attention_online_dedupe[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;alt_ded_news_aggregator&quot;, &quot;alt_ded_online_blog&quot;, &quot;alt_ded_sci_news_aggregator&quot; , &quot;alt_ded_finance_news&quot; , &quot;alt_ded_general_interest_local_news&quot;, &quot;alt_ded_general_interest_news&quot;, &quot;alt_ded_medical_news&quot;, &quot;alt_ded_other_news&quot;, &quot;alt_ded_popsci_news&quot;, &quot;alt_ded_science_news&quot;)]</code></pre>
<p>Do the same only for those where we have names last included:</p>
<pre class="r"><code>prof_year_attention_online_names &lt;- attention_news_blogs_profs_names %&gt;%
  filter(year &gt;= 2011 &amp; year &lt;= 2023 &amp; last_name_mention == TRUE)%&gt;%
  group_by(profile_id, source_type, year)%&gt;%
  summarise(alt_attn = n())%&gt;%
  arrange(profile_id, source_type, year)%&gt;%
  pivot_wider(names_from = source_type, values_from = c(alt_attn))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year)

colnames(prof_year_attention_online_names)[-c(1:2)] &lt;- paste0(&quot;alt_name_&quot;, colnames(prof_year_attention_online_names)[-c(1:2)])

# rearrange to match the column order of the other dataframe above
prof_year_attention_online_names &lt;- prof_year_attention_online_names[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;alt_name_news_aggregator&quot;, &quot;alt_name_online_blog&quot;, &quot;alt_name_sci_news_aggregator&quot; , &quot;alt_name_finance_news&quot; , &quot;alt_name_general_interest_local_news&quot;, &quot;alt_name_general_interest_news&quot;, &quot;alt_name_medical_news&quot;, &quot;alt_name_other_news&quot;, &quot;alt_name_popsci_news&quot;, &quot;alt_name_science_news&quot;)]</code></pre>
<p>And for the full name included:</p>
<pre class="r"><code>prof_year_attention_online_full_names &lt;- attention_news_blogs_profs_names %&gt;%
  filter(year &gt;= 2011 &amp; year &lt;= 2023 &amp; first_last_mention == TRUE)%&gt;%
  group_by(profile_id, source_type, year)%&gt;%
  summarise(alt_attn = n())%&gt;%
  arrange(profile_id, source_type, year)%&gt;%
  pivot_wider(names_from = source_type, values_from = c(alt_attn))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year)

colnames(prof_year_attention_online_full_names)[-c(1:2)] &lt;- paste0(&quot;alt_fname_&quot;, colnames(prof_year_attention_online_full_names)[-c(1:2)])

# rearrange to match the column order of the other dataframe above
prof_year_attention_online_full_names &lt;- prof_year_attention_online_full_names[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;alt_fname_news_aggregator&quot;, &quot;alt_fname_online_blog&quot;, &quot;alt_fname_sci_news_aggregator&quot; , &quot;alt_fname_finance_news&quot; , &quot;alt_fname_general_interest_local_news&quot;, &quot;alt_fname_general_interest_news&quot;, &quot;alt_fname_medical_news&quot;, &quot;alt_fname_other_news&quot;, &quot;alt_fname_popsci_news&quot;, &quot;alt_fname_science_news&quot;)]</code></pre>
<p>And now only for single-authored papers:</p>
<pre class="r"><code>prof_year_attention_online_single_au &lt;- attention_news_blogs_profs_names %&gt;%
  filter(year &gt;= 2011 &amp; year &lt;= 2023 &amp; id %in% oa_prof_pubs_unique_single_au$id)%&gt;%
  distinct(profile_id, url, title, posted_on, author_name,.keep_all = TRUE)%&gt;%
  group_by(profile_id, source_type, year)%&gt;%
  summarise(alt_attn = n())%&gt;%
  arrange(profile_id, source_type, year)%&gt;%
  pivot_wider(names_from = source_type, values_from = c(alt_attn))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year)

colnames(prof_year_attention_online_single_au)[-c(1:2)] &lt;- paste0(&quot;alt_single_&quot;, colnames(prof_year_attention_online_single_au)[-c(1:2)])

prof_year_attention_online_single_au &lt;- prof_year_attention_online_single_au[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;alt_single_news_aggregator&quot;, &quot;alt_single_online_blog&quot;, &quot;alt_single_sci_news_aggregator&quot; , &quot;alt_single_finance_news&quot; , &quot;alt_single_general_interest_local_news&quot;, &quot;alt_single_general_interest_news&quot;, &quot;alt_single_medical_news&quot;, &quot;alt_single_other_news&quot;, &quot;alt_single_popsci_news&quot;, &quot;alt_single_science_news&quot;)]</code></pre>
<p>And for dutch mentions only:</p>
<pre class="r"><code>prof_year_attention_online_dutch &lt;- attention_news_blogs_profs_names %&gt;%
  filter(year &gt;= 2011 &amp; year &lt;= 2023 &amp; lang == &quot;nl&quot;)%&gt;%
  distinct(profile_id, url, title, posted_on, author_name,.keep_all = TRUE)%&gt;%
  group_by(profile_id, source_type, year)%&gt;%
  summarise(alt_attn = n())%&gt;%
  arrange(profile_id, source_type, year)%&gt;%
  pivot_wider(names_from = source_type, values_from = c(alt_attn))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year)

colnames(prof_year_attention_online_dutch)[-c(1:2)] &lt;- paste0(&quot;alt_dutch_&quot;, colnames(prof_year_attention_online_dutch)[-c(1:2)])

prof_year_attention_online_dutch$alt_dutch_general_interest_local_news &lt;- 0

prof_year_attention_online_dutch &lt;- prof_year_attention_online_dutch[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;alt_dutch_news_aggregator&quot;, &quot;alt_dutch_online_blog&quot;, &quot;alt_dutch_sci_news_aggregator&quot; , &quot;alt_dutch_finance_news&quot; , &quot;alt_dutch_general_interest_local_news&quot;, &quot;alt_dutch_general_interest_news&quot;, &quot;alt_dutch_medical_news&quot;, &quot;alt_dutch_other_news&quot;, &quot;alt_dutch_popsci_news&quot;, &quot;alt_dutch_science_news&quot;)]</code></pre>
<p>Merge the attention with the rest:</p>
<pre class="r"><code>prof_year_p_c_g_a &lt;- merge(prof_year_pubs_citations_grants,
                           prof_year_attention_online,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)

prof_year_p_c_g_a &lt;- merge(prof_year_p_c_g_a,
                           prof_year_attention_online_dedupe,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)

prof_year_p_c_g_a &lt;- merge(prof_year_p_c_g_a,
                           prof_year_attention_online_single_au,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)


prof_year_p_c_g_a &lt;- merge(prof_year_p_c_g_a,
                           prof_year_attention_online_names,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)

prof_year_p_c_g_a &lt;- merge(prof_year_p_c_g_a,
                           prof_year_attention_online_full_names,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)

prof_year_p_c_g_a &lt;- merge(prof_year_p_c_g_a,
                           prof_year_attention_online_dutch,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)


# get the cumulatives
# As Altmetric data goes back to 2011 in principle, set attention to 0 if year &gt;= 2011, leave as NA
# otherwise:
prof_year_p_c_g_a &lt;- prof_year_p_c_g_a %&gt;%
  arrange(profile_id, year)%&gt;%
  mutate_at(vars(contains(&#39;alt_&#39;)), ~ifelse(is.na(.), 0, .))%&gt;%
  group_by(profile_id)%&gt;%
  mutate(across(alt_news_aggregator:alt_dutch_science_news, ~cumsum(.x), .names = &quot;{col}_total&quot;))%&gt;%
  mutate_at(vars(contains(&#39;alt_&#39;)), ~ifelse(. == 0 &amp; year &lt; 2011, NA, .))</code></pre>
<p>Combine this with Twitter attention, which we only obtain using
ORCIDs (for now).</p>
<pre class="r"><code>twitter_orcid_attention &lt;- dbGetQuery(con, statement = &quot;select * from altmetric_prof_attention where \&quot;mention_type\&quot;=&#39;tweet&#39;&quot;)

# rename the columns and get cumulatives
twitter_orcid_attention &lt;- twitter_orcid_attention %&gt;%
  select(profile_id, year, yearly_count)

colnames(twitter_orcid_attention)[which(colnames(twitter_orcid_attention) == &quot;yearly_count&quot;)] &lt;- &quot;alt_twitter&quot;


prof_year_p_c_g_a &lt;- merge(prof_year_p_c_g_a,
                           twitter_orcid_attention,
                           by = c(&quot;profile_id&quot;, &quot;year&quot;),
                           all.x = TRUE)

prof_year_p_c_g_a &lt;- prof_year_p_c_g_a %&gt;%
  arrange(profile_id, year)%&gt;%
  mutate_at(vars(contains(&#39;twitter&#39;)), ~ifelse(is.na(.), 0, .))%&gt;%
  group_by(profile_id)%&gt;%
  mutate(across(alt_twitter, ~cumsum(.x), .names = &quot;{col}_total&quot;))%&gt;%
  mutate_at(vars(contains(&#39;twitter&#39;)), ~ifelse(. == 0 &amp; year &lt; 2011, NA, .))</code></pre>
<p>Get total altmetrics as well as totals of “general interest”
outlets:</p>
<pre class="r"><code>prof_year_p_c_g_a$alt_online_all &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_news_aggregator&quot;,
                                                                 &quot;alt_online_blog&quot;,
                                                                 &quot;alt_sci_news_aggregator&quot;,
                                                                 &quot;alt_finance_news&quot;,
                                                                 &quot;alt_general_interest_local_news&quot;,
                                                                 &quot;alt_general_interest_news&quot;,            
                                                                 &quot;alt_medical_news&quot;,
                                                                 &quot;alt_other_news&quot;,
                                                                 &quot;alt_popsci_news&quot;,
                                                                 &quot;alt_science_news&quot;)])

prof_year_p_c_g_a$alt_online_ded_all &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_ded_news_aggregator&quot;,
                                                                     &quot;alt_ded_online_blog&quot;,
                                                                     &quot;alt_ded_sci_news_aggregator&quot;,
                                                                     &quot;alt_ded_finance_news&quot;,
                                                                     &quot;alt_ded_general_interest_local_news&quot;,
                                                                     &quot;alt_ded_general_interest_news&quot;,            
                                                                     &quot;alt_ded_medical_news&quot;,
                                                                     &quot;alt_ded_other_news&quot;,
                                                                     &quot;alt_ded_popsci_news&quot;,
                                                                     &quot;alt_ded_science_news&quot;)])

prof_year_p_c_g_a$alt_online_name_all &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_name_news_aggregator&quot;,
                                                                      &quot;alt_name_online_blog&quot;,
                                                                      &quot;alt_name_sci_news_aggregator&quot;,
                                                                      &quot;alt_name_finance_news&quot;,
                                                                      &quot;alt_name_general_interest_local_news&quot;,
                                                                      &quot;alt_name_general_interest_news&quot;,            
                                                                      &quot;alt_name_medical_news&quot;,
                                                                      &quot;alt_name_other_news&quot;,
                                                                      &quot;alt_name_popsci_news&quot;,
                                                                      &quot;alt_name_science_news&quot;)])

prof_year_p_c_g_a$alt_online_fname_all &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_fname_news_aggregator&quot;,
                                                                       &quot;alt_fname_online_blog&quot;,
                                                                       &quot;alt_fname_sci_news_aggregator&quot;,
                                                                       &quot;alt_fname_finance_news&quot;,
                                                                       &quot;alt_fname_general_interest_local_news&quot;,
                                                                       &quot;alt_fname_general_interest_news&quot;,            
                                                                       &quot;alt_fname_medical_news&quot;,
                                                                       &quot;alt_fname_other_news&quot;,
                                                                       &quot;alt_fname_popsci_news&quot;,
                                                                       &quot;alt_fname_science_news&quot;)])

prof_year_p_c_g_a$alt_online_single_all &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_single_news_aggregator&quot;,
                                                                        &quot;alt_single_online_blog&quot;,
                                                                        &quot;alt_single_sci_news_aggregator&quot;,
                                                                        &quot;alt_single_finance_news&quot;,
                                                                        &quot;alt_single_general_interest_local_news&quot;,
                                                                        &quot;alt_single_general_interest_news&quot;,            
                                                                        &quot;alt_single_medical_news&quot;,
                                                                        &quot;alt_single_other_news&quot;,
                                                                        &quot;alt_single_popsci_news&quot;,
                                                                        &quot;alt_single_science_news&quot;)])

prof_year_p_c_g_a$alt_online_dutch_all &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_dutch_news_aggregator&quot;,
                                                                        &quot;alt_dutch_online_blog&quot;,
                                                                        &quot;alt_dutch_sci_news_aggregator&quot;,
                                                                        &quot;alt_dutch_finance_news&quot;,
                                                                        &quot;alt_dutch_general_interest_local_news&quot;,
                                                                        &quot;alt_dutch_general_interest_news&quot;,            
                                                                        &quot;alt_dutch_medical_news&quot;,
                                                                        &quot;alt_dutch_other_news&quot;,
                                                                        &quot;alt_dutch_popsci_news&quot;,
                                                                        &quot;alt_dutch_science_news&quot;)])

prof_year_p_c_g_a$alt_online_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_news_aggregator_total&quot;,
                                                                       &quot;alt_online_blog_total&quot;,
                                                                       &quot;alt_sci_news_aggregator_total&quot;,
                                                                       &quot;alt_finance_news_total&quot;,
                                                                       &quot;alt_general_interest_local_news_total&quot;,
                                                                       &quot;alt_general_interest_news_total&quot;,            
                                                                       &quot;alt_medical_news_total&quot;,
                                                                       &quot;alt_other_news_total&quot;,
                                                                       &quot;alt_popsci_news_total&quot;,
                                                                       &quot;alt_science_news_total&quot;)])

prof_year_p_c_g_a$alt_online_ded_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_ded_news_aggregator_total&quot;,
                                                                           &quot;alt_ded_online_blog_total&quot;,
                                                                           &quot;alt_ded_sci_news_aggregator_total&quot;,
                                                                           &quot;alt_ded_finance_news_total&quot;,
                                                                           &quot;alt_ded_general_interest_local_news_total&quot;,
                                                                           &quot;alt_ded_general_interest_news_total&quot;,            
                                                                           &quot;alt_ded_medical_news_total&quot;,
                                                                           &quot;alt_ded_other_news_total&quot;,
                                                                           &quot;alt_ded_popsci_news_total&quot;,
                                                                           &quot;alt_ded_science_news_total&quot;)])

prof_year_p_c_g_a$alt_online_name_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_name_news_aggregator_total&quot;,
                                                                            &quot;alt_name_online_blog_total&quot;,
                                                                            &quot;alt_name_sci_news_aggregator_total&quot;,
                                                                            &quot;alt_name_finance_news_total&quot;,
                                                                            &quot;alt_name_general_interest_local_news_total&quot;,
                                                                            &quot;alt_name_general_interest_news_total&quot;,            
                                                                            &quot;alt_name_medical_news_total&quot;,
                                                                            &quot;alt_name_other_news_total&quot;,
                                                                            &quot;alt_name_popsci_news_total&quot;,
                                                                            &quot;alt_name_science_news_total&quot;)])

prof_year_p_c_g_a$alt_online_fname_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_fname_news_aggregator_total&quot;,
                                                                             &quot;alt_fname_online_blog_total&quot;,
                                                                             &quot;alt_fname_sci_news_aggregator_total&quot;,
                                                                             &quot;alt_fname_finance_news_total&quot;,
                                                                             &quot;alt_fname_general_interest_local_news_total&quot;,
                                                                             &quot;alt_fname_general_interest_news_total&quot;,            
                                                                             &quot;alt_fname_medical_news_total&quot;,
                                                                             &quot;alt_fname_other_news_total&quot;,
                                                                             &quot;alt_fname_popsci_news_total&quot;,
                                                                             &quot;alt_fname_science_news_total&quot;)])

prof_year_p_c_g_a$alt_online_single_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_single_news_aggregator_total&quot;,
                                                                              &quot;alt_single_online_blog_total&quot;,
                                                                              &quot;alt_single_sci_news_aggregator_total&quot;,
                                                                              &quot;alt_single_finance_news_total&quot;,
                                                                              &quot;alt_single_general_interest_local_news_total&quot;,
                                                                              &quot;alt_single_general_interest_news_total&quot;,            
                                                                              &quot;alt_single_medical_news_total&quot;,
                                                                              &quot;alt_single_other_news_total&quot;,
                                                                              &quot;alt_single_popsci_news_total&quot;,
                                                                              &quot;alt_single_science_news_total&quot;)])

prof_year_p_c_g_a$alt_online_dutch_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(&quot;alt_dutch_news_aggregator_total&quot;,
                                                                              &quot;alt_dutch_online_blog_total&quot;,
                                                                              &quot;alt_dutch_sci_news_aggregator_total&quot;,
                                                                              &quot;alt_dutch_finance_news_total&quot;,
                                                                              &quot;alt_dutch_general_interest_local_news_total&quot;,
                                                                              &quot;alt_dutch_general_interest_news_total&quot;,            
                                                                              &quot;alt_dutch_medical_news_total&quot;,
                                                                              &quot;alt_dutch_other_news_total&quot;,
                                                                              &quot;alt_dutch_popsci_news_total&quot;,
                                                                              &quot;alt_dutch_science_news_total&quot;)])


prof_year_p_c_g_a$alt_online_general_all &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_finance_news&quot;,
  &quot;alt_general_interest_local_news&quot;,
  &quot;alt_general_interest_news&quot;,  
  &quot;alt_popsci_news&quot;)])

prof_year_p_c_g_a$alt_online_general_ded_all &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_ded_finance_news&quot;,
  &quot;alt_ded_general_interest_local_news&quot;,
  &quot;alt_ded_general_interest_news&quot;,       
  &quot;alt_ded_popsci_news&quot;)])

prof_year_p_c_g_a$alt_online_general_name_all &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_name_finance_news&quot;,
  &quot;alt_name_general_interest_local_news&quot;,
  &quot;alt_name_general_interest_news&quot;,       
  &quot;alt_name_popsci_news&quot;)])

prof_year_p_c_g_a$alt_online_general_fname_all &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_fname_finance_news&quot;,
  &quot;alt_fname_general_interest_local_news&quot;,
  &quot;alt_fname_general_interest_news&quot;,       
  &quot;alt_fname_popsci_news&quot;)])

prof_year_p_c_g_a$alt_online_general_single_all &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_single_finance_news&quot;,
  &quot;alt_single_general_interest_local_news&quot;,
  &quot;alt_single_general_interest_news&quot;,       
  &quot;alt_single_popsci_news&quot;)])

prof_year_p_c_g_a$alt_online_general_dutch_all &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_dutch_finance_news&quot;,
  &quot;alt_dutch_general_interest_local_news&quot;,
  &quot;alt_dutch_general_interest_news&quot;,       
  &quot;alt_dutch_popsci_news&quot;)])

prof_year_p_c_g_a$alt_online_general_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_finance_news_total&quot;,
  &quot;alt_general_interest_local_news_total&quot;,
  &quot;alt_general_interest_news_total&quot;,            
  &quot;alt_popsci_news_total&quot;)])

prof_year_p_c_g_a$alt_online_general_ded_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_ded_finance_news_total&quot;,
  &quot;alt_ded_general_interest_local_news_total&quot;,
  &quot;alt_ded_general_interest_news_total&quot;,  
  &quot;alt_ded_popsci_news_total&quot;)])

prof_year_p_c_g_a$alt_online_general_name_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_name_finance_news_total&quot;,
  &quot;alt_name_general_interest_local_news_total&quot;,
  &quot;alt_name_general_interest_news_total&quot;,  
  &quot;alt_name_popsci_news_total&quot;)])


prof_year_p_c_g_a$alt_online_general_fname_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_fname_finance_news_total&quot;,
  &quot;alt_fname_general_interest_local_news_total&quot;,
  &quot;alt_fname_general_interest_news_total&quot;,  
  &quot;alt_fname_popsci_news_total&quot;)])

prof_year_p_c_g_a$alt_online_general_single_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_single_finance_news_total&quot;,
  &quot;alt_single_general_interest_local_news_total&quot;,
  &quot;alt_single_general_interest_news_total&quot;,  
  &quot;alt_single_popsci_news_total&quot;)])

prof_year_p_c_g_a$alt_online_general_dutch_all_total &lt;- rowSums(prof_year_p_c_g_a[,c(
  &quot;alt_dutch_finance_news_total&quot;,
  &quot;alt_dutch_general_interest_local_news_total&quot;,
  &quot;alt_dutch_general_interest_news_total&quot;,  
  &quot;alt_dutch_popsci_news_total&quot;)])</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_p_c_g_a, &quot;panel_datasets/prof_year_pubs_citations_grants_alt.csv&quot;)</code></pre>
<p>Clear the memory, remove some redundant objects:</p>
<pre class="r"><code>rm(twitter_orcid_attention)
rm(attention_blogs)
rm(attention_blogs_profs)
rm(attention_news)
rm(attention_news_blogs_profs)
rm(attention_news_blogs_profs_names)
rm(latest_citation)
gc()</code></pre>
</div>
<div id="printed-news-attention" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Printed news
attention</h1>
<p>Load the LexisNexis articles:</p>
<pre class="r"><code>lexis_data &lt;- dbReadTable(con, &quot;lexis_nexis_mentions&quot;)</code></pre>
<p>Now, aggregate professor mentions per year and per source, wherever
relevant:</p>
<pre class="r"><code># combine sources for easier handling:
prof_news_year &lt;- lexis_data %&gt;%
  filter(!is.na(year) &amp; year &gt;= 1973 &amp; year &lt;= 2023)%&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id, year, source_type)%&gt;%
  summarise(n = n())%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, source_type)%&gt;%
  mutate(cumsum = cumsum(n))%&gt;%
  pivot_wider(names_from = source_type, values_from = c(n, cumsum))%&gt;%
  fill(cumsum_national_nl:cumsum_high_prof_intl)%&gt;%
  replace(is.na(.), 0)

prof_news_year &lt;- prof_news_year[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;n_national_nl&quot;, 
                                   &quot;n_news_aggr&quot;, &quot;n_finance&quot;, &quot;n_other&quot;, 
                                   &quot;n_regional_nl&quot;, &quot;n_science&quot;, &quot;n_prof&quot;, 
                                   &quot;n_local_int&quot;, &quot;n_unknown&quot;, &quot;n_high_prof_intl&quot;,
                                   &quot;n_other_int&quot;, &quot;n_blog&quot;, &quot;cumsum_national_nl&quot;, 
                                   &quot;cumsum_news_aggr&quot;, &quot;cumsum_finance&quot;, &quot;cumsum_other&quot;, 
                                   &quot;cumsum_regional_nl&quot;, &quot;cumsum_science&quot;, &quot;cumsum_prof&quot;, 
                                   &quot;cumsum_local_int&quot;, &quot;cumsum_unknown&quot;, &quot;cumsum_high_prof_intl&quot;,
                                   &quot;cumsum_other_int&quot;, &quot;cumsum_blog&quot; )]

# tidy up the columns
colnames(prof_news_year)[3:26] &lt;- c(&quot;news_national&quot;, &quot;news_aggr&quot;, &quot;news_finance&quot;,
                                    &quot;news_other&quot;, &quot;news_regional&quot;, &quot;news_science&quot;,
                                    &quot;news_professional&quot;, &quot;news_local_intl&quot;, &quot;news_unknown&quot;,
                                    &quot;news_intl&quot;, &quot;news_intl_other&quot;, &quot;news_blog&quot;,
                                    &quot;news_national_total&quot;, &quot;news_aggr_total&quot;, &quot;news_finance_total&quot;,
                                    &quot;news_other_total&quot;, &quot;news_regional_total&quot;, &quot;news_science_total&quot;,
                                    &quot;news_professional_total&quot;, &quot;news_local_intl_total&quot;, &quot;news_unknown_total&quot;,
                                    &quot;news_intl_total&quot;, &quot;news_intl_other_total&quot;, &quot;news_blog_total&quot;)

# add total counts
prof_news_year$news_all &lt;- rowSums(prof_news_year[3:14])
prof_news_year$news_all_total &lt;- rowSums(prof_news_year[15:26])
   
# add general interest counts
prof_news_year$news_general_all &lt;- rowSums(prof_news_year[c(&quot;news_national&quot;, &quot;news_regional&quot;, &quot;news_intl&quot;,
                                                            &quot;news_local_intl&quot;, &quot;news_intl_other&quot;)])

prof_news_year$news_general_all_total &lt;- rowSums(prof_news_year[c(&quot;news_national_total&quot;, &quot;news_regional_total&quot;, &quot;news_intl_total&quot;,
                                                            &quot;news_local_intl_total&quot;, &quot;news_intl_other_total&quot;)])
   
# rearrange a bit
prof_news_year &lt;- prof_news_year %&gt;%
  select(profile_id, year, news_national, news_regional, news_intl, news_local_intl,
         news_intl_other, news_general_all, news_finance, news_professional, news_science, news_blog,
         news_aggr, news_unknown, news_other, news_all,
         news_national_total, news_regional_total, 
         news_intl_total, news_local_intl_total, news_intl_other_total, news_general_all_total, 
         news_finance_total, news_professional_total, news_science_total, news_blog_total,
         news_aggr_total, news_unknown_total, news_other_total, news_all_total)</code></pre>
<p>Deduplicated regional news:</p>
<pre class="r"><code># combine sources for easier handling:
prof_news_year_ded &lt;- lexis_data %&gt;%
  filter(!is.na(year) &amp; year &gt;= 1973 &amp; year &lt;= 2023 &amp; regional_duplicate == FALSE)%&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id, year, source_type)%&gt;%
  summarise(n = n())%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, source_type)%&gt;%
  mutate(cumsum = cumsum(n))%&gt;%
  pivot_wider(names_from = source_type, values_from = c(n, cumsum))%&gt;%
  fill(cumsum_national_nl:cumsum_high_prof_intl)%&gt;%
  replace(is.na(.), 0)

prof_news_year_ded &lt;- prof_news_year_ded[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;n_national_nl&quot;, 
                                           &quot;n_news_aggr&quot;, &quot;n_finance&quot;, &quot;n_other&quot;, 
                                           &quot;n_regional_nl&quot;, &quot;n_science&quot;, &quot;n_prof&quot;, 
                                           &quot;n_local_int&quot;, &quot;n_unknown&quot;, &quot;n_high_prof_intl&quot;,
                                           &quot;n_other_int&quot;, &quot;n_blog&quot;, &quot;cumsum_national_nl&quot;, 
                                           &quot;cumsum_news_aggr&quot;, &quot;cumsum_finance&quot;, &quot;cumsum_other&quot;, 
                                           &quot;cumsum_regional_nl&quot;, &quot;cumsum_science&quot;, &quot;cumsum_prof&quot;, 
                                           &quot;cumsum_local_int&quot;, &quot;cumsum_unknown&quot;, &quot;cumsum_high_prof_intl&quot;,
                                           &quot;cumsum_other_int&quot;, &quot;cumsum_blog&quot; )]

# tidy up the columns
colnames(prof_news_year_ded)[3:26] &lt;- c(&quot;news_ded_national&quot;, &quot;news_ded_aggr&quot;, &quot;news_ded_finance&quot;,
                                    &quot;news_ded_other&quot;, &quot;news_ded_regional&quot;, &quot;news_ded_science&quot;,
                                    &quot;news_ded_professional&quot;, &quot;news_ded_local_intl&quot;, &quot;news_ded_unknown&quot;,
                                    &quot;news_ded_intl&quot;, &quot;news_ded_intl_other&quot;, &quot;news_ded_blog&quot;,
                                    &quot;news_ded_national_total&quot;, &quot;news_ded_aggr_total&quot;, &quot;news_ded_finance_total&quot;,
                                    &quot;news_ded_other_total&quot;, &quot;news_ded_regional_total&quot;, &quot;news_ded_science_total&quot;,
                                    &quot;news_ded_professional_total&quot;, &quot;news_ded_local_intl_total&quot;, &quot;news_ded_unknown_total&quot;,
                                    &quot;news_ded_intl_total&quot;, &quot;news_ded_intl_other_total&quot;, &quot;news_ded_blog_total&quot;)

# add total counts
prof_news_year_ded$news_ded_all &lt;- rowSums(prof_news_year_ded[3:14])
prof_news_year_ded$news_ded_all_total &lt;- rowSums(prof_news_year_ded[15:26])
   
# add general interest counts
prof_news_year_ded$news_ded_general_all &lt;- rowSums(prof_news_year_ded[c(&quot;news_ded_national&quot;, &quot;news_ded_regional&quot;, &quot;news_ded_intl&quot;,
                                                            &quot;news_ded_local_intl&quot;, &quot;news_ded_intl_other&quot;)])
                                                   
prof_news_year_ded$news_ded_general_all_total &lt;- rowSums(prof_news_year_ded[c(&quot;news_ded_national_total&quot;, &quot;news_ded_regional_total&quot;,
                                                                              &quot;news_ded_intl_total&quot;, &quot;news_ded_local_intl_total&quot;,
                                                                              &quot;news_ded_intl_other_total&quot;)])
   
# rearrange a bit
prof_news_year_ded &lt;- prof_news_year_ded %&gt;%
  select(profile_id, year, news_ded_regional, news_ded_general_all, news_ded_all,
         news_ded_regional_total, news_ded_general_all_total, news_ded_all_total)</code></pre>
<p>Do the same, but excluding online resources:</p>
<pre class="r"><code>prof_news_year_offline &lt;- lexis_data %&gt;%
  filter(!is.na(year) &amp; year &gt;= 1973 &amp; year &lt;= 2023 &amp; online_resource == FALSE)%&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id, year, source_type)%&gt;%
  summarise(n = n())%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, source_type)%&gt;%
  mutate(cumsum = cumsum(n))%&gt;%
  pivot_wider(names_from = source_type, values_from = c(n, cumsum))%&gt;%
  fill(cumsum_national_nl:cumsum_high_prof_intl)%&gt;%
  replace(is.na(.), 0)

prof_news_year_offline &lt;- prof_news_year_offline[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;n_national_nl&quot;, 
                                                   &quot;n_news_aggr&quot;, &quot;n_finance&quot;, &quot;n_other&quot;, 
                                                   &quot;n_regional_nl&quot;, &quot;n_science&quot;, &quot;n_prof&quot;, 
                                                   &quot;n_local_int&quot;, &quot;n_unknown&quot;, &quot;n_high_prof_intl&quot;,
                                                   &quot;n_other_int&quot;, &quot;n_blog&quot;, &quot;cumsum_national_nl&quot;, 
                                                   &quot;cumsum_news_aggr&quot;, &quot;cumsum_finance&quot;, &quot;cumsum_other&quot;, 
                                                   &quot;cumsum_regional_nl&quot;, &quot;cumsum_science&quot;, &quot;cumsum_prof&quot;, 
                                                   &quot;cumsum_local_int&quot;, &quot;cumsum_unknown&quot;, &quot;cumsum_high_prof_intl&quot;,
                                                   &quot;cumsum_other_int&quot;, &quot;cumsum_blog&quot; )]

# tidy up the columns
colnames(prof_news_year_offline)[3:26] &lt;- c(&quot;news_off_national&quot;, &quot;news_off_aggr&quot;, &quot;news_off_finance&quot;,
                                            &quot;news_off_other&quot;, &quot;news_off_regional&quot;, &quot;news_off_science&quot;,
                                            &quot;news_off_professional&quot;, &quot;news_off_local_intl&quot;, &quot;news_off_unknown&quot;,
                                            &quot;news_off_intl&quot;, &quot;news_off_intl_other&quot;, &quot;news_off_blog&quot;,
                                            &quot;news_off_national_total&quot;, &quot;news_off_aggr_total&quot;, &quot;news_off_finance_total&quot;,
                                            &quot;news_off_other_total&quot;, &quot;news_off_regional_total&quot;, &quot;news_off_science_total&quot;,
                                            &quot;news_off_professional_total&quot;, &quot;news_off_local_intl_total&quot;, &quot;news_off_unknown_total&quot;,
                                            &quot;news_off_intl_total&quot;, &quot;news_off_intl_other_total&quot;, &quot;news_off_blog_total&quot;)
  
# add total counts
prof_news_year_offline$news_off_all &lt;- rowSums(prof_news_year_offline[3:14])
prof_news_year_offline$news_off_all_total &lt;- rowSums(prof_news_year_offline[15:26])
   
# add general interest counts
prof_news_year_offline$news_off_general_all &lt;- rowSums(prof_news_year_offline[c(&quot;news_off_national&quot;, &quot;news_off_regional&quot;, &quot;news_off_intl&quot;,
                                                            &quot;news_off_local_intl&quot;, &quot;news_off_intl_other&quot;)])
prof_news_year_offline$news_off_general_all_total &lt;- rowSums(prof_news_year_offline[c(&quot;news_off_national_total&quot;, 
                                                                                      &quot;news_off_regional_total&quot;,
                                                                                      &quot;news_off_intl_total&quot;, 
                                                                                      &quot;news_off_local_intl_total&quot;,
                                                                                      &quot;news_off_intl_other_total&quot;)])
   
# rearrange a bit
prof_news_year_offline &lt;- prof_news_year_offline %&gt;%
  select(profile_id, year, news_off_national, news_off_regional, news_off_intl, news_off_local_intl,
         news_off_intl_other, news_off_general_all, news_off_finance, news_off_professional, news_off_science, news_off_blog,
         news_off_aggr, news_off_unknown, news_off_other, news_off_all,
         news_off_national_total, news_off_regional_total, 
         news_off_intl_total, news_off_local_intl_total, news_off_intl_other_total, news_off_general_all_total, 
         news_off_finance_total, news_off_professional_total, news_off_science_total, news_off_blog_total,
         news_off_aggr_total, news_off_unknown_total, news_off_other_total, news_off_all_total)</code></pre>
<p>Now cover only resources with institutional affiliation
mentioned:</p>
<pre class="r"><code>prof_news_year_inst &lt;- lexis_data %&gt;%
  filter(!is.na(year) &amp; year &gt;= 1973 &amp; year &lt;= 2023 &amp; affiliation == TRUE)%&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id, year, source_type)%&gt;%
  summarise(n = n())%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, source_type)%&gt;%
  mutate(cumsum = cumsum(n))%&gt;%
  pivot_wider(names_from = source_type, values_from = c(n, cumsum))%&gt;%
  fill(cumsum_national_nl:cumsum_high_prof_intl)%&gt;%
  replace(is.na(.), 0)

prof_news_year_inst &lt;- prof_news_year_inst[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;n_national_nl&quot;, 
                                             &quot;n_news_aggr&quot;, &quot;n_finance&quot;, &quot;n_other&quot;, 
                                             &quot;n_regional_nl&quot;, &quot;n_science&quot;, &quot;n_prof&quot;, 
                                             &quot;n_local_int&quot;, &quot;n_unknown&quot;, &quot;n_high_prof_intl&quot;,
                                             &quot;n_other_int&quot;, &quot;n_blog&quot;, &quot;cumsum_national_nl&quot;, 
                                             &quot;cumsum_news_aggr&quot;, &quot;cumsum_finance&quot;, &quot;cumsum_other&quot;, 
                                             &quot;cumsum_regional_nl&quot;, &quot;cumsum_science&quot;, &quot;cumsum_prof&quot;, 
                                             &quot;cumsum_local_int&quot;, &quot;cumsum_unknown&quot;, &quot;cumsum_high_prof_intl&quot;,
                                             &quot;cumsum_other_int&quot;, &quot;cumsum_blog&quot; )]

# tidy up the columns
colnames(prof_news_year_inst)[3:26] &lt;- c(&quot;news_inst_national&quot;, &quot;news_inst_aggr&quot;, &quot;news_inst_finance&quot;,
                                            &quot;news_inst_other&quot;, &quot;news_inst_regional&quot;, &quot;news_inst_science&quot;,
                                            &quot;news_inst_professional&quot;, &quot;news_inst_local_intl&quot;, &quot;news_inst_unknown&quot;,
                                            &quot;news_inst_intl&quot;, &quot;news_inst_intl_other&quot;, &quot;news_inst_blog&quot;,
                                            &quot;news_inst_national_total&quot;, &quot;news_inst_aggr_total&quot;, &quot;news_inst_finance_total&quot;,
                                            &quot;news_inst_other_total&quot;, &quot;news_inst_regional_total&quot;, &quot;news_inst_science_total&quot;,
                                            &quot;news_inst_professional_total&quot;, &quot;news_inst_local_intl_total&quot;, &quot;news_inst_unknown_total&quot;,
                                            &quot;news_inst_intl_total&quot;, &quot;news_inst_intl_other_total&quot;, &quot;news_inst_blog_total&quot;)
  
# add total counts
prof_news_year_inst$news_inst_all &lt;- rowSums(prof_news_year_inst[3:14])
prof_news_year_inst$news_inst_all_total &lt;- rowSums(prof_news_year_inst[15:26])
   
# add general interest counts
prof_news_year_inst$news_inst_general_all &lt;- rowSums(prof_news_year_inst[c(&quot;news_inst_national&quot;, &quot;news_inst_regional&quot;, &quot;news_inst_intl&quot;,
                                                            &quot;news_inst_local_intl&quot;, &quot;news_inst_intl_other&quot;)])

prof_news_year_inst$news_inst_general_all_total &lt;- rowSums(prof_news_year_inst[c(&quot;news_inst_national_total&quot;, 
                                                                                      &quot;news_inst_regional_total&quot;,
                                                                                      &quot;news_inst_intl_total&quot;, 
                                                                                      &quot;news_inst_local_intl_total&quot;,
                                                                                      &quot;news_inst_intl_other_total&quot;)])
   
# rearrange a bit
prof_news_year_inst &lt;- prof_news_year_inst %&gt;%
  select(profile_id, year, news_inst_national, news_inst_regional, news_inst_intl, news_inst_local_intl,
         news_inst_intl_other, news_inst_general_all, news_inst_finance, news_inst_professional, news_inst_science, news_inst_blog,
         news_inst_aggr, news_inst_unknown, news_inst_other, news_inst_all,
         news_inst_national_total, news_inst_regional_total, 
         news_inst_intl_total, news_inst_local_intl_total, news_inst_intl_other_total, news_inst_general_all_total, 
         news_inst_finance_total, news_inst_professional_total, news_inst_science_total, news_inst_blog_total,
         news_inst_aggr_total, news_inst_unknown_total, news_inst_other_total, news_inst_all_total)</code></pre>
<p>And deduplicated:</p>
<pre class="r"><code>prof_news_year_inst_ded &lt;- lexis_data %&gt;%
  filter(!is.na(year) &amp; year &gt;= 1973 &amp; year &lt;= 2023 &amp; affiliation == TRUE &amp; regional_duplicate == FALSE)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, year, source_type)%&gt;%
  summarise(n = n())%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, source_type)%&gt;%
  mutate(cumsum = cumsum(n))%&gt;%
  pivot_wider(names_from = source_type, values_from = c(n, cumsum))%&gt;%
  fill(cumsum_national_nl:cumsum_high_prof_intl)%&gt;%
  replace(is.na(.), 0)

prof_news_year_inst_ded &lt;- prof_news_year_inst_ded[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;n_national_nl&quot;, 
                                                     &quot;n_news_aggr&quot;, &quot;n_finance&quot;, &quot;n_other&quot;, 
                                                     &quot;n_regional_nl&quot;, &quot;n_science&quot;, &quot;n_prof&quot;, 
                                                     &quot;n_local_int&quot;, &quot;n_unknown&quot;, &quot;n_high_prof_intl&quot;,
                                                     &quot;n_other_int&quot;, &quot;n_blog&quot;, &quot;cumsum_national_nl&quot;, 
                                                     &quot;cumsum_news_aggr&quot;, &quot;cumsum_finance&quot;, &quot;cumsum_other&quot;, 
                                                     &quot;cumsum_regional_nl&quot;, &quot;cumsum_science&quot;, &quot;cumsum_prof&quot;, 
                                                     &quot;cumsum_local_int&quot;, &quot;cumsum_unknown&quot;, &quot;cumsum_high_prof_intl&quot;,
                                                     &quot;cumsum_other_int&quot;, &quot;cumsum_blog&quot; )]

# tidy up the columns
colnames(prof_news_year_inst_ded)[3:26] &lt;- c(&quot;news_ded_inst_national&quot;, &quot;news_ded_inst_aggr&quot;, &quot;news_ded_inst_finance&quot;,
                                            &quot;news_ded_inst_other&quot;, &quot;news_ded_inst_regional&quot;, &quot;news_ded_inst_science&quot;,
                                            &quot;news_ded_inst_professional&quot;, &quot;news_ded_inst_local_intl&quot;, &quot;news_ded_inst_unknown&quot;,
                                            &quot;news_ded_inst_intl&quot;, &quot;news_ded_inst_intl_other&quot;, &quot;news_ded_inst_blog&quot;,
                                            &quot;news_ded_inst_national_total&quot;, &quot;news_ded_inst_aggr_total&quot;, &quot;news_ded_inst_finance_total&quot;,
                                            &quot;news_ded_inst_other_total&quot;, &quot;news_ded_inst_regional_total&quot;, &quot;news_ded_inst_science_total&quot;,
                                            &quot;news_ded_inst_professional_total&quot;, &quot;news_ded_inst_local_intl_total&quot;, &quot;news_ded_inst_unknown_total&quot;,
                                            &quot;news_ded_inst_intl_total&quot;, &quot;news_ded_inst_intl_other_total&quot;, &quot;news_ded_inst_blog_total&quot;)
  
# add total counts
prof_news_year_inst_ded$news_ded_inst_all &lt;- rowSums(prof_news_year_inst_ded[3:14])
prof_news_year_inst_ded$news_ded_inst_all_total &lt;- rowSums(prof_news_year_inst_ded[15:26])
   
# add general interest counts
prof_news_year_inst_ded$news_ded_inst_general_all &lt;- rowSums(prof_news_year_inst_ded[c(&quot;news_ded_inst_national&quot;, &quot;news_ded_inst_regional&quot;, &quot;news_ded_inst_intl&quot;,
                                                            &quot;news_ded_inst_local_intl&quot;, &quot;news_ded_inst_intl_other&quot;)])

prof_news_year_inst_ded$news_ded_inst_general_all_total &lt;- rowSums(prof_news_year_inst_ded[c(&quot;news_ded_inst_national_total&quot;, 
                                                                                      &quot;news_ded_inst_regional_total&quot;,
                                                                                      &quot;news_ded_inst_intl_total&quot;, 
                                                                                      &quot;news_ded_inst_local_intl_total&quot;,
                                                                                      &quot;news_ded_inst_intl_other_total&quot;)])
   
# rearrange a bit
prof_news_year_inst_ded &lt;- prof_news_year_inst_ded %&gt;%
  select(profile_id, year, news_ded_inst_national, news_ded_inst_regional, news_ded_inst_intl, news_ded_inst_local_intl,
         news_ded_inst_intl_other, news_ded_inst_general_all, news_ded_inst_finance, news_ded_inst_professional, news_ded_inst_science, news_ded_inst_blog,
         news_ded_inst_aggr, news_ded_inst_unknown, news_ded_inst_other, news_ded_inst_all,
         news_ded_inst_national_total, news_ded_inst_regional_total, 
         news_ded_inst_intl_total, news_ded_inst_local_intl_total, news_ded_inst_intl_other_total, news_ded_inst_general_all_total, 
         news_ded_inst_finance_total, news_ded_inst_professional_total, news_ded_inst_science_total, news_ded_inst_blog_total,
         news_ded_inst_aggr_total, news_ded_inst_unknown_total, news_ded_inst_other_total, news_ded_inst_all_total)</code></pre>
<p>Finally, deduplicated resources with strict name criteria
inlcuded:</p>
<pre class="r"><code>lexis_data_strict &lt;- dbReadTable(con, &quot;lexis_nexis_mentions_strict_criterion&quot;)

prof_news_year_strict &lt;- lexis_data_strict %&gt;%
  filter(!is.na(year) &amp; year &gt;= 1973 &amp; year &lt;= 2023 &amp; strict_criteria == TRUE)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, year, source_type)%&gt;%
  summarise(n = n())%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, year, source_type)%&gt;%
  group_by(profile_id, source_type)%&gt;%
  mutate(cumsum = cumsum(n))%&gt;%
  pivot_wider(names_from = source_type, values_from = c(n, cumsum))%&gt;%
  fill(cumsum_national_nl:cumsum_high_prof_intl)%&gt;%
  replace(is.na(.), 0)

prof_news_year_strict &lt;- prof_news_year_strict[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;n_national_nl&quot;, 
                                                 &quot;n_news_aggr&quot;, &quot;n_finance&quot;, &quot;n_other&quot;, 
                                                 &quot;n_regional_nl&quot;, &quot;n_science&quot;, &quot;n_prof&quot;, 
                                                 &quot;n_local_int&quot;, &quot;n_unknown&quot;, &quot;n_high_prof_intl&quot;,
                                                 &quot;n_other_int&quot;, &quot;n_blog&quot;, &quot;cumsum_national_nl&quot;, 
                                                 &quot;cumsum_news_aggr&quot;, &quot;cumsum_finance&quot;, &quot;cumsum_other&quot;, 
                                                 &quot;cumsum_regional_nl&quot;, &quot;cumsum_science&quot;, &quot;cumsum_prof&quot;, 
                                                 &quot;cumsum_local_int&quot;, &quot;cumsum_unknown&quot;, &quot;cumsum_high_prof_intl&quot;,
                                                 &quot;cumsum_other_int&quot;, &quot;cumsum_blog&quot; )]

# tidy up the columns
colnames(prof_news_year_strict)[3:26] &lt;- c(&quot;news_strict_national&quot;, &quot;news_strict_aggr&quot;, &quot;news_strict_finance&quot;,
                                            &quot;news_strict_other&quot;, &quot;news_strict_regional&quot;, &quot;news_strict_science&quot;,
                                            &quot;news_strict_professional&quot;, &quot;news_strict_local_intl&quot;, &quot;news_strict_unknown&quot;,
                                            &quot;news_strict_intl&quot;, &quot;news_strict_intl_other&quot;, &quot;news_strict_blog&quot;,
                                            &quot;news_strict_national_total&quot;, &quot;news_strict_aggr_total&quot;, &quot;news_strict_finance_total&quot;,
                                            &quot;news_strict_other_total&quot;, &quot;news_strict_regional_total&quot;, &quot;news_strict_science_total&quot;,
                                            &quot;news_strict_professional_total&quot;, &quot;news_strict_local_intl_total&quot;, &quot;news_strict_unknown_total&quot;,
                                            &quot;news_strict_intl_total&quot;, &quot;news_strict_intl_other_total&quot;, &quot;news_strict_blog_total&quot;)
  
# add total counts
prof_news_year_strict$news_strict_all &lt;- rowSums(prof_news_year_strict[3:14])
prof_news_year_strict$news_strict_all_total &lt;- rowSums(prof_news_year_strict[15:26])
   
# add general interest counts
prof_news_year_strict$news_strict_general_all &lt;- rowSums(prof_news_year_strict[c(&quot;news_strict_national&quot;, &quot;news_strict_regional&quot;, &quot;news_strict_intl&quot;,
                                                            &quot;news_strict_local_intl&quot;, &quot;news_strict_intl_other&quot;)])

prof_news_year_strict$news_strict_general_all_total &lt;- rowSums(prof_news_year_strict[c(&quot;news_strict_national_total&quot;, 
                                                                                      &quot;news_strict_regional_total&quot;,
                                                                                      &quot;news_strict_intl_total&quot;, 
                                                                                      &quot;news_strict_local_intl_total&quot;,
                                                                                      &quot;news_strict_intl_other_total&quot;)])
   
# rearrange a bit
prof_news_year_strict &lt;- prof_news_year_strict %&gt;%
  select(profile_id, year, news_strict_national, news_strict_regional, news_strict_intl, news_strict_local_intl,
         news_strict_intl_other, news_strict_general_all, news_strict_finance, news_strict_professional, news_strict_science, news_strict_blog,
         news_strict_aggr, news_strict_unknown, news_strict_other, news_strict_all,
         news_strict_national_total, news_strict_regional_total, 
         news_strict_intl_total, news_strict_local_intl_total, news_strict_intl_other_total, news_strict_general_all_total, 
         news_strict_finance_total, news_strict_professional_total, news_strict_science_total, news_strict_blog_total,
         news_strict_aggr_total, news_strict_unknown_total, news_strict_other_total, news_strict_all_total)</code></pre>
<p>Merge the lexis sub-data-frames:</p>
<pre class="r"><code>prof_news_year &lt;- merge(prof_news_year,
                        prof_news_year_ded,
                        all.x = TRUE,
                        all.y = TRUE,
                        by = c(&quot;profile_id&quot;, &quot;year&quot;))

prof_news_year &lt;- merge(prof_news_year,
                        prof_news_year_offline,
                        all.x = TRUE,
                        all.y = TRUE,
                        by = c(&quot;profile_id&quot;, &quot;year&quot;))

prof_news_year &lt;- merge(prof_news_year,
                        prof_news_year_inst,
                        all.x = TRUE,
                        all.y = TRUE,
                        by = c(&quot;profile_id&quot;, &quot;year&quot;))

prof_news_year &lt;- merge(prof_news_year,
                        prof_news_year_inst_ded,
                        all.x = TRUE,
                        all.y = TRUE,
                        by = c(&quot;profile_id&quot;, &quot;year&quot;))

prof_news_year &lt;- merge(prof_news_year,
                        prof_news_year_strict,
                        all.x = TRUE,
                        all.y = TRUE,
                        by = c(&quot;profile_id&quot;, &quot;year&quot;))</code></pre>
<p>Pad lexis data with the professor panel:</p>
<pre class="r"><code># get all observations in the panel
prof_lexis_year_pad &lt;- merge(prof_news_year,
                             prof_year_p_c_g_a[c(&quot;profile_id&quot;, &quot;year&quot;)],
                             all.y= TRUE,
                             all.x = TRUE)

# fill down on totals and replace NAs with zeroes
prof_lexis_year_pad &lt;- prof_lexis_year_pad %&gt;%
  group_by(profile_id)%&gt;%
  fill(news_national_total, news_regional_total,
       news_intl_total,news_local_intl_total, news_intl_other_total,
       news_general_all_total, news_finance_total, news_professional_total,
       news_science_total, news_blog_total,news_aggr_total,
       news_unknown_total, news_other_total, news_all_total,
       news_ded_regional_total, news_ded_general_all_total, news_ded_all_total,
       news_off_national_total, news_off_regional_total, news_off_intl_total, 
       news_off_local_intl_total,
       news_off_intl_other_total, news_off_general_all_total, news_off_finance_total,
       news_off_professional_total, news_off_science_total, news_off_blog_total,
       news_off_aggr_total, news_off_unknown_total, news_off_other_total,
       news_off_all_total, 
       news_inst_national_total, news_inst_regional_total, news_inst_intl_total,
       news_inst_local_intl_total, news_inst_intl_other_total, news_inst_general_all_total,
       news_inst_finance_total, news_inst_professional_total, news_inst_science_total,
       news_inst_blog_total, news_inst_aggr_total, news_inst_unknown_total,
       news_inst_other_total, news_inst_all_total,
       news_ded_inst_national_total, news_ded_inst_regional_total,
       news_ded_inst_intl_total, news_ded_inst_local_intl_total, news_ded_inst_intl_other_total,
       news_ded_inst_general_all_total, news_ded_inst_finance_total, news_ded_inst_professional_total,
       news_ded_inst_science_total, news_ded_inst_blog_total, news_ded_inst_aggr_total,
       news_ded_inst_unknown_total, news_ded_inst_other_total, news_ded_inst_all_total, 
       news_strict_national_total, news_strict_regional_total,
       news_strict_intl_total, news_strict_local_intl_total, news_strict_intl_other_total,
       news_strict_general_all_total, news_strict_finance_total, news_strict_professional_total,
       news_strict_science_total, news_strict_blog_total, news_strict_aggr_total,
       news_strict_unknown_total, news_strict_other_total, news_strict_all_total, 
       .direction = &quot;down&quot;)%&gt;%
  mutate(across(contains(&#39;news&#39;), replace_na, 0))</code></pre>
<p>If excluded professors, set to NAs:</p>
<pre class="r"><code>exclude_profs &lt;- c() # redacted for privacy

prof_lexis_year_pad[which(prof_lexis_year_pad$profile_id %in% paste0(&quot;https://www.narcis.nl/person/RecordID/&quot;,exclude_profs)),3:148] &lt;- NA</code></pre>
<p>Combine our professor panel with lexis data:</p>
<pre class="r"><code>prof_year_p_c_g_a_l &lt;- merge(prof_year_p_c_g_a,
                             prof_lexis_year_pad,
                             by = c(&quot;profile_id&quot;, &quot;year&quot;),
                             all.x = TRUE)</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_p_c_g_a_l, &quot;panel_datasets/prof_year_pubs_citations_grants_alt_lexis.csv&quot;)</code></pre>
<pre class="r"><code>rm(lexis_data)
rm(lexis_data_filt)
rm(lexis_data_filt_ded)
rm(prof_news_year)
rm(prof_news_year_ded)
rm(prof_news_year_inst)
rm(prof_news_year_inst_ded)
rm(prof_lexis_year_pad)
gc()</code></pre>
</div>
<div id="field-classification" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Field
classification</h1>
<p>Get each professor’s main field in a given year based on their
papers, and get their overall specialization.</p>
<p>First, fetching the topics:</p>
<pre class="r"><code>oa_pubs_topics &lt;- dbReadTable(con, &quot;oa_pubs_topics&quot;)

oa_pubs_topics &lt;- merge(oa_prof_pub_matching,
                        oa_pubs_topics,
                        by = &quot;id&quot;,
                        all.x = TRUE)
 
oa_pubs_topics &lt;- merge(oa_pubs_topics,
                        oa_pubs_unique[c(&quot;id&quot;, &quot;publication_year&quot;)],
                        by = &quot;id&quot;)

# leave the domain as is, unless it&#39;s arts and humanities
oa_pubs_topics$scopus_domain_adj &lt;- ifelse(oa_pubs_topics$field_display_name == &quot;Arts and Humanities&quot;,
                                           &quot;Arts and Humanities&quot;,
                                           oa_pubs_topics$domain_display_name)</code></pre>
<p>Professor’s topic diversity per year and in total:</p>
<pre class="r"><code>oa_pubs_topics$field_display_name &lt;- as.factor(oa_pubs_topics$field_display_name)

# per year
prof_year_field &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, field_display_name, publication_year) %&gt;%
  summarise(count = n())%&gt;%
  filter(!is.na(field_display_name))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, field_display_name, publication_year)%&gt;%
  group_by(profile_id, field_display_name) %&gt;%
  pivot_wider(names_from = field_display_name, values_from = count)%&gt;%
  replace(is.na(.), 0)
  
  
diversity_year &lt;- diversity(prof_year_field[, -c(1:2)], index = &quot;shannon&quot;)

prof_year_field_div &lt;- cbind.data.frame(prof_year_field[, c(1:2)],
                                        yearly_diversity = diversity_year)

prof_year_field_div$yearly_field_evennes &lt;- prof_year_field_div$yearly_diversity/log(26)

colnames(prof_year_field_div)[2] &lt;- &quot;year&quot;

# in total
prof_total_field &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, field_display_name) %&gt;%
  summarise(count = n())%&gt;%
  filter(!is.na(field_display_name))%&gt;%
  replace(is.na(.), 0)%&gt;%
  arrange(profile_id, field_display_name)%&gt;%
  pivot_wider(names_from = field_display_name, values_from = c(count))%&gt;%
  replace(is.na(.), 0)
  
  
diversity_total &lt;- diversity(prof_total_field[, -c(1)], index = &quot;shannon&quot;)


prof_field_div &lt;- cbind.data.frame(prof_total_field[, c(1)],
                                        total_diversity = diversity_total)

prof_field_div$total_field_evennes &lt;- prof_field_div$total_diversity/log(26)</code></pre>
<p>Merge this with our data:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l,
                             prof_year_field_div,
                             by = c(&quot;profile_id&quot;, &quot;year&quot;),
                             all.x = TRUE,
                             all.y = FALSE) 

prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_field_div,
                             by = c(&quot;profile_id&quot;),
                             all.x = TRUE,
                             all.y = FALSE) </code></pre>
<p>Fields and subfields per prof per year and in total</p>
<pre class="r"><code># per year field
prof_year_field &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, publication_year, field_display_name) %&gt;%
  summarise(n = n())%&gt;%
  slice_max(n, with_ties = FALSE)%&gt;%
  select(-n)

colnames(prof_year_field)[c(2,3)] &lt;- c(&quot;year&quot;,&quot;yearly_field&quot; )

# per year subfield
prof_year_subfield &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, publication_year, subfield_display_name) %&gt;%
  summarise(n = n())%&gt;%
  slice_max(n, with_ties = FALSE)%&gt;%
  select(-n)

colnames(prof_year_subfield)[c(2,3)] &lt;- c(&quot;year&quot;,&quot;yearly_subfield&quot;) 

# per year adjusted
prof_year_domain &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, publication_year, scopus_domain_adj) %&gt;%
  summarise(n = n())%&gt;%
  slice_max(n, with_ties = FALSE)%&gt;%
  select(-n)

colnames(prof_year_domain)[c(2,3)] &lt;- c(&quot;year&quot;, &quot;yearly_adj_domain&quot;) 


# overall 
prof_total_subfield &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, subfield_display_name) %&gt;%
  summarise(n = n())%&gt;%
  slice_max(n, with_ties = FALSE)%&gt;%
  select(-n)

colnames(prof_total_subfield)[2] &lt;- c(&quot;overall_subfield&quot; )

prof_total_field &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, field_display_name) %&gt;%
  summarise(n = n())%&gt;%
  slice_max(n, with_ties = FALSE)%&gt;%
  select(-n)

colnames(prof_total_field)[2] &lt;- c(&quot;overall_field&quot; )

# overal adjusted
prof_total_domain &lt;- oa_pubs_topics %&gt;%
  group_by(profile_id, scopus_domain_adj) %&gt;%
  summarise(n = n())%&gt;%
  slice_max(n, with_ties = FALSE)%&gt;%
  select(-n)

colnames(prof_total_domain)[2] &lt;- c(&quot;overall_adj_domain&quot;) 


# merge profs and their fields
prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_year_field[c(&quot;profile_id&quot;, &quot;yearly_field&quot;, &quot;year&quot;)],
                             by = c(&quot;profile_id&quot;, &quot;year&quot;),
                             all.x = TRUE,
                             all.y = FALSE) 

prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_year_subfield[c(&quot;profile_id&quot;, &quot;yearly_subfield&quot;, &quot;year&quot;)],
                             by = c(&quot;profile_id&quot;, &quot;year&quot;),
                             all.x = TRUE,
                             all.y = FALSE) 

prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_year_domain[c(&quot;profile_id&quot;, &quot;yearly_adj_domain&quot;, &quot;year&quot;)],
                             by = c(&quot;profile_id&quot;, &quot;year&quot;),
                             all.x = TRUE,
                             all.y = FALSE) 

prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_total_field[c(&quot;profile_id&quot;, &quot;overall_field&quot;)],
                             by = c(&quot;profile_id&quot;),
                             all.x = TRUE,
                             all.y = FALSE) 

prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_total_subfield[c(&quot;profile_id&quot;, &quot;overall_subfield&quot;)],
                             by = c(&quot;profile_id&quot;),
                             all.x = TRUE,
                             all.y = FALSE) 

prof_year_p_c_g_a_l_f &lt;- merge(prof_year_p_c_g_a_l_f,
                             prof_total_domain[c(&quot;profile_id&quot;, &quot;overall_adj_domain&quot;)],
                             by = c(&quot;profile_id&quot;),
                             all.x = TRUE,
                             all.y = FALSE) </code></pre>
<p>Remove duplicates, if any:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f$dupl &lt;- duplicated(prof_year_p_c_g_a_l_f[c(&quot;profile_id&quot;, &quot;year&quot;)])

prof_year_p_c_g_a_l_f &lt;- prof_year_p_c_g_a_l_f %&gt;%
  filter(dupl == FALSE)%&gt;%
  select(-dupl)

# fill
prof_year_p_c_g_a_l_f &lt;- prof_year_p_c_g_a_l_f %&gt;%
  group_by(profile_id)%&gt;%
  fill(yearly_field, yearly_subfield, yearly_adj_domain,  .direction = &quot;down&quot;)</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_p_c_g_a_l_f, &quot;panel_datasets/prof_year_pubs_citations_grants_alt_lexis_field.csv&quot;)</code></pre>
<p>Remove some redundant objects:</p>
<pre class="r"><code>rm(oa_pubs_topics)
gc()</code></pre>
</div>
<div id="institution-dummies" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Institution
dummies</h1>
<p>Load yearly institution data. Then, find the most frequent
institutional affiliation for each prof for each year.</p>
<pre class="r"><code># load the institution data
institution_yearly_data &lt;- dbReadTable(con, &quot;oa_prof_yearly_affiliations&quot;)
# merge back to NARCIS IDs
oa_ids &lt;- dbReadTable(con, &quot;oa_id_mapping&quot;)
institution_yearly_data &lt;- merge(institution_yearly_data,
                                 oa_ids[c(&quot;profile_id&quot;, &quot;oa_id&quot;)],
                                 by.x = &quot;au_id&quot;,
                                 by.y = &quot;oa_id&quot;)</code></pre>
<p>Now, recode the institutions capture University units and UMCs
associated to all the Dutch universities, binning other institutions
(also including e.g., Hogeshools, governmental institutes, and foreign
institutions as “Other”).</p>
<pre class="r"><code># we manually extract the relevant university units from the OpenAlex dataset
uva_string &lt;- c(&quot;University of Amsterdam&quot;,
                &quot;Amsterdam University Medical Centers&quot;,
                &quot;Amsterdam Neuroscience&quot;,
                &quot;Amsterdam University of the Arts&quot;,
                &quot;Academic Center for Dentistry Amsterdam&quot;,
                &quot;Cancer Center Amsterdam&quot;)

vu_string &lt;- c(&quot;Vrije Universiteit Amsterdam&quot;,
               &quot;Amsterdam UMC Location VUmc&quot;)

rug_string &lt;- c(&quot;University of Groningen&quot;,
                &quot;University Medical Center Groningen&quot;,
                &quot;Dialyse Centrum Groningen&quot;)

leiden_string &lt;- c(&quot;Leiden University&quot;,
                   &quot;Leiden University Medical Center&quot;,
                   &quot;Leiden Observatory&quot;)

maastrict_string &lt;- c(&quot;Maastricht University&quot;,
                      &quot;Maastricht University Medical Centre&quot;,
                      &quot;Maastricht School of Management&quot;,
                      &quot;Clinical Trial Center Maastricht&quot;)

ru_string &lt;- c(&quot;Radboud University Nijmegen&quot;,
               &quot;Radboud University Medical Center&quot;,
               &quot;Radboud Institute for Molecular Life Sciences&quot;)


eu_string &lt;- c(&quot;Erasmus University Rotterdam&quot;,
               &quot;Erasmus MC&quot;,
               &quot;Erasmus MC Cancer Institute&quot;,
               &quot;Erasmus MC - Sophia Children’s Hospital&quot;,
               &quot;Erasmus Optical Imaging Centre&quot;)

tilburg_string &lt;- c(&quot;Tilburg University&quot;)

uu_string &lt;- c(&quot;Utrecht University&quot;,
              &quot;University Medical Center Utrecht&quot;)

delft_string &lt;- c(&quot;Delft University of Technology&quot;)

eindhoven_string &lt;- c(&quot;Eindhoven University of Technology&quot;)

twente_string &lt;- c(&quot;University of Twente&quot;)

wageningen_string &lt;- c(&quot;Wageningen University &amp; Research&quot;)

institution_yearly_data$dutch_uni_var &lt;- ifelse(
  institution_yearly_data$display_name %in% uva_string,
  &quot;uni_1&quot;,
  ifelse(
    institution_yearly_data$display_name %in% vu_string,
    &quot;uni_2&quot;,
    ifelse(
      institution_yearly_data$display_name %in% rug_string,
      &quot;uni_3&quot;,
      ifelse(
        institution_yearly_data$display_name %in% leiden_string,
        &quot;uni_4&quot;,
        ifelse(
          institution_yearly_data$display_name %in% maastrict_string,
          &quot;uni_5&quot;,
          ifelse(
            institution_yearly_data$display_name %in% ru_string,
            &quot;uni_6&quot;,
            ifelse(
              institution_yearly_data$display_name %in% eu_string,
              &quot;uni_7&quot;,
              ifelse(
                institution_yearly_data$display_name %in% tilburg_string,
                &quot;uni_8&quot;,
                ifelse(
                  institution_yearly_data$display_name %in% uu_string,
                  &quot;uni_9&quot;,
                  ifelse(
                    institution_yearly_data$display_name %in% delft_string,
                    &quot;uni_10&quot;,
                    ifelse(
                      institution_yearly_data$display_name %in% eindhoven_string,
                      &quot;uni_11&quot;,
                      ifelse(
                        institution_yearly_data$display_name %in% twente_string,
                        &quot;uni_12&quot;,
                        ifelse(
                          institution_yearly_data$display_name %in% wageningen_string,
                          &quot;uni_13&quot;,
                              &quot;other&quot;)))))))))))))

# now, encode the diplay names of institutions to protect professors&#39; anonymity in the final set
# generate new ID mapping
unique_id &lt;- unique(institution_yearly_data$id)
new_ids &lt;- paste(&quot;inst&quot;, c(1:length(unique_id)), sep= &quot;_&quot;)

new_id_mapping &lt;- data.frame(id = unique_id,
                             inst_id = new_ids)

dbWriteTable(con, &quot;anonymous_institution_id_mapping&quot;, new_id_mapping, row.names=FALSE, append=TRUE)

# combine the panel with the new ID mapping
institution_yearly_data &lt;- merge(institution_yearly_data,
                                 new_id_mapping,
                                 by = &quot;id&quot;,
                                 all.x = TRUE)</code></pre>
<p>Get the model institution in general, and also between 2012 and 2023,
which is our focus period:</p>
<pre class="r"><code>modal_institution &lt;- institution_yearly_data %&gt;%
  group_by(profile_id, years)%&gt;%
  summarise(institution_id_yearly = collapse::fmode(inst_id),
            institution_dutch_yearly = collapse::fmode(dutch_uni_var))

colnames(modal_institution)[2] &lt;- &quot;year&quot;

modal_institution_2012 &lt;- institution_yearly_data %&gt;%
  filter(years &gt;= 2012)%&gt;%
  group_by(profile_id, years)%&gt;%
  summarise(institution_id_yearly_since2012 = collapse::fmode(inst_id),
            institution_dutch_yearly_since2012 = collapse::fmode(dutch_uni_var))

colnames(modal_institution_2012)[2] &lt;- &quot;year&quot;</code></pre>
<p>Prepare the following as well: make sure that if a dutch university
affiliaton makes up at least an equal part of affiliations in a year to
denote that year’s affiliation as the dutch university affiliation.</p>
<pre class="r"><code>profile_ids &lt;- unique(prof_year_p_c_g_a_l_f$profile_id)

institution_yearly_data$inst_id_dutch &lt;- ifelse(institution_yearly_data$dutch_uni_var != &quot;other&quot;,
                                                institution_yearly_data$dutch_uni_var,
                                                institution_yearly_data$inst_id)

prof_affiliations_yearly_dutch &lt;- data.frame(matrix(NA, ncol = 0, nrow = 0))

for (prof in profile_ids){
  
  # get this professor&#39;s affiliations
  prof_affiliations &lt;- institution_yearly_data %&gt;%
    filter(profile_id == prof)%&gt;%
    group_by(years, inst_id_dutch)%&gt;%
    summarise(n = n()) %&gt;%
    mutate(freq = n / sum(n))
  
  if(nrow(prof_affiliations) &gt; 0){
  
  # get yearly totals
  prof_yearly &lt;- institution_yearly_data %&gt;%
    filter(profile_id == prof)%&gt;%
    group_by(years)%&gt;%
    summarise(yearly_total = n())
  
  # merge
  prof_affiliations &lt;- merge(prof_affiliations,
                             prof_yearly,
                             by = &quot;years&quot;)
  
  # determine the minimal share for equal share of a dutch institution
  prof_affiliations$ideal_share &lt;- 1/prof_affiliations$yearly_total
  
  # mark all dutch universities as one
  prof_affiliations$dutch_uni_main &lt;- ifelse(prof_affiliations$freq == prof_affiliations$ideal_share &amp; str_detect(prof_affiliations$inst_id_dutch, &quot;uni&quot;), &quot;yes&quot;, &quot;no&quot;)
  
  # now filter out only the dutch university affiliations
  prof_affiliations_dutch &lt;- prof_affiliations %&gt;%
    filter(dutch_uni_main == &quot;yes&quot;)%&gt;%
    select(years, inst_id_dutch)
  
  if (nrow(prof_affiliations_dutch) &gt; 0){
  
  prof_affiliations_dutch$profile_id &lt;- prof
  prof_affiliations_dutch$institution_id_yearly &lt;- prof_affiliations_dutch$inst_id_dutch
  
  colnames(prof_affiliations_dutch)[2] &lt;- c(&quot;institution_dutch_yearly&quot;)
  }

  # for years without dutch affiliation, get the modal one
  prof_affiliations_nondutch &lt;- institution_yearly_data %&gt;%
    filter(profile_id == prof &amp; !years %in% prof_affiliations_dutch$years)%&gt;%
    group_by(profile_id, years)%&gt;%
    summarise(institution_id_yearly = collapse::fmode(inst_id),
              institution_dutch_yearly = collapse::fmode(dutch_uni_var))
  
  if (nrow(prof_affiliations_dutch) &gt; 0){
    prof_affiliations_dutch &lt;- prof_affiliations_dutch[colnames(prof_affiliations_nondutch)]
  }
  
  if (nrow(prof_affiliations_dutch) &gt; 0 &amp; nrow(prof_affiliations_nondutch) &gt; 0 ){
  
  prof_affliations_yearly_all &lt;- rbind(prof_affiliations_dutch,
                                       prof_affiliations_nondutch)
  }
  if (nrow(prof_affiliations_dutch) &gt; 0 &amp; nrow(prof_affiliations_nondutch) == 0 ){
  
  prof_affliations_yearly_all &lt;- prof_affiliations_dutch
  }
  
  if (nrow(prof_affiliations_dutch) == 0 &amp; nrow(prof_affiliations_nondutch) &gt; 0 ){
  
  prof_affliations_yearly_all &lt;- prof_affiliations_nondutch
  }
  
  
  prof_affliations_yearly_all &lt;- prof_affliations_yearly_all %&gt;% 
    arrange(profile_id, years)%&gt;%
    distinct(years, institution_dutch_yearly, .keep_all = TRUE)
  
  colnames(prof_affliations_yearly_all)[2] &lt;- &quot;year&quot;
  
  prof_affiliations_yearly_dutch &lt;- rbind(prof_affiliations_yearly_dutch,
                                          prof_affliations_yearly_all)
  }
  
  print(which(profile_ids == prof))
}

colnames(prof_affiliations_yearly_dutch)[4] &lt;- &quot;institution_dutch_yearly_strict&quot;</code></pre>
<p>Deduplicate this:</p>
<pre class="r"><code> prof_affiliations_yearly_dutch_dedupe &lt;- prof_affiliations_yearly_dutch %&gt;% 
  distinct(profile_id, year, .keep_all = TRUE)</code></pre>
<p>Merge with the panel:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i &lt;- merge(prof_year_p_c_g_a_l_f,
                                 modal_institution,
                                 by = c(&quot;profile_id&quot;, &quot;year&quot;),
                                 all.x = TRUE)

prof_year_p_c_g_a_l_f_i &lt;- merge(prof_year_p_c_g_a_l_f_i,
                                 modal_institution_2012,
                                 by = c(&quot;profile_id&quot;, &quot;year&quot;),
                                 all.x = TRUE)

prof_year_p_c_g_a_l_f_i &lt;- merge(prof_year_p_c_g_a_l_f_i,
                                 prof_affiliations_yearly_dutch_dedupe[c(&quot;profile_id&quot;, &quot;year&quot;, &quot;institution_dutch_yearly_strict&quot;)],
                                 by = c(&quot;profile_id&quot;, &quot;year&quot;),
                                 all.x = TRUE)</code></pre>
<p>For years where we can’t obtain this information from publication
data, we use the last known institutional affiliation:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i &lt;- prof_year_p_c_g_a_l_f_i %&gt;%
  arrange(profile_id, year)%&gt;%
  group_by(profile_id)%&gt;%
  fill(institution_id_yearly, institution_dutch_yearly, institution_id_yearly_since2012, institution_dutch_yearly_since2012, institution_dutch_yearly_strict, .direction = &quot;down&quot;)</code></pre>
<p>Now get their career-wide affiliations:</p>
<pre class="r"><code>modal_institution_total &lt;- institution_yearly_data %&gt;%
  group_by(profile_id)%&gt;%
  summarise(institution_id_total = collapse::fmode(inst_id),
            institution_dutch_total = collapse::fmode(dutch_uni_var))


modal_institution_total_2012 &lt;- institution_yearly_data %&gt;%
  filter(years &gt;= 2012)%&gt;%
  group_by(profile_id)%&gt;%
  summarise(institution_id_total_since2012 = collapse::fmode(inst_id),
            institution_dutch_total_since2012 = collapse::fmode(dutch_uni_var))</code></pre>
<p>Merge with the panel:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i &lt;- merge(prof_year_p_c_g_a_l_f_i,
                                 modal_institution_total,
                                 by = c(&quot;profile_id&quot;),
                                 all.x = TRUE)

prof_year_p_c_g_a_l_f_i &lt;- merge(prof_year_p_c_g_a_l_f_i,
                                 modal_institution_total_2012,
                                 by = c(&quot;profile_id&quot;),
                                 all.x = TRUE)</code></pre>
<p>OpenAlex info might not always be accurate. Fetch the NARCIS
affiliation information:</p>
<pre class="r"><code>narcis_institution &lt;- dbReadTable(con, &quot;narcis_institution&quot;)

colnames(narcis_institution)[2] &lt;- &quot;institution_dutch_total_narcis&quot;

prof_year_p_c_g_a_l_f_i &lt;- merge(prof_year_p_c_g_a_l_f_i,
                                      narcis_institution,
                                      by = &quot;profile_id&quot;)</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_p_c_g_a_l_f_i, &quot;panel_datasets/prof_year_pubs_citations_grants_alt_lexis_field_institution.csv&quot;)</code></pre>
<p>Remove some redundant objects:</p>
<pre class="r"><code>rm(institution_yearly_data)
gc()</code></pre>
</div>
<div id="first-last-authorship" class="section level1" number="9">
<h1><span class="header-section-number">9</span> First, last
authorship</h1>
<p>Extracting information on professors’ authorship on each paper:</p>
<pre class="r"><code>oa_prof_pubs_authorship &lt;- oa_prof_pubs %&gt;%
  distinct(id, .keep_all = TRUE)%&gt;%
  select(id, publication_year, author_position, type)

# merge with professor data
oa_prof_pubs_authorship &lt;- merge(oa_prof_pubs_authorship,
                                 oa_prof_pub_matching,
                                 all.x = TRUE,
                                 all.y = TRUE,
                                 by = &quot;id&quot;)</code></pre>
<p>Check number of coauthors for each paper:</p>
<pre class="r"><code>coauthor_info_paper &lt;- coauthor_info  %&gt;%
  group_by(id)%&gt;%
  summarise(n = n())</code></pre>
<p>Merge the professor’s authorship info with the total number of
authors for each paper:</p>
<pre class="r"><code>oa_prof_pubs_authorship_coa &lt;- merge(oa_prof_pubs_authorship,
                                     coauthor_info_paper,
                                     by = &quot;id&quot;,
                                     all.x = TRUE)

# determine single authorship
oa_prof_pubs_authorship_coa$author_position &lt;- ifelse(is.na(oa_prof_pubs_authorship_coa$n), 
                                                      &quot;single&quot;,
                                                      oa_prof_pubs_authorship_coa$author_position)

# replace NAs in n with ones
oa_prof_pubs_authorship_coa$n &lt;- ifelse(is.na(oa_prof_pubs_authorship_coa$n),
                                        1, 
                                        oa_prof_pubs_authorship_coa$n)</code></pre>
<p>Get yearly counts for different authorship positions:</p>
<pre class="r"><code>yearly_authorship &lt;- oa_prof_pubs_authorship_coa %&gt;%
    filter(!is.na(publication_year) &amp; publication_year &gt;= 1973 &amp; publication_year &lt;= 2023 &amp; 
           type %in% c(&quot;article&quot;, &quot;book&quot;, &quot;book-chapter&quot;))%&gt;%
  group_by(profile_id, publication_year) %&gt;%
  summarise(n_pubs_first_au = sum(author_position == &quot;first&quot;),
            n_pubs_last_au = sum(author_position == &quot;last&quot;),
            n_pubs_single_au = sum(author_position == &quot;single&quot;),
            n_pubs_all_au = n(),
            n_pubs_total_authorships = sum(n))

colnames(yearly_authorship)[2] &lt;- &quot;year&quot;</code></pre>
<p>Merge with the panel:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i_a &lt;- merge(prof_year_p_c_g_a_l_f_i,
                                 yearly_authorship,
                                 by = c(&quot;profile_id&quot;, &quot;year&quot;),
                                 all.x = TRUE)

# replace with zeroes where appropriate

prof_year_p_c_g_a_l_f_i_a &lt;- prof_year_p_c_g_a_l_f_i_a%&gt;% 
  mutate(n_pubs_first_au  =  ifelse(count_pubs == 0, 0 , n_pubs_first_au),
         n_pubs_last_au  =  ifelse(count_pubs == 0, 0 , n_pubs_last_au),
         n_pubs_single_au  =  ifelse(count_pubs == 0, 0 , n_pubs_single_au),
         n_pubs_all_au  =  ifelse(count_pubs == 0, 0 , n_pubs_all_au),
         n_pubs_total_authorships  =  ifelse(count_pubs == 0, 0 , n_pubs_total_authorships),
  )

# make some new variables

prof_year_p_c_g_a_l_f_i_a$n_pubs_first_last_single_au &lt;- prof_year_p_c_g_a_l_f_i_a$n_pubs_first_au + prof_year_p_c_g_a_l_f_i_a$n_pubs_last_au + prof_year_p_c_g_a_l_f_i_a$n_pubs_single_au

prof_year_p_c_g_a_l_f_i_a$n_pubs_first_single_au &lt;- prof_year_p_c_g_a_l_f_i_a$n_pubs_first_au + prof_year_p_c_g_a_l_f_i_a$n_pubs_single_au

prof_year_p_c_g_a_l_f_i_a$n_pubs_last_single_au &lt;- prof_year_p_c_g_a_l_f_i_a$n_pubs_last_au + prof_year_p_c_g_a_l_f_i_a$n_pubs_single_au</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_p_c_g_a_l_f_i_a, &quot;panel_datasets/prof_year_pubs_citations_grants_alt_lexis_field_institution_authorship.csv&quot;)</code></pre>
</div>
<div id="get-some-remaining-totals" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Get some remaining
totals</h1>
<p>Get totals for some remaining variables</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i_a &lt;- prof_year_p_c_g_a_l_f_i_a %&gt;%
  group_by(profile_id)%&gt;%
  arrange(year)%&gt;%
  mutate(sum_sjr_total = cumsum(replace_na(sum_sjr, 0)),
         sum_hindex_total = cumsum(replace_na(sum_sjr, 0)),
         count_q1_total = cumsum(replace_na(count_q1, 0)),
         count_scimago_indicators_total = cumsum(replace_na(count_scimago_indicators, 0)),
         n_pubs_first_au_total = cumsum(n_pubs_first_au),
         n_pubs_last_au_total = cumsum(n_pubs_last_au),
         n_pubs_single_au_total = cumsum(n_pubs_single_au),
         n_pubs_all_au_total = cumsum(n_pubs_all_au),
         n_pubs_total_authorships_total = cumsum(n_pubs_total_authorships),
         n_pubs_first_last_single_au_total = cumsum(n_pubs_first_last_single_au) 
  )%&gt;%
  arrange(profile_id, year)%&gt;%
  ungroup()%&gt;%
  mutate(sum_sjr_total  =  ifelse(year &lt; 1999, NA , sum_sjr_total),
         sum_hindex_total  =  ifelse(year &lt; 1999, NA , sum_hindex_total),
         count_q1_total  =  ifelse(year &lt; 1999, NA , count_q1_total),
         count_scimago_indicators_total = ifelse(year &lt; 1999, NA, count_scimago_indicators_total))</code></pre>
</div>
<div id="lagged-variables" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Lagged variables</h1>
<p>New data frame for lagging:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i_a_l &lt;- prof_year_p_c_g_a_l_f_i_a
colnames(prof_year_p_c_g_a_l_f_i_a_l)[-c(1:2)] &lt;- paste0(colnames(prof_year_p_c_g_a_l_f_i_a_l)[-c(1:2)], &quot;_l&quot;)</code></pre>
<p>Lag the relevant variables:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i_a_l &lt;- prof_year_p_c_g_a_l_f_i_a_l %&gt;%
  arrange(year) %&gt;%
  group_by(profile_id) %&gt;%
  mutate_at(vars(contains(&#39;_l&#39;)), lag)%&gt;%
  arrange(profile_id, year)</code></pre>
<p>Merge with the non-lagged panel:</p>
<pre class="r"><code>prof_year_p_c_g_a_l_f_i_a_l &lt;- merge(prof_year_p_c_g_a_l_f_i_a,
                                     prof_year_p_c_g_a_l_f_i_a_l,
                                     by = c(&quot;profile_id&quot;, &quot;year&quot;))</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_year_p_c_g_a_l_f_i_a_l, &quot;panel_datasets/prof_year_pubs_citations_grants_alt_lexis_field_institution_authorship_lag.csv&quot;)</code></pre>
</div>
<div id="coauthor-data" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Coauthor data</h1>
<p>Fetch all coauthor data, including full info, their inferred gender,
and citation counts.</p>
<pre class="r"><code>oa_coauthor_info &lt;- dbReadTable(con, &quot;oa_coauthor_info&quot;)
oa_coauthor_info_name &lt;- dbReadTable(con, &quot;oa_coauthor_name_list&quot;)
coauthor_gender &lt;- dbReadTable(con, &quot;coauthor_name_gender&quot;)
# add professor gender names, as these are specific for the 
# Dutch context and might help further
prof_gender_names &lt;- dbReadTable(con, &quot;gender_table&quot;)%&gt;%
  distinct(first, .keep_all = TRUE)%&gt;%
  select(first, inferred_gender)
oa_coauthor_info_full &lt;- dbReadTable(con, &quot;oa_coauthor_info_full&quot;)</code></pre>
<p>Match name gender inference with coauthor names:</p>
<pre class="r"><code>colnames(coauthor_gender)[2] &lt;- &quot;first&quot;
coauthor_gender &lt;- coauthor_gender %&gt;%
  filter(first != &quot;&quot;)%&gt;%
  select(first, gender)

# recode the variable
coauthor_gender$gender &lt;- ifelse(coauthor_gender$gender == &quot;male&quot;, &quot;m&quot;,
                                 ifelse(coauthor_gender$gender == &quot;female&quot;, &quot;w&quot;, coauthor_gender$gender))

colnames(prof_gender_names)[2] &lt;- &quot;gender&quot;

# combine
all_names &lt;- rbind(coauthor_gender,
                   prof_gender_names)%&gt;%
  distinct(first, .keep_all = TRUE)


# filter out &quot;and&quot; which seems to just be a mistake
oa_coauthor_info_name &lt;- oa_coauthor_info_name %&gt;%
  filter(! tolower(first) %in% c(&quot;van&quot;, &quot;and&quot;, &quot;den&quot;))

oa_coauthor_info_name$first &lt;- tolower(oa_coauthor_info_name$first)

coauthor_name_gender &lt;- merge(oa_coauthor_info_name,
                              all_names,
                              by = &quot;first&quot;,
                              all.x = TRUE,
                              all.y = FALSE)

coauthor_name_gender &lt;- coauthor_name_gender %&gt;%
  select(id, gender)%&gt;%
  filter(!is.na(gender))</code></pre>
<p>Remove redundant items:</p>
<pre class="r"><code>#rm(oa_coauthor_info)
gc()</code></pre>
<p>For each coauthor, get their cumulative citation counts:</p>
<pre class="r"><code>coauthor_pubs_cits_cumulative &lt;- oa_coauthor_info_full %&gt;%
  select(id:display_name, works_count:counts_by_year_cited_by_count)%&gt;%
  group_by(id)%&gt;%
  arrange(counts_by_year_year)%&gt;%
  mutate(counts_by_year_works_count_total = cumsum(counts_by_year_works_count),
         counts_by_year_cited_by_count_total = cumsum(counts_by_year_cited_by_count)) %&gt;%
  arrange(id, counts_by_year_year)

# rename some columns
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;counts_by_year_year&quot;)] &lt;- &quot;year&quot;
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;counts_by_year_works_count&quot;)] &lt;- &quot;count_pubs&quot;
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;works_count&quot;)] &lt;- &quot;count_pubs_total&quot;
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;counts_by_year_works_count_total&quot;)] &lt;- &quot;count_pubs_total_oa&quot;
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;counts_by_year_cited_by_count&quot;)] &lt;- &quot;cited_by&quot;
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;cited_by_count&quot;)] &lt;- &quot;cited_by_total&quot;
colnames(coauthor_pubs_cits_cumulative)[which(colnames(coauthor_pubs_cits_cumulative)==&quot;counts_by_year_cited_by_count_total&quot;)] &lt;- &quot;cited_by_total_oa&quot;

# citations prior to 2012
latest_citation_coauthor &lt;- coauthor_pubs_cits_cumulative %&gt;%
  group_by(id)%&gt;%
  slice(which.max(year))

latest_citation_coauthor$cited_by_before_2012 &lt;- latest_citation_coauthor$cited_by_total - latest_citation_coauthor$cited_by_total_oa
latest_citation_coauthor$count_pubs_before_2012 &lt;- latest_citation_coauthor$count_pubs_total - latest_citation_coauthor$count_pubs_total_oa

# replace by 0 if negative (OA issue ticket opened)
latest_citation_coauthor$cited_by_before_2012 &lt;- ifelse(latest_citation_coauthor$cited_by_before_2012&lt;0,
                                                        0,
                                                        latest_citation_coauthor$cited_by_before_2012)

latest_citation_coauthor$count_pubs_before_2012 &lt;- ifelse(latest_citation_coauthor$count_pubs_before_2012&lt;0,
                                                        0,
                                                        latest_citation_coauthor$count_pubs_before_2012)

# merge with the rest
coauthor_pubs_cits_cumulative &lt;- merge(coauthor_pubs_cits_cumulative,
                         latest_citation_coauthor[c(&quot;id&quot;, &quot;cited_by_before_2012&quot;, &quot;count_pubs_before_2012&quot;)],
                         by = &quot;id&quot;,
                         all.x = TRUE)

coauthor_pubs_cits_cumulative$cited_by_total_all &lt;- coauthor_pubs_cits_cumulative$cited_by_before_2012 + coauthor_pubs_cits_cumulative$cited_by_total_oa
coauthor_pubs_cits_cumulative$count_pubs_total_all &lt;- coauthor_pubs_cits_cumulative$count_pubs_before_2012 + coauthor_pubs_cits_cumulative$count_pubs_total_oa

coauthor_year_p_c &lt;- coauthor_pubs_cits_cumulative %&gt;%
  arrange(id, year)%&gt;%
  select(-display_name, -count_pubs_total, -cited_by_total)</code></pre>
<p>Get their attention:</p>
<pre class="r"><code>coauthor_attention &lt;- dbReadTable(con, &quot;altmetric_coauthor_attention&quot;)

selected_attention &lt;- coauthor_attention %&gt;%
  filter(., mention_type %in% c(&quot;msm&quot;, &quot;blog&quot;, &quot;tweet&quot;))</code></pre>
<p>Cumulatives:</p>
<pre class="r"><code>coauthor_attention_table &lt;- selected_attention %&gt;%
  pivot_wider(names_from = mention_type, values_from = yearly_count, values_fill = 0)

coauthor_attention_table &lt;- coauthor_attention_table %&gt;%
  group_by(id)%&gt;%
  arrange(year)%&gt;%
  mutate(msm_total = cumsum(msm),
         blog_total = cumsum(blog),
         tweet_total = cumsum(tweet)) %&gt;%
  arrange(id, year)

# rename some columns
colnames(coauthor_attention_table)[which(colnames(coauthor_attention_table)==&quot;msm&quot;)] &lt;- &quot;coa_attn_news_by&quot;
colnames(coauthor_attention_table)[which(colnames(coauthor_attention_table)==&quot;msm_total&quot;)] &lt;- &quot;coa_attn_news_by_total&quot;
colnames(coauthor_attention_table)[which(colnames(coauthor_attention_table)==&quot;blog&quot;)] &lt;- &quot;coa_attn_blog_by&quot;
colnames(coauthor_attention_table)[which(colnames(coauthor_attention_table)==&quot;blog_total&quot;)] &lt;- &quot;coa_attn_blog_by_total&quot;
colnames(coauthor_attention_table)[which(colnames(coauthor_attention_table)==&quot;tweet&quot;)] &lt;- &quot;coa_attn_twitter_by&quot;
colnames(coauthor_attention_table)[which(colnames(coauthor_attention_table)==&quot;tweet_total&quot;)] &lt;- &quot;coa_attn_twitter_by_total&quot;</code></pre>
<p>Combine citations and attention. Set mentions to 0 if we have
coauthors’ ORCID and there are no mentions; if we don’t have their
ORCID, set mentions to NA:</p>
<pre class="r"><code>coauthor_year_p_c_a &lt;- merge(coauthor_year_p_c,
                             coauthor_attention_table,
                             by = c(&quot;id&quot;, &quot;year&quot;),
                             all.x = TRUE)

coauthor_orcids &lt;- oa_coauthor_info_full %&gt;%
  distinct(id, .keep_all = TRUE)%&gt;%
  select(id, orcid)


coauthor_year_p_c_a &lt;- merge(coauthor_year_p_c_a,
                             coauthor_orcids,
                             all.x = TRUE,
                             by = &quot;id&quot;)

# fill the attention by profile ID
coauthor_year_p_c_a2 &lt;- coauthor_year_p_c_a %&gt;%
  group_by(id)%&gt;%
  fill(coa_attn_news_by_total, coa_attn_blog_by_total, coa_attn_twitter_by_total)

coauthor_year_p_c_a2$coa_attn_news_by &lt;- ifelse((is.na(coauthor_year_p_c_a2$coa_attn_news_by) &amp; !is.na(coauthor_year_p_c_a2$orcid)),
                                               0,
                                               coauthor_year_p_c_a2$coa_attn_news_by)
coauthor_year_p_c_a2$coa_attn_news_by_total &lt;- ifelse((is.na(coauthor_year_p_c_a2$coa_attn_news_by_total) &amp; !is.na(coauthor_year_p_c_a2$orcid)),
                                               0,
                                               coauthor_year_p_c_a2$coa_attn_news_by_total)

coauthor_year_p_c_a2$coa_attn_blog_by &lt;- ifelse((is.na(coauthor_year_p_c_a2$coa_attn_blog_by) &amp; !is.na(coauthor_year_p_c_a2$orcid)),
                                               0,
                                               coauthor_year_p_c_a2$coa_attn_blog_by)
coauthor_year_p_c_a2$coa_attn_blog_by_total &lt;- ifelse((is.na(coauthor_year_p_c_a2$coa_attn_blog_by_total) &amp; !is.na(coauthor_year_p_c_a2$orcid)),
                                               0,
                                               coauthor_year_p_c_a2$coa_attn_blog_by_total)

coauthor_year_p_c_a2$coa_attn_twitter_by &lt;- ifelse((is.na(coauthor_year_p_c_a2$coa_attn_twitter_by) &amp; !is.na(coauthor_year_p_c_a2$orcid)),
                                               0,
                                               coauthor_year_p_c_a2$coa_attn_twitter_by)
coauthor_year_p_c_a2$coa_attn_twitter_by_total &lt;- ifelse((is.na(coauthor_year_p_c_a2$coa_attn_twitter_by_total) &amp; !is.na(coauthor_year_p_c_a2$orcid)),
                                               0,
                                               coauthor_year_p_c_a2$coa_attn_twitter_by_total)</code></pre>
<p>Append gender:</p>
<pre class="r"><code>colnames(coauthor_name_gender)[1] &lt;- &quot;id&quot;

coauthor_year_p_c_a_g &lt;- merge(coauthor_year_p_c_a2,
                               coauthor_name_gender,
                               by = &quot;id&quot;,
                               all.x = TRUE)

coauthor_year_p_c_a_g &lt;- coauthor_year_p_c_a_g%&gt;%
  arrange(id, year)

write_csv(coauthor_year_p_c_a_g, &quot;panel_datasets/coauthor_year_panel_26_7.csv&quot;)</code></pre>
<p>Filter out coauthor observations without year:</p>
<pre class="r"><code>coauthor_year_p_c_a_g$dupl &lt;- duplicated(coauthor_year_p_c_a_g[c(&quot;profile_id&quot;, &quot;year&quot;)])

coauthor_year_p_c_a_g &lt;- filter(coauthor_year_p_c_a_g, 
                                !is.na(year))%&gt;%
  select(-dupl)</code></pre>
<p>Marge coauthors with inferred gender:</p>
<pre class="r"><code>colnames(coauthor_name_gender) &lt;- c(&quot;au_id&quot;, &quot;inferred_gender&quot;)
oa_coauthor_info_gender &lt;- merge(oa_coauthor_info,
                                 coauthor_name_gender,
                                 all.x = TRUE,
                                 by = &quot;au_id&quot;)

oa_coauthor_info_gender$inferred_gender &lt;- ifelse(is.na(oa_coauthor_info_gender$inferred_gender),
                                                  &quot;unknown&quot;,
                                                  oa_coauthor_info_gender$inferred_gender)</code></pre>
<p>Clean the memory a bit:</p>
<pre class="r"><code>rm(oa_coauthor_info)
rm(coauthor_name_gender)
rm(coauthor_gender)
rm(all_names)
gc()</code></pre>
<p>For each author, match their coauthors from that year:</p>
<pre class="r"><code>oa_coauthor_matching &lt;- dbReadTable(con, &quot;oa_coauthor_matching&quot;)
oa_coauthor_matching &lt;- oa_coauthor_matching[c(&quot;id&quot;, &quot;au_id&quot;, &quot;profile_id&quot;, &quot;publication_year&quot;)]

profile_ids &lt;- unique(prof_year_p_c_g_a_l_f_i_a_l$profile_id)</code></pre>
<p>Now, compile coauthor data for each professor:</p>
<pre class="r"><code>prof_panel_combined &lt;- as.data.frame(matrix(NA, nrow = 0, ncol = 118))

for (i in 1:length(profile_ids)){
  prof_output &lt;- NA
  try(
    prof_output &lt;- coauthor_data_compiler(profile_id = profile_ids[i],
                                          prof_panel = prof_year_p_c_g_a_l_f_i_a_l,
                                          prof_coauthor_matching = oa_coauthor_matching,
                                          prof_coauthor_panel = coauthor_year_p_c_a_g,
                                          prof_coauthor_info_w_gender = oa_coauthor_info_gender))

 
  if (!all(is.na(prof_output))){
    
    prof_panel_combined &lt;- rbind.data.frame(prof_panel_combined,
                                            prof_output)
  }
  print(paste(&quot;done with &quot;, i , &quot; out of&quot;, length(profile_ids)))
}</code></pre>
<p>Write this:</p>
<pre class="r"><code>write_csv(prof_panel_combined, &quot;panel_datasets/prof_year_pubs_citations_grants_alt_lexis_field_lag_coauthors.csv&quot;)</code></pre>
</div>
<div id="tidying-up" class="section level1" number="13">
<h1><span class="header-section-number">13</span> Tidying up</h1>
<p>Tidy up the panel dataset:</p>
<pre class="r"><code># recode the fields
prof_panel_combined &lt;- prof_panel_combined %&gt;% 
  mutate(general_field = case_match(
    overall_field,
    &quot;Arts and Humanities&quot;  ~ &quot;Arts and Humanities&quot;,
    c(&quot;Biochemistry, Genetics and Molecular Biology&quot;,&quot;Agricultural and Biological Sciences&quot;,
      &quot;Chemical Engineering&quot;, &quot;Chemistry&quot;,  &quot;Computer Science&quot;, &quot;Decision Sciences&quot;,
      &quot;Earth and Planetary Sciences&quot;, &quot;Energy&quot;, &quot;Engineering&quot;, &quot;Environmental Science&quot;,
      &quot;Immunology and Microbiology&quot;, &quot;Materials Science&quot;, &quot;Mathematics&quot;, &quot;Neuroscience&quot;, 
      &quot;Physics and Astronomy&quot; ) ~ &quot;STEM&quot;,
    c(&quot;Dentistry&quot;, &quot;Health Professions&quot;, &quot;Medicine&quot;) ~ &quot;Medicine&quot;,
    c(&quot;Business, Management and Accounting&quot;, &quot;Economics, Econometrics and Finance&quot;,
      &quot;Psychology&quot;, &quot;Social Sciences&quot;) ~ &quot;Social sciences&quot;))

prof_panel_combined &lt;- prof_panel_combined %&gt;% 
  mutate(general_field_yearly = case_match(
    yearly_field,
    &quot;Arts and Humanities&quot;  ~ &quot;Arts and Humanities&quot;,
    c(&quot;Biochemistry, Genetics and Molecular Biology&quot;,&quot;Agricultural and Biological Sciences&quot;,
      &quot;Chemical Engineering&quot;, &quot;Chemistry&quot;,  &quot;Computer Science&quot;, &quot;Decision Sciences&quot;,
      &quot;Earth and Planetary Sciences&quot;, &quot;Energy&quot;, &quot;Engineering&quot;, &quot;Environmental Science&quot;,
      &quot;Immunology and Microbiology&quot;, &quot;Materials Science&quot;, &quot;Mathematics&quot;, &quot;Neuroscience&quot;, 
      &quot;Physics and Astronomy&quot; ) ~ &quot;STEM&quot;,
    c(&quot;Dentistry&quot;, &quot;Health Professions&quot;, &quot;Medicine&quot;) ~ &quot;Medicine&quot;,
    c(&quot;Business, Management and Accounting&quot;, &quot;Economics, Econometrics and Finance&quot;,
      &quot;Psychology&quot;, &quot;Social Sciences&quot;) ~ &quot;Social sciences&quot;))</code></pre>
<p>Rename the columns neatly:</p>
<pre class="r"><code>prof_panel_tidy &lt;- prof_panel_combined %&gt;%
  select(-c(cited_by_before_2012, cited_by_total_oa, cited_by_total_oa_l, 
           coa_cited_by_before_2012, coa_count_pubs_before_2012, coa_cited_by_before_2012_l,
           coa_count_pubs_before_2012, prof_tot_count_pubs_total_oa, prof_tot_count_pubs_total_oa_l, 
           prof_tot_cited_by_total_oa, prof_tot_cited_by_total_oa_l,
           prof_tot_cited_by_before_2012,prof_tot_cited_by_before_2012_l,
           prof_tot_count_pubs_before_2012, prof_tot_count_pubs_before_2012_l ))%&gt;%
  rename(
    grant_veni = veni,
    grant_veni_l = veni_l,
    grant_vidi = vidi,
    grant_vidi_l = vidi_l,    
    grant_vici = vici,
    grant_vici_l = vici_l,
    grant_stevin = stevin,
    grant_stevin_l = stevin_l,
    grant_spinoza = spinoza,
    grant_spinoza_l = spinoza_l,
    grant_starting = starting,
    grant_starting_l = starting_l,
    grant_advanced = advanced,
    grant_advanced_l = advanced_l,
    grant_consolidator = consolidator,
    grant_consolidator_l = consolidator_l,
    grant_synergy = synergy,
    grant_synergy_l = synergy_l,
    coa_online_news = coa_attn_news_by,
    coa_blogs = coa_attn_blog_by,
    coa_twitter = coa_attn_twitter_by,
    coa_online_news_total = coa_attn_news_by_total,
    coa_blogs_total = coa_attn_blog_by_total,
    coa_twitter_total = coa_attn_twitter_by_total,
    coa_online_news_l = coa_attn_news_by_l,
    coa_blogs_l = coa_attn_blog_by_l,
    coa_twitter_l = coa_attn_twitter_by_l,
    coa_online_news_total_l = coa_attn_news_by_total_l,
    coa_blogs_total_l = coa_attn_blog_by_total_l,
    coa_twitter_total_l = coa_attn_twitter_by_total_l,
    coa_tot_count_pubs = prof_tot_count_pubs, 
    coa_tot_cited_by = prof_tot_cited_by,
    coa_tot_count_pubs_total = prof_tot_count_pubs_total_all,
    coa_tot_cited_by_total = prof_tot_cited_by_total_all,
    coa_tot_online_news = prof_tot_coa_attn_news_by,
    coa_tot_blogs = prof_tot_coa_attn_blog_by,
    coa_tot_twitter = prof_tot_coa_attn_twitter_by,
    coa_tot_online_news_total = prof_tot_coa_attn_news_by_total,
    coa_tot_blogs_total = prof_tot_coa_attn_blog_by_total,
    coa_tot_twitter_total = prof_tot_coa_attn_twitter_by_total,
    coa_tot_unique_m = prof_tot_unique_coa_m,
    coa_tot_unique_w = prof_tot_unique_coa_w,
    coa_tot_unique_u = prof_tot_unique_coa_u,
    coa_tot_count_pubs_l = prof_tot_count_pubs_l, 
    coa_tot_cited_by_l = prof_tot_cited_by_l,
    coa_tot_count_pubs_total_l = prof_tot_count_pubs_total_all_l,
    coa_tot_cited_by_total_l = prof_tot_cited_by_total_all_l,
    coa_tot_online_news_l = prof_tot_coa_attn_news_by_l,
    coa_tot_blogs_l = prof_tot_coa_attn_blog_by_l,
    coa_tot_twitter_l = prof_tot_coa_attn_twitter_by_l,
    coa_tot_online_news_total_l = prof_tot_coa_attn_news_by_total_l,
    coa_tot_blogs_total_l = prof_tot_coa_attn_blog_by_total_l,
    coa_tot_twitter_total_l = prof_tot_coa_attn_twitter_by_total_l,
    coa_tot_unique_m_l = prof_tot_unique_coa_m_l,
    coa_tot_unique_w_l = prof_tot_unique_coa_w_l,
    coa_tot_unique_u_l = prof_tot_unique_coa_u_l)</code></pre>
<p>Select relevant columns and tidy everything up:</p>
<pre class="r"><code>prof_panel_tidy &lt;- prof_panel_tidy %&gt;%
  # but not 2024
  filter(year &lt;= 2023 &amp; year &gt;= 2012 &amp; !is.na(year))

# coauthors this year
prof_panel_tidy$coa_online_news &lt;- prof_panel_tidy$coa_online_news + prof_panel_tidy$coa_blogs
prof_panel_tidy$coa_online_news_l &lt;- prof_panel_tidy$coa_online_news_l + prof_panel_tidy$coa_blogs_l
prof_panel_tidy$coa_online_news_total &lt;- prof_panel_tidy$coa_online_news_total + prof_panel_tidy$coa_blogs_total
prof_panel_tidy$coa_online_news_total_l &lt;- prof_panel_tidy$coa_online_news_total_l + prof_panel_tidy$coa_blogs_total_l

# all coauthors up until now
prof_panel_tidy$coa_tot_online_news &lt;- prof_panel_tidy$coa_tot_online_news + prof_panel_tidy$coa_tot_blogs
prof_panel_tidy$coa_tot_online_news_l &lt;- prof_panel_tidy$coa_tot_online_news_l + prof_panel_tidy$coa_tot_blogs_l
prof_panel_tidy$coa_tot_online_news_total &lt;- prof_panel_tidy$coa_tot_online_news_total + prof_panel_tidy$coa_tot_blogs_total
prof_panel_tidy$coa_tot_online_news_total_l &lt;- prof_panel_tidy$coa_tot_online_news_total_l + prof_panel_tidy$coa_tot_blogs_total_l

# get groups per years since entry
prof_panel_tidy$entry_batch &lt;- cut(prof_panel_tidy$years_since_first_pub, breaks = seq(0, 50, by=10))
prof_panel_tidy$years_since_entry &lt;- paste(&quot;up to&quot;, str_remove(str_split_i(as.character(prof_panel_tidy$entry_batch), &quot;,&quot;, 2),&quot;]&quot;))</code></pre>
<p>Add the non-time variable entry batch given the 2023 cutoff:</p>
<pre class="r"><code>prof_panel_tidy$years_since_entry_2023 &lt;- 2023 - prof_panel_tidy$first_pub

prof_panel_tidy$entry_batch_2023 &lt;- ifelse(prof_panel_tidy$years_since_entry_2023 &lt;= 10,
                                     &quot;up to 10&quot;,
                                     ifelse(prof_panel_tidy$years_since_entry_2023 &lt;= 20,
                                            &quot;up to 20&quot;,
                                            ifelse(prof_panel_tidy$years_since_entry_2023 &lt;= 30,
                                                   &quot;up to 30&quot;,
                                                   ifelse(prof_panel_tidy$years_since_entry_2023 &lt;= 40,
                                                          &quot;up to 40&quot;,
                                                          ifelse(prof_panel_tidy$years_since_entry_2023 &lt;= 50,
                                                                 &quot;up to 50&quot;, NA)))))</code></pre>
<p>Scopus fields as per <a
href="https://service.elsevier.com/app/answers/detail/a_id/12007/supporthub/scopus/"
class="uri">https://service.elsevier.com/app/answers/detail/a_id/12007/supporthub/scopus/</a>:</p>
<pre class="r"><code>prof_panel_tidy &lt;- prof_panel_tidy %&gt;% 
  mutate(scopus_field_overall = case_match(
    overall_field,
    &quot;Arts and Humanities&quot;  ~ &quot;Arts and Humanities&quot;,
    c(&quot;Chemical Engineering&quot;, &quot;Chemistry&quot;, &quot;Computer Science&quot;, &quot;Earth and Planetary Sciences&quot;,
    &quot;Energy&quot;, &quot;Engineering&quot;, &quot;Environmental Science&quot;, &quot;Materials Science&quot;, &quot;Mathematics&quot;, 
    &quot;Physics and Astronomy&quot;) ~ &quot;Physical Sciences&quot;,
    c(&quot;Medicine&quot;, &quot;Nursing&quot;, &quot;Veterinary&quot;, &quot;Dentistry&quot;, &quot;Health Professions&quot;) ~ 
      &quot;Health Sciences&quot;,
    c(&quot;Business, Management and Accounting&quot;, &quot;Decision Sciences&quot;, 
      &quot;Economics, Econometrics and Finance&quot;, &quot;Psychology&quot;, 
      &quot;Social Sciences&quot;) ~ &quot;Social Sciences&quot;,
    c(&quot;Agricultural and Biological Sciences&quot;, &quot;Biochemistry, Genetics and Molecular Biology&quot;,
      &quot;Immunology and Microbiology&quot;, &quot;Neuroscience&quot;, 
      &quot;Pharmacology, Toxicology and Pharmaceutics&quot;) ~ &quot;Life Sciences&quot;))</code></pre>
<p>Write this out:</p>
<pre class="r"><code>write_csv(prof_panel_tidy, &quot;panel_datasets/prof_panel_tidy.csv&quot;)</code></pre>
<p>Tidy up some columns, drop professors without general fields:</p>
<pre class="r"><code>prof_panel_filter &lt;- filter(prof_panel_tidy,
                            year &lt; 2024 &amp; !is.na(general_field))

prof_panel_filter$coa_online_all_total &lt;- prof_panel_filter$coa_online_news_total + prof_panel_filter$coa_blogs_total
prof_panel_filter$coa_online_all_total_l &lt;- prof_panel_filter$coa_online_news_total_l + prof_panel_filter$coa_blogs_total_l
prof_panel_filter$coa_online_all &lt;- prof_panel_filter$coa_online_news + prof_panel_filter$coa_blogs
prof_panel_filter$coa_online_all_l &lt;- prof_panel_filter$coa_online_news_l + prof_panel_filter$coa_blogs_l

prof_panel_filter$coa_tot_online_all_total &lt;- prof_panel_filter$coa_tot_online_news_total + prof_panel_filter$coa_tot_blogs_total
prof_panel_filter$coa_tot_online_all_total_l &lt;- prof_panel_filter$coa_tot_online_news_total_l + prof_panel_filter$coa_tot_blogs_total_l
prof_panel_filter$coa_tot_online_all &lt;- prof_panel_filter$coa_tot_online_news + prof_panel_filter$coa_tot_blogs
prof_panel_filter$coa_tot_online_all_l &lt;- prof_panel_filter$coa_tot_online_news + prof_panel_filter$coa_tot_blogs_l

prof_panel_filter$coa_online_all &lt;- prof_panel_filter$coa_online_news + prof_panel_filter$coa_blogs</code></pre>
<p>Obtain binary variables for any attention received that year:</p>
<pre class="r"><code>prof_panel_filter$any_news &lt;- as.factor(ifelse(prof_panel_filter$news_all &gt; 0, 1, 0))
prof_panel_filter$any_news_l &lt;- as.factor(ifelse(prof_panel_filter$news_all_l &gt; 0, 1, 0))

prof_panel_filter$any_online_news &lt;- as.factor(ifelse(prof_panel_filter$alt_online_all &gt; 0, 1, 0))
prof_panel_filter$any_online_news_l &lt;- as.factor(ifelse(prof_panel_filter$alt_online_all_l &gt; 0, 1, 0))

prof_panel_filter$any_online_news_gen &lt;- as.factor(ifelse(prof_panel_filter$alt_online_general_all &gt; 0, 1, 0))
prof_panel_filter$any_online_news_gen_l &lt;- as.factor(ifelse(prof_panel_filter$alt_online_general_all_l &gt; 0, 1, 0))

prof_panel_filter$any_online_news_name &lt;- as.factor(ifelse(prof_panel_filter$alt_online_all &gt; 0, 1, 0))
prof_panel_filter$any_online_news_l &lt;- as.factor(ifelse(prof_panel_filter$alt_online_all_l &gt; 0, 1, 0))

prof_panel_filter$any_twitter &lt;- as.factor(ifelse(prof_panel_filter$alt_twitter &gt; 0, 1, 0))
prof_panel_filter$any_twitter_l &lt;- as.factor(ifelse(prof_panel_filter$alt_twitter_l &gt; 0, 1, 0))

prof_panel_filter$any_grant &lt;- as.factor(ifelse(prof_panel_filter$any_nwo &gt; 0|prof_panel_filter$any_erc, 1, 0))
prof_panel_filter$any_grant_l &lt;- as.factor(ifelse(prof_panel_filter$any_nwo_l &gt; 0|prof_panel_filter$any_erc_l, 1, 0))</code></pre>
<p>Now get some more printed news variables:</p>
<pre class="r"><code># only online resources
prof_panel_filter$news_online_all &lt;- prof_panel_filter$news_all - prof_panel_filter$news_off_all
prof_panel_filter$news_online_all_l &lt;- prof_panel_filter$news_all_l - prof_panel_filter$news_off_all_l

# only resources without institutional mentions
prof_panel_filter$news_no_inst_all &lt;- prof_panel_filter$news_all - prof_panel_filter$news_inst_all
prof_panel_filter$news_no_inst_all_l &lt;- prof_panel_filter$news_all_l - prof_panel_filter$news_inst_all_l

prof_panel_filter$news_intl_other_sources &lt;- prof_panel_filter$news_local_intl + prof_panel_filter$news_intl_other + 
  prof_panel_filter$news_finance + prof_panel_filter$news_professional + prof_panel_filter$news_science + prof_panel_filter$news_blog +
  prof_panel_filter$news_aggr + prof_panel_filter$news_unknown + prof_panel_filter$news_other 

prof_panel_filter$news_intl_other_sources_l &lt;- prof_panel_filter$news_local_intl_l + prof_panel_filter$news_intl_other_l + 
  prof_panel_filter$news_finance_l + prof_panel_filter$news_professional_l + prof_panel_filter$news_science_l + prof_panel_filter$news_blog_l +
  prof_panel_filter$news_aggr_l + prof_panel_filter$news_unknown_l + prof_panel_filter$news_other_l



# only online resources
prof_panel_filter$news_online_all_total &lt;- prof_panel_filter$news_all_total - prof_panel_filter$news_off_all_total
prof_panel_filter$news_online_all_total_l &lt;- prof_panel_filter$news_all_total_l - prof_panel_filter$news_off_all_total_l

# only resources without institutional mentions
prof_panel_filter$news_no_inst_all_total &lt;- prof_panel_filter$news_all_total - prof_panel_filter$news_inst_all_total
prof_panel_filter$news_no_inst_all_total_l &lt;- prof_panel_filter$news_all_total_l - prof_panel_filter$news_inst_all_total_l

prof_panel_filter$news_intl_other_sources_total &lt;- prof_panel_filter$news_local_intl_total + prof_panel_filter$news_intl_other_total + 
  prof_panel_filter$news_finance_total + prof_panel_filter$news_professional_total + prof_panel_filter$news_science_total +
  prof_panel_filter$news_blog_total + prof_panel_filter$news_aggr_total + prof_panel_filter$news_unknown_total + prof_panel_filter$news_other_total

prof_panel_filter$news_intl_other_sources_total_l &lt;- prof_panel_filter$news_local_intl_total_l + prof_panel_filter$news_intl_other_total_l + 
  prof_panel_filter$news_finance_total_l + prof_panel_filter$news_professional_total_l + prof_panel_filter$news_science_total_l +
  prof_panel_filter$news_blog_total_l + prof_panel_filter$news_aggr_total_l + prof_panel_filter$news_unknown_total_l + prof_panel_filter$news_other_total_l</code></pre>
<p>And some more online news variables:</p>
<pre class="r"><code>prof_panel_filter$alt_general_interest_combi_news &lt;- prof_panel_filter$alt_general_interest_news + prof_panel_filter$alt_general_interest_local_news
prof_panel_filter$alt_general_interest_combi_news_l &lt;- prof_panel_filter$alt_general_interest_news_l + prof_panel_filter$alt_general_interest_local_news_l

prof_panel_filter$alt_science_combi_news &lt;- prof_panel_filter$alt_popsci_news + prof_panel_filter$alt_science_news +  prof_panel_filter$alt_medical_news + prof_panel_filter$alt_sci_news_aggregator

prof_panel_filter$alt_science_combi_news_l &lt;- prof_panel_filter$alt_popsci_news_l + prof_panel_filter$alt_science_news_l +  prof_panel_filter$alt_medical_news_l + prof_panel_filter$alt_sci_news_aggregator_l


prof_panel_filter$alt_other_combi_news &lt;- prof_panel_filter$alt_finance_news + prof_panel_filter$alt_online_blog +  prof_panel_filter$alt_news_aggregator + prof_panel_filter$alt_other_news

prof_panel_filter$alt_other_combi_news_l &lt;- prof_panel_filter$alt_finance_news_l + prof_panel_filter$alt_online_blog_l +  prof_panel_filter$alt_news_aggregator_l + prof_panel_filter$alt_other_news_l


prof_panel_filter$alt_general_interest_combi_news_total &lt;- prof_panel_filter$alt_general_interest_news_total + prof_panel_filter$alt_general_interest_local_news_total
prof_panel_filter$alt_general_interest_combi_news_total_l &lt;- prof_panel_filter$alt_general_interest_news_total_l + prof_panel_filter$alt_general_interest_local_news_total_l

prof_panel_filter$alt_science_combi_news_total &lt;- prof_panel_filter$alt_popsci_news_total + prof_panel_filter$alt_science_news_total +  prof_panel_filter$alt_medical_news_total + prof_panel_filter$alt_sci_news_aggregator_total

prof_panel_filter$alt_science_combi_news_total_l &lt;- prof_panel_filter$alt_popsci_news_total_l + prof_panel_filter$alt_science_news_total_l +  prof_panel_filter$alt_medical_news_total_l + prof_panel_filter$alt_sci_news_aggregator_total_l


prof_panel_filter$alt_other_combi_news_total &lt;- prof_panel_filter$alt_finance_news_total + prof_panel_filter$alt_online_blog_total +  prof_panel_filter$alt_news_aggregator_total + prof_panel_filter$alt_other_news_total

prof_panel_filter$alt_other_combi_news_total_l &lt;- prof_panel_filter$alt_finance_news_total_l + prof_panel_filter$alt_online_blog_total_l +  prof_panel_filter$alt_news_aggregator_total_l + prof_panel_filter$alt_other_news_total_l

# with name

prof_panel_filter$alt_fname_general_interest_combi_news &lt;- prof_panel_filter$alt_fname_general_interest_news + prof_panel_filter$alt_fname_general_interest_local_news
prof_panel_filter$alt_fname_general_interest_combi_news_l &lt;- prof_panel_filter$alt_fname_general_interest_news_l + prof_panel_filter$alt_fname_general_interest_local_news_l

prof_panel_filter$alt_fname_science_combi_news &lt;- prof_panel_filter$alt_fname_popsci_news + prof_panel_filter$alt_fname_science_news +  prof_panel_filter$alt_fname_medical_news + prof_panel_filter$alt_fname_sci_news_aggregator

prof_panel_filter$alt_fname_science_combi_news_l &lt;- prof_panel_filter$alt_fname_popsci_news_l + prof_panel_filter$alt_fname_science_news_l +  prof_panel_filter$alt_fname_medical_news_l + prof_panel_filter$alt_fname_sci_news_aggregator_l


prof_panel_filter$alt_fname_other_combi_news &lt;- prof_panel_filter$alt_fname_finance_news + prof_panel_filter$alt_fname_online_blog +  prof_panel_filter$alt_fname_news_aggregator + prof_panel_filter$alt_fname_other_news

prof_panel_filter$alt_fname_other_combi_news_l &lt;- prof_panel_filter$alt_fname_finance_news_l + prof_panel_filter$alt_fname_online_blog_l +  prof_panel_filter$alt_fname_news_aggregator_l + prof_panel_filter$alt_fname_other_news_l



prof_panel_filter$alt_fname_general_interest_combi_news_total &lt;- prof_panel_filter$alt_fname_general_interest_news_total + prof_panel_filter$alt_fname_general_interest_local_news_total
prof_panel_filter$alt_fname_general_interest_combi_news_total_l &lt;- prof_panel_filter$alt_fname_general_interest_news_total_l + prof_panel_filter$alt_fname_general_interest_local_news_total_l

prof_panel_filter$alt_fname_science_combi_news_total &lt;- prof_panel_filter$alt_fname_popsci_news_total + prof_panel_filter$alt_fname_science_news_total +  prof_panel_filter$alt_fname_medical_news_total + prof_panel_filter$alt_fname_sci_news_aggregator_total

prof_panel_filter$alt_fname_science_combi_news_total_l &lt;- prof_panel_filter$alt_fname_popsci_news_total_l + prof_panel_filter$alt_fname_science_news_total_l +  prof_panel_filter$alt_fname_medical_news_total_l + prof_panel_filter$alt_fname_sci_news_aggregator_total_l


prof_panel_filter$alt_fname_other_combi_news_total &lt;- prof_panel_filter$alt_fname_finance_news_total + prof_panel_filter$alt_fname_online_blog +  prof_panel_filter$alt_fname_news_aggregator_total + prof_panel_filter$alt_fname_other_news_total

prof_panel_filter$alt_fname_other_combi_news_total_l &lt;- prof_panel_filter$alt_fname_finance_news_total_l + prof_panel_filter$alt_fname_online_blog_l +  prof_panel_filter$alt_fname_news_aggregator_total_l + prof_panel_filter$alt_fname_other_news_total_l</code></pre>
<p>And some additional variables regarding SJR and authorships:</p>
<pre class="r"><code>prof_panel_filter$avg_sjr &lt;- round(prof_panel_filter$sum_sjr/prof_panel_filter$count_pubs, 5)
prof_panel_filter$avg_sjr_total &lt;- round(prof_panel_filter$sum_sjr_total/prof_panel_filter$count_pubs_total, 5)

prof_panel_filter$share_first_au &lt;- round((prof_panel_filter$n_pubs_first_au + prof_panel_filter$n_pubs_single_au) / prof_panel_filter$n_pubs_all_au, 5)
prof_panel_filter$share_last_au &lt;- round((prof_panel_filter$n_pubs_last_au + prof_panel_filter$n_pubs_single_au ) / prof_panel_filter$n_pubs_all_au, 5)

prof_panel_filter$share_first_au_total &lt;- round((prof_panel_filter$n_pubs_first_au_total + prof_panel_filter$n_pubs_single_au_total) / prof_panel_filter$count_pubs_total, 5)
prof_panel_filter$share_last_au_total &lt;- round((prof_panel_filter$n_pubs_last_au_total + prof_panel_filter$n_pubs_single_au_total ) / prof_panel_filter$count_pubs_total, 5)

prof_panel_filter$pubs_sjr_total &lt;- prof_panel_filter$count_pubs_total * prof_panel_filter$avg_sjr_total 

prof_panel_filter$coa_online_combi_total &lt;- prof_panel_filter$coa_tot_online_all_total + prof_panel_filter$coa_tot_twitter_total
prof_panel_filter$coa_online_combi &lt;- prof_panel_filter$coa_tot_online_all + prof_panel_filter$coa_tot_twitter

prof_panel_filter$coa_online_combi_totalog &lt;- log(prof_panel_filter$coa_online_combi_total+1)

prof_panel_filter$avg_sjr_l &lt;- round(prof_panel_filter$sum_sjr_l/prof_panel_filter$count_pubs_l, 5)
prof_panel_filter$avg_sjr_total_l &lt;- round(prof_panel_filter$sum_sjr_total_l/prof_panel_filter$count_pubs_total_l, 5)

prof_panel_filter$share_first_au_l &lt;- round((prof_panel_filter$n_pubs_first_au_l + prof_panel_filter$n_pubs_single_au_l) / prof_panel_filter$n_pubs_all_au_l, 5)
prof_panel_filter$share_last_au_l &lt;- round((prof_panel_filter$n_pubs_last_au_l + prof_panel_filter$n_pubs_single_au_l ) / prof_panel_filter$n_pubs_all_au_l, 5)

prof_panel_filter$share_first_au_total_l &lt;- round((prof_panel_filter$n_pubs_first_au_total_l + prof_panel_filter$n_pubs_single_au_total_l) / prof_panel_filter$count_pubs_total_l, 5)
prof_panel_filter$share_last_au_total_l &lt;- round((prof_panel_filter$n_pubs_last_au_total_l + prof_panel_filter$n_pubs_single_au_total_l ) / prof_panel_filter$count_pubs_total_l, 5)

prof_panel_filter$pubs_sjr_total_l &lt;- prof_panel_filter$count_pubs_total_l * prof_panel_filter$avg_sjr_total_l 

prof_panel_filter$coa_online_combi_total_l &lt;- prof_panel_filter$coa_tot_online_all_total_l + prof_panel_filter$coa_tot_twitter_total_l
prof_panel_filter$coa_online_combi_l &lt;- prof_panel_filter$coa_tot_online_all_l + prof_panel_filter$coa_tot_twitter_l

prof_panel_filter$coa_online_combi_total_l_log &lt;- log(prof_panel_filter$coa_online_combi_total_l+1)</code></pre>
<p>Set some variables to factor as needed:</p>
<pre class="r"><code>prof_panel_filter$any_grant_l &lt;- as.factor(prof_panel_filter$any_grant_l)
prof_panel_filter$institution_dutch_total_narcis &lt;- as.factor(prof_panel_filter$institution_dutch_total_narcis)</code></pre>
<p>Make new variables for top n% of attention:</p>
<pre class="r"><code>panel_filter_long &lt;- prof_panel_filter %&gt;%
  pivot_longer(c(alt_online_all, news_all, alt_twitter), names_to = &quot;measure&quot;, values_to = &quot;value&quot;)

top_1_attn &lt;- panel_filter_long %&gt;%
  filter(!is.na(overall_adj_domain) &amp; !is.na(year) &amp; year &gt; 2011)%&gt;%
  group_by(overall_adj_domain, year, measure)%&gt;%
  filter(quantile(value, 0.99, na.rm = TRUE)&lt;=value)%&gt;%
  dplyr::select(profile_id, overall_adj_domain, year, measure, value)

top_1_attn$measure &lt;- paste0(top_1_attn$measure, &quot;_top_1&quot;)

top_1_attn &lt;- top_1_attn %&gt;%
  pivot_wider(names_from = &quot;measure&quot;)%&gt;%
  mutate(across(contains(&#39;top_1&#39;),  ~ifelse(is.na(.), 0, 1)))

prof_panel_filter &lt;- merge(prof_panel_filter,
                           top_1_attn[c(&quot;year&quot;, &quot;profile_id&quot;, &quot;overall_adj_domain&quot;, &quot;alt_online_all_top_1&quot;, &quot;alt_twitter_top_1&quot;, &quot;news_all_top_1&quot;)],
                           by = c(&quot;profile_id&quot;, &quot;year&quot;, &quot;overall_adj_domain&quot;),
                           all.x = TRUE,
                           all.y = FALSE)

top_5_attn &lt;- panel_filter_long %&gt;%
  filter(!is.na(overall_adj_domain) &amp; !is.na(year) &amp; year &gt; 2011)%&gt;%
  group_by(overall_adj_domain, year, measure)%&gt;%
  filter(quantile(value, 0.95, na.rm = TRUE)&lt;=value)%&gt;%
  dplyr::select(profile_id, overall_adj_domain, year, measure, value)

top_5_attn$measure &lt;- paste0(top_5_attn$measure, &quot;_top_5&quot;)

top_5_attn &lt;- top_5_attn %&gt;%
  pivot_wider(names_from = &quot;measure&quot;)%&gt;%
  mutate(across(contains(&#39;top_5&#39;),  ~ifelse(is.na(.), 0, 1)))

prof_panel_filter &lt;- merge(prof_panel_filter,
                           top_5_attn[c(&quot;year&quot;, &quot;profile_id&quot;, &quot;overall_adj_domain&quot;, &quot;alt_online_all_top_5&quot;, &quot;alt_twitter_top_5&quot;, &quot;news_all_top_5&quot;)],
                           by = c(&quot;profile_id&quot;, &quot;year&quot;, &quot;overall_adj_domain&quot;),
                           all.x = TRUE,
                           all.y = FALSE)

top_10_attn &lt;- panel_filter_long %&gt;%
  filter(!is.na(overall_adj_domain) &amp; !is.na(year) &amp; year &gt; 2011)%&gt;%
  group_by(overall_adj_domain, year, measure)%&gt;%
  filter(quantile(value, 0.90, na.rm = TRUE)&lt;=value)%&gt;%
  dplyr::select(profile_id, overall_adj_domain, year, measure, value)

top_10_attn$measure &lt;- paste0(top_10_attn$measure, &quot;_top_10&quot;)


top_10_attn &lt;- top_10_attn %&gt;%
  pivot_wider(names_from = &quot;measure&quot;)%&gt;%
  mutate(across(contains(&#39;top_10&#39;),  ~ifelse(is.na(.), 0, 1)))

prof_panel_filter &lt;- merge(prof_panel_filter,
                           top_10_attn[c(&quot;year&quot;, &quot;profile_id&quot;, &quot;overall_adj_domain&quot;, &quot;alt_online_all_top_10&quot;, &quot;alt_twitter_top_10&quot;, &quot;news_all_top_10&quot;)],
                           by = c(&quot;profile_id&quot;, &quot;year&quot;, &quot;overall_adj_domain&quot;),
                           all.x = TRUE,
                           all.y = FALSE)

top_20_attn &lt;- panel_filter_long %&gt;%
  filter(!is.na(overall_adj_domain) &amp; !is.na(year) &amp; year &gt; 2011)%&gt;%
  group_by(overall_adj_domain, year, measure)%&gt;%
  filter(quantile(value, 0.80, na.rm = TRUE)&lt;=value)%&gt;%
  dplyr::select(profile_id, overall_adj_domain, year, measure, value)

top_20_attn$measure &lt;- paste0(top_20_attn$measure, &quot;_top_20&quot;)


top_20_attn &lt;- top_20_attn %&gt;%
  pivot_wider(names_from = &quot;measure&quot;)%&gt;%
  mutate(across(contains(&#39;top_20&#39;),  ~ifelse(is.na(.), 0, 1)))

prof_panel_filter &lt;- merge(prof_panel_filter,
                           top_20_attn[c(&quot;year&quot;, &quot;profile_id&quot;, &quot;overall_adj_domain&quot;, &quot;alt_online_all_top_20&quot;, &quot;alt_twitter_top_20&quot;, &quot;news_all_top_20&quot;)],
                           by = c(&quot;profile_id&quot;, &quot;year&quot;, &quot;overall_adj_domain&quot;),
                           all.x = TRUE,
                           all.y = FALSE)

prof_panel_filter &lt;- filter(prof_panel_filter, !is.na(overall_adj_domain))

# if NA, needs to be 0
prof_panel_filter &lt;- prof_panel_filter %&gt;%
  mutate(across(contains(&#39;top_1&#39;),  ~ifelse(is.na(.), 0, .)))%&gt;%
  mutate(across(contains(&#39;top_5&#39;),  ~ifelse(is.na(.), 0, .)))%&gt;%
  mutate(across(contains(&#39;top_10&#39;),  ~ifelse(is.na(.), 0, .)))%&gt;%
  mutate(across(contains(&#39;top_20&#39;),  ~ifelse(is.na(.), 0, .)))</code></pre>
<p>Save this:</p>
<pre class="r"><code>write_csv(prof_panel_filter, &quot;panel_datasets/prof_panel_final_all_vars.csv&quot;)</code></pre>
<p>Anonymize the dataset for sharing by removing NARCIS IDs. Add new
identifiers and drop any redundant columns.</p>
<pre class="r"><code># # generate new ID mapping
# unique_narcis &lt;- unique(prof_panel_filter$profile_id)
# new_ids &lt;- paste(&quot;prof&quot;, c(1:length(unique_narcis)), sep= &quot;_&quot;)
# 
# new_id_mapping &lt;- data.frame(profile_id = unique_narcis,
#                                 prof_id = new_ids)
# 
# dbWriteTable(con, &quot;anonymous_id_mapping&quot;, new_id_mapping, row.names=FALSE, append=TRUE)

new_id_mapping &lt;- dbReadTable(con, &quot;anonymous_id_mapping&quot;)

# combine the panel with the new ID mapping
prof_panel_filter_anonymous &lt;- merge(prof_panel_filter,
                                     new_id_mapping,
                                     all.x = TRUE)</code></pre>
<pre class="r"><code># tidy up the variable order again
prof_panel_filter_anonymous &lt;- prof_panel_filter_anonymous %&gt;%
  dplyr::select(prof_id, year, overall_adj_domain , first_pub, years_since_first_pub, entry_batch_2023, institution_dutch_total_narcis, 
                institution_dutch_yearly_strict, institution_dutch_yearly_strict_l,
                inferred_gender, news_all, news_all_l, alt_online_all_l, alt_twitter_l,
                alt_online_all, alt_twitter, 
                count_pubs, count_pubs_l, count_pubs_total, count_pubs_total_l, 
                share_first_au, share_first_au_l, share_first_au_total, share_first_au_total_l,
                share_last_au, share_last_au_l, share_last_au_total, share_last_au_total_l,
                cited_by, cited_by_l, cited_by_total_all, cited_by_total_all_l,
                avg_sjr, avg_sjr_l, avg_sjr_total, avg_sjr_total_l,
                coa_tot_cited_by,  coa_tot_cited_by_l, coa_online_combi, coa_online_combi_l, 
                coa_tot_cited_by_total, coa_tot_cited_by_total_l,
                coa_online_combi_total, coa_online_combi_total_l,
                news_all_total, news_all_total_l,  alt_online_all_total, alt_online_all_total_l,
                alt_twitter_total, alt_twitter_total_l,
                any_grant, any_grant_l, 
                any_news, news_all_top_1, news_all_top_5, news_all_top_10, news_all_top_20, 
                any_online_news, alt_online_all_top_1, alt_online_all_top_5, alt_online_all_top_10, alt_online_all_top_20, 
                any_twitter, alt_twitter_top_1, alt_twitter_top_5, alt_twitter_top_10, alt_twitter_top_20, news_all,
                news_strict_all, news_strict_all_l, 
                news_off_all, news_off_all_l,  news_off_all_total, news_off_all_total_l, 
                news_online_all, news_online_all_l, news_online_all_total, news_online_all_total_l,  
                news_ded_all, news_ded_all_l, news_ded_all_total, news_ded_all_total_l, 
                news_national, news_national_l, news_national_total, news_national_total_l, 
                news_regional, news_regional_l,news_regional_total, news_regional_total_l, 
                news_intl,  news_intl_l,news_intl_total,  news_intl_total_l, 
                news_intl_other_sources, news_intl_other_sources_l, news_intl_other_sources_total, news_intl_other_sources_total_l, 
                alt_online_all, alt_online_all_l, alt_online_all_total, alt_online_all_total_l, 
                alt_online_single_all, alt_online_single_all_l,
                alt_online_name_all, alt_online_name_all_l, alt_online_fname_all, alt_online_fname_all_l, 
                alt_online_fname_all_total, alt_online_fname_all_total_l,
                alt_online_dutch_all, alt_online_dutch_all_l, 
                alt_general_interest_combi_news, alt_general_interest_combi_news_l, 
                alt_general_interest_combi_news_total, alt_general_interest_combi_news_total_l,
                alt_science_combi_news, alt_science_combi_news_l, alt_science_combi_news_total, alt_science_combi_news_total_l, 
                alt_other_combi_news, alt_other_combi_news_l, alt_other_combi_news_total, alt_other_combi_news_total_l,
                 alt_fname_general_interest_combi_news, alt_fname_general_interest_combi_news_l, 
                alt_fname_general_interest_combi_news_total, alt_fname_general_interest_combi_news_total_l,
                alt_fname_science_combi_news, alt_fname_science_combi_news_l, 
                alt_fname_science_combi_news_total, alt_fname_science_combi_news_total_l, 
                alt_fname_other_combi_news, alt_fname_other_combi_news_l, alt_fname_other_combi_news_total, alt_fname_other_combi_news_total_l)


colnames(prof_panel_filter_anonymous)[1] &lt;- &quot;profile_id&quot;

# write it out
write_csv(prof_panel_filter_anonymous, &quot;panel_datasets/prof_panel_anonymised.csv&quot;)</code></pre>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlByZXBhcmF0aW9uOiBQcm9mZXNzb3IteWVhciBwYW5lbCBjb21waWxhdGlvbiINCmF1dGhvcjogIkFuYSBNYWNhbm92aWMiDQpkYXRlOiAiMjAyNS0wNC0xMCINCm91dHB1dDogaHRtbF9kb2N1bWVudA0KLS0tDQoNCiMgUGFuZWwgZGF0YSBjb21waWxhdGlvbg0KDQpUaGlzIHNjcmlwdCBjb21waWxlcyBvdXIgdmFyaW91cyBkYXRhIHJlc291cmNlcyBpbnRvIGEgcGFuZWwgZGF0YXNldCBvZiBwcm9mZXNzb3JzJw0KcHVibGljYXRpb25zLCBjaXRhdGlvbnMsIG1lbnRpb25zLCBhbmQgY29hdXRob3JzaGlwcyBwZXIgeWVhci4NCg0KVGhlIGNvZGUgYmVsb3cgYWxzbyBwcm9kdWNlcyBzb21lIHZhcmlhYmxlcyBub3QgdXNlZCBpbiB0aGUgbWFpbiBhbmFseXNlcy4NClJlZmVyIHRvICpUYWJsZSBTNCogaW4gdGhlIFNJIEFwcGVuZGl4IGZvciB0aGUgZmluYWwgdmFyaWFibGVzIHVzZWQgaW4gb3VyIGFuYWx5c2lzLiANCg0KTG9hZCB0aGUgcGFja2FnZXM6DQpgYGB7ciBtZXNzYWdlPSAgRiwgd2FybmluZyA9IEYsIGV2YWwgPSBUfQ0KIyBsb2FkIHRoZSBoZWxwZXIgZnVuY3Rpb24gZmlsZQ0Kc291cmNlKCJoZWxwZXJfZnVuY3Rpb25zLlIiKQ0KcGFja2FnZXNfdG9fbG9hZCA8LSBjKCJyZWFkciIsICJkcGx5ciIsICJ0aWR5ciIsICJQZXJmb3JtYW5jZUFuYWx5dGljcyIsDQogICAgICAgICAgICAgICAgICAgICAgInRpZHl2ZXJzZSIsICJSUG9zdGdyZXMiLCAibHVicmlkYXRlIiwgInBzeWNoIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZGlnZXN0IiwgIkRCSSIsICJST0RCQyIsICJvZGJjIiwgImdyaWRFeHRyYSIsDQogICAgICAgICAgICAgICAgICAgICAgInBhbmVsciIsICJza2ltciIsICJmb3JlYWNoIiwgInZlZ2FuIiwgImtuaXRyIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZG9QYXJhbGxlbCIpDQoNCmZwYWNrYWdlX2NoZWNrKHBhY2thZ2VzX3RvX2xvYWQpDQoNCiMgRm9yIGZ1bGwgcmVwcm9kdWNpYmlsaXR5LCBsb2FkIHRoZSBwYWNrYWdlcyB3aXRoIGdyb3VuZGhvZyB1c2luZyB0aGUgY29kZSBiZWxvdyBpbnN0ZWFkDQojIG9mIHRoZSBmcGFja2FnZV9jaGVjayBmdW5jdGlvbg0KDQojIGxpYnJhcnkoZ3JvdW5kaG9nKQ0KIyBncm91bmRob2cubGlicmFyeShwYWNrYWdlc190b19sb2FkLCBkYXRlID0gIjIwMjMtMTItMDEiKQ0KYGBgDQoNCmBgYHtyIGluY2x1ZGU9RkFMU0V9DQpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSkNCm9wdHNfY2h1bmskc2V0KGV2YWwgPSBGQUxTRSkNCm9wdHNfY2h1bmskc2V0KHdhcm5pbmcgPSBGQUxTRSkNCm9wdHNfY2h1bmskc2V0KG1lc3NhZ2UgPSBGQUxTRSkNCmBgYA0KDQpDb25uZWN0IHRvIHRoZSBkYXRhYmFzZToNCmBgYHtyfQ0KIyBmaWxsIGluIG93biBjcmVkZW50aWFscw0KcG9ydCA8LSA1NDMyDQp1c2VyIDwtICJwb3N0Z3JlcyINCnBhc3N3b3JkIDwtICJkdXRjaG1lZGlhcHJvZnNzcWwiDQpkYXRhYmFzZV9uYW1lIDwtICJwb3N0Z3JlcyINCg0KDQpjb24gPC0gZGJDb25uZWN0KFBvc3RncmVzKCksDQogICAgICAgICAgICAgICAgIGRibmFtZT0gZGF0YWJhc2VfbmFtZSwNCiAgICAgICAgICAgICAgICAgcG9ydCA9IHBvcnQsDQogICAgICAgICAgICAgICAgIHVzZXIgPSB1c2VyLCANCiAgICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBwYXNzd29yZCkNCg0KY29uICMgQ2hlY2tzIGNvbm5lY3Rpb24gaXMgd29ya2luZw0KYGBgDQoNCiMgTkFSQ0lTIGRhdGENCg0KTG9hZCB0aGUgcHJvZmVzc29yIE5BUkNJUyBwcm9maWxlcyB0byBzdGFydCB3aXRoDQpgYGB7ciBtZXNzYWdlID0gRiwgd2FybmluZyA9IEZ9DQpuYXJjaXNfcHJvZl9pbmZvIDwtIGRiUmVhZFRhYmxlKGNvbiwgIm5hcmNpc19wcm9mX2luZm8iKQ0KYGBgDQoNCkdldCBhIGZvdW5kYXRpb25hbCBwYW5lbCBkYXRhc2V0IHNwYW5uaW5nIGJldHdlZW4gMTk3MyBhbmQgMjAyMzoNCmBgYHtyfQ0KYmFzZWxpbmVfcGFuZWwgPC0gZXhwYW5kLmdyaWQodW5pcXVlKG5hcmNpc19wcm9mX2luZm8kcHJvZmlsZV9pZCksIGMoMTk3MzoyMDIzKSkNCmNvbG5hbWVzKGJhc2VsaW5lX3BhbmVsKSA8LSBjKCJwcm9maWxlX2lkIiwgInllYXIiKQ0KYGBgDQoNCg0KIyBQdWJsaWNhdGlvbnMgYW5kIGNpdGF0aW9ucw0KDQpMb2FkIHB1YmxpY2F0aW9uIGluZm8gZm9yIGFsbCBwcm9mZXNzb3JzIGFuZCB0aWR5IGl0IHVwOg0KYGBge3J9DQojIGFsbCBwcm9mZXNzb3JzLCB0aGVpciBwdWJzLCBhbmQgdGhlIHllYXJseSBjaXRhdGlvbiBicmVha2Rvd24NCm9hX3Byb2ZfcHVicyA8LSBkYlJlYWRUYWJsZShjb24sICJvYV9wcm9mX3B1YnMiKQ0KDQojIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHB1YmljYXRpb25zDQpvYV9wdWJzX3VuaXF1ZSA8LSBkYlJlYWRUYWJsZShjb24sICJvYV9wcm9mX3B1YnNfdW5pcXVlIikNCg0KIyBkYXRhc2V0IG1hdGNoaW5nIHByb2Zlc3NvciBJRHMgdG8gcHVibGljYXRpb25zDQpvYV9wcm9mX3B1Yl9tYXRjaGluZyA8LSBkYlJlYWRUYWJsZShjb24sICJvYV9wcm9mX3B1Yl9tYXRjaCIpDQoNCiMgbWF0Y2ggcHVibGljYXRpb24gaW5mcm9tYXRpb24gd2l0aCBwcm9mZXNzb3JzDQpvYV9wcm9mX3B1YnNfdW5pcXVlIDwtIG1lcmdlKG9hX3B1YnNfdW5pcXVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYV9wcm9mX3B1Yl9tYXRjaGluZ1tjKCJpZCIsICJhdV9pZCIsICJhdV9kaXNwbGF5X25hbWUiLCAicHJvZmlsZV9pZCIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImlkIikNCmBgYA0KDQpHZXQgc2luZ2xlIGF1dGhvciBwdWJsaWNhdGlvbnMgb25seToNCmBgYHtyfQ0KIyBnZXQgaW5mb3JtYXRpb24gbGlzdGluZyBjb2F1dGhvcnMgKGF1X2lkKSBwZXIgcGFwZXIgKGlkKQ0KY29hdXRob3JfaW5mbyA8LSBkYkdldFF1ZXJ5KGNvbiwgInNlbGVjdCBcImlkXCIsIFwiYXVfaWRcIiBGUk9NIG9hX2NvYXV0aG9yX2luZm87IikNCg0KIyBsZWF2ZSBvbmx5IHB1YmxpY2F0aW9ucyB3aXRob3V0IGFueSBjb2F1dGhvcnMNCm9hX3Byb2ZfcHVic191bmlxdWVfc2luZ2xlX2F1IDwtIGZpbHRlcihvYV9wcm9mX3B1YnNfdW5pcXVlLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIGlkICVpbiUgY29hdXRob3JfaW5mbyRpZCkNCmBgYA0KDQojIyBZZWFybHkgcHVibGljYXRpb24gY291bnRzIA0KDQpHZXQgeWVhcmx5IHB1YmxpY2F0aW9uIGNvdW50cyBwZXIgcHJvZmVzc29yLCBmaWx0ZXJpbmcgb3V0IGV2ZXJ5dGhpbmcgYnV0IGFydGljbGVzLA0KYm9va3MsIGJvb2sgY2hhcHRlcnM6DQpgYGB7cn0NCnByb2ZfeWVhcl9wdWJzIDwtIG9hX3Byb2ZfcHVic191bmlxdWUgJT4lIA0KICBmaWx0ZXIoIWlzLm5hKHB1YmxpY2F0aW9uX3llYXIpICYgcHVibGljYXRpb25feWVhciA+PSAxOTczICYgcHVibGljYXRpb25feWVhciA8PSAyMDIzICYgDQogICAgICAgICAgIHR5cGUgJWluJSBjKCJhcnRpY2xlIiwgImJvb2siLCAiYm9vay1jaGFwdGVyIikpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHB1YmxpY2F0aW9uX3llYXIpJT4lDQogIHN1bW1hcmlzZShjb3VudF9wdWJzID0gbigpKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHB1YmxpY2F0aW9uX3llYXIpJT4lDQogIG11dGF0ZShjb3VudF9wdWJzX3RvdGFsID0gY3Vtc3VtKGNvdW50X3B1YnMpKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHB1YmxpY2F0aW9uX3llYXIpDQoNCiMgcmVuYW1lIGZvciBtZXJnaW5nDQpjb2xuYW1lcyhwcm9mX3llYXJfcHVicylbd2hpY2goY29sbmFtZXMocHJvZl95ZWFyX3B1YnMpID09ICJwdWJsaWNhdGlvbl95ZWFyIildIDwtICJ5ZWFyIg0KYGBgDQoNCk5vdywgZ2V0IHRoZWlyIHllYXJseSBjaXRhdGlvbnMgKDIwMTItMjAyMyk6DQpgYGB7cn0NCnByb2ZfeWVhcl9jaXRhdGlvbnMgPC0gb2FfcHJvZl9wdWJzICU+JSANCiAgZmlsdGVyKCFpcy5uYShwdWJsaWNhdGlvbl95ZWFyKSAmICFpcy5uYShjb3VudHNfYnlfeWVhcl95ZWFyKSAmIHB1YmxpY2F0aW9uX3llYXIgPj0gMTk3MyAmIHB1YmxpY2F0aW9uX3llYXIgPD0gMjAyMyAmDQogICAgICAgICAgIHR5cGUgJWluJSBjKCJhcnRpY2xlIiwgImJvb2siLCAiYm9vay1jaGFwdGVyIikpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIGNvdW50c19ieV95ZWFyX3llYXIpJT4lDQogIHN1bW1hcmlzZShjaXRlZF9ieSA9IHN1bShjb3VudHNfYnlfeWVhcl9jaXRlZF9ieV9jb3VudCkpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgY291bnRzX2J5X3llYXJfeWVhcikgJT4lDQogIG11dGF0ZShjaXRlZF9ieV90b3RhbF9vYSA9IGN1bXN1bShjaXRlZF9ieSkpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgY291bnRzX2J5X3llYXJfeWVhcikNCg0KIyByZW5hbWUgZm9yIG1lcmdpbmcNCmNvbG5hbWVzKHByb2ZfeWVhcl9jaXRhdGlvbnMpW3doaWNoKGNvbG5hbWVzKHByb2ZfeWVhcl9jaXRhdGlvbnMpID09ICJjb3VudHNfYnlfeWVhcl95ZWFyIildIDwtICJ5ZWFyIg0KDQpwcm9mX3llYXJfY2l0YXRpb25zIDwtIHByb2ZfeWVhcl9jaXRhdGlvbnMgJT4lDQogIGZpbHRlcih5ZWFyIDw9IDIwMjMpDQpgYGANCg0KTm93LCB3ZSB3YW50IHRvIGtub3cgaG93IG1hbnkgY2l0YXRpb25zIHRoZXJlIHdlcmUgYmVmb3JlIDIwMTIsIHNvIHdlIGdldCB0aGUgdG90YWxzDQphbmQgdGhlbiBnZW5lcmF0ZSBhIG5ldyBjb2x1bW4gZ2V0dGluZyB0aGUgcHJlLTIwMTIgY2l0YXRpb25zICsgZWFjaCB5ZWFyJ3MgY2l0YXRpb25zOg0KYGBge3J9DQojIHRvdGFsIGNpdGF0aW9ucyBwZXIgcHJvZg0KcHJvZl90b3RhbF9jaXRhdGlvbnMgPC0gb2FfcHJvZl9wdWJzX3VuaXF1ZSAlPiUNCiAgZmlsdGVyKCFpcy5uYShwdWJsaWNhdGlvbl95ZWFyKSAmIHB1YmxpY2F0aW9uX3llYXIgPj0gMTk3MyAmIHB1YmxpY2F0aW9uX3llYXIgPD0gMjAyMyAmIA0KICAgICAgICAgICB0eXBlICVpbiUgYygiYXJ0aWNsZSIsICJib29rIiwgImJvb2stY2hhcHRlciIpKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkKSU+JQ0KICBzdW1tYXJpc2UoY2l0ZWRfYnlfc2luY2VfcHViXzIwMjQgPSBzdW0oY2l0ZWRfYnlfY291bnQpKQ0KIyByZW5hbWUgZm9yIG1lcmdpbmcNCmNvbG5hbWVzKHByb2ZfdG90YWxfY2l0YXRpb25zKVt3aGljaChjb2xuYW1lcyhwcm9mX3RvdGFsX2NpdGF0aW9ucykgPT0gInB1YmxpY2F0aW9uX3llYXIiKV0gPC0gInllYXIiDQoNCg0KIyBnZXQgdGhlIGNpdGF0aW9ucyBwcmVjZWRpbmcgMjAxMiBieSBkZWR1Y3RpbmcgdGhlIDIwMTIgY2l0YXRpb25zIGZyb20gdGhlIHRvdGFsDQpsYXRlc3RfY2l0YXRpb24gPC0gcHJvZl95ZWFyX2NpdGF0aW9ucyAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgc2xpY2Uod2hpY2gubWF4KHllYXIpKQ0KDQojIG1lcmdlIHRoZXNlIHR3bywgcmVwbGFjZSBOQXMNCnByb2ZfdG90YWxfY2l0YXRpb25zIDwtIG1lcmdlKHByb2ZfdG90YWxfY2l0YXRpb25zLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0X2NpdGF0aW9uW2MoInByb2ZpbGVfaWQiLCAiY2l0ZWRfYnlfdG90YWxfb2EiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJwcm9maWxlX2lkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSkNCg0KcHJvZl90b3RhbF9jaXRhdGlvbnMgPC0gcHJvZl90b3RhbF9jaXRhdGlvbnMgJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApDQoNCiMgZ2V0IHRoZSBjaXRhdGlvbiBjb3VudCBmb3IgcHJvZnMgYmVmb3JlIDIwMTINCnByb2ZfdG90YWxfY2l0YXRpb25zJGNpdGVkX2J5X2JlZm9yZV8yMDEyIDwtIHByb2ZfdG90YWxfY2l0YXRpb25zJGNpdGVkX2J5X3NpbmNlX3B1Yl8yMDI0IC0gcHJvZl90b3RhbF9jaXRhdGlvbnMkY2l0ZWRfYnlfdG90YWxfb2ENCiAgDQojIGlmIHRoaXMgbnVtYmVyIG5lZ2F0aXZlICh3aGljaCBpdCBjYW4gYmUgZHVlIHRvIE9BIHByb2JsZW1zKSwgcmVwbGFjZSBieSAwDQpwcm9mX3RvdGFsX2NpdGF0aW9ucyRjaXRlZF9ieV9iZWZvcmVfMjAxMiA8LSBpZmVsc2UocHJvZl90b3RhbF9jaXRhdGlvbnMkY2l0ZWRfYnlfYmVmb3JlXzIwMTIgPCAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl90b3RhbF9jaXRhdGlvbnMkY2l0ZWRfYnlfYmVmb3JlXzIwMTIpDQoNCiMgbWVyZ2UgdGhpcyB3aXRoIGNpdGF0aW9uIGRhdGENCnByb2ZfeWVhcl9jaXRhdGlvbnMgPC0gbWVyZ2UocHJvZl95ZWFyX2NpdGF0aW9ucywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl90b3RhbF9jaXRhdGlvbnNbYygicHJvZmlsZV9pZCIsICJjaXRlZF9ieV9iZWZvcmVfMjAxMiIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJwcm9maWxlX2lkIikNCg0KIyBnZXQgY3VtdWxhdGl2ZSBjaXRhdGlvbnMgb2YgcHJlIDIwMTIgKyB0aGUgeWVhciBpbiBxdWVzdGlvbg0KcHJvZl95ZWFyX2NpdGF0aW9ucyRjaXRlZF9ieV90b3RhbF9hbGwgPC0gcHJvZl95ZWFyX2NpdGF0aW9ucyRjaXRlZF9ieV90b3RhbF9vYSArIHByb2ZfeWVhcl9jaXRhdGlvbnMkY2l0ZWRfYnlfYmVmb3JlXzIwMTINCmBgYA0KDQpNZXJnZSB0aGUgcHVibGljYXRpb24gYW5kIGNpdGF0aW9uIGNvdW50cyB3aXRoIHRoZSBiYXNlbGluZSBwYW5lbDoNCmBgYHtyfQ0KcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zIDwtIG1lcmdlKGJhc2VsaW5lX3BhbmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfeWVhcl9wdWJzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiKSkNCg0KDQpwcm9mX3llYXJfcHVic19jaXRhdGlvbnMgPC0gbWVyZ2UocHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfeWVhcl9jaXRhdGlvbnMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpKQ0KYGBgDQoNClRpZHkgdGhpcyBhbGwgdXA6DQoNCmBgYHtyfQ0KIyBmaWxsIHNvbWUgTkFzIGZvciBwdWJsaWNhdGlvbiBjb3VudHMsIGJ1dCB3ZSB3aWxsIG5vdCBkbyB0aGlzIGZvciBjaXRhdGlvbnMNCnByb2ZfeWVhcl9wdWJzX2NpdGF0aW9ucyRjb3VudF9wdWJzIDwtIGlmZWxzZShpcy5uYShwcm9mX3llYXJfcHVic19jaXRhdGlvbnMkY291bnRfcHVicyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX3llYXJfcHVic19jaXRhdGlvbnMkY291bnRfcHVicykNCg0KcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zIDwtIHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9ucyAlPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkKSU+JQ0KICBtdXRhdGUoY291bnRfcHVic190b3RhbCA9IGN1bXN1bShjb3VudF9wdWJzKSkNCg0KDQojIGZpbGwgdGhlIGNpdGF0aW9ucyBiZWZvcmUgMjAxMg0KcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zIDwtIHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9ucyAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgZmlsbChjaXRlZF9ieV9iZWZvcmVfMjAxMiwgLmRpcmVjdGlvbiA9ICJ1cCIpDQpgYGANCg0KRm9yIGVhY2ggcHJvZmVzc29yLCBnZXQgdGhlIGZpcnN0IHB1YmxpY2F0aW9uIHllYXIgYW5kIG1lcmdlIHdpdGggdGhlIHJlc3Q6DQpgYGB7cn0NCiMgZ2V0IHByb2Zlc3NvciBlbnRyeSB5ZWFycw0KcHJvZl9lbnRyeV95ZWFyIDwtIG9hX3Byb2ZfcHVic191bmlxdWUgJT4lDQogIGZpbHRlcihwdWJsaWNhdGlvbl95ZWFyID49IDE5NzMgJiBwdWJsaWNhdGlvbl95ZWFyIDw9IDIwMjMgJiANCiAgICAgICAgICAgdHlwZSAlaW4lIGMoImFydGljbGUiLCAiYm9vayIsICJib29rLWNoYXB0ZXIiKSklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgc2xpY2Uod2hpY2gubWluKHB1YmxpY2F0aW9uX3llYXIpKSU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgcHVibGljYXRpb25feWVhcikNCg0KIyByZW5hbWUNCmNvbG5hbWVzKHByb2ZfZW50cnlfeWVhcilbMl0gPC0gImZpcnN0X3B1YiINCg0KIyBtZXJnZQ0KcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zIDwtIG1lcmdlKHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9ucywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX2VudHJ5X3llYXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gInByb2ZpbGVfaWQiKQ0KDQojIGdldCBpbmRpY2F0b3Igb2YgeWVhcnMgc2luY2UgZmlyc3QgcHViDQpwcm9mX3llYXJfcHVic19jaXRhdGlvbnMkeWVhcnNfc2luY2VfZmlyc3RfcHViIDwtIHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9ucyR5ZWFyIC0gcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zJGZpcnN0X3B1Yg0KYGBgDQoNCk1lcmdlIHRoaXMgd2l0aCBwcm9mZXNzb3IgZ2VuZGVyOg0KYGBge3J9DQpwcm9mX2dlbmRlciA8LSBkYlJlYWRUYWJsZShjb24sICJnZW5kZXJfdGFibGUiKQ0KDQpwcm9mX3llYXJfcHVic19jaXRhdGlvbnMgPC0gbWVyZ2UocHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfZ2VuZGVyW2MoInByb2ZpbGVfaWQiLCAiaW5mZXJyZWRfZ2VuZGVyIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJwcm9maWxlX2lkIikNCmBgYA0KDQpBZGQgaW5mb3JtYXRpb24gYWJvdXQgdGhlaXIgcHVibGljYXRpb25zLg0KTG9hZCB0aGUgU2NpbWFnbyBzY29yZXM6DQpgYGB7cn0NCm9hX3B1YnNfYWxsX3NjaW1hZ28gPC0gZGJSZWFkVGFibGUoY29uLCAib2FfcHJvZl9wdWJzX3VuaXF1ZV9zY2ltYWdvIikNCmBgYA0KDQpUaWR5IHVwIHRoZSBkYXRhIGFuZCBjb21waWxlOg0KYGBge3J9DQpvYV9wdWJzX2FsbF9zY2ltYWdvJHNqciA8LSBhcy5udW1lcmljKHN0cl9yZXBsYWNlKG9hX3B1YnNfYWxsX3NjaW1hZ28kc2pyLCAiLCIsICIuIikpDQoNCnllYXJseV9zY2ltYWdvIDwtIG9hX3B1YnNfYWxsX3NjaW1hZ28gJT4lDQogIGZpbHRlcihwdWJsaWNhdGlvbl95ZWFyID49MTk3MyAmIHB1YmxpY2F0aW9uX3llYXIgPD0gMjAyMykgJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHB1YmxpY2F0aW9uX3llYXIpJT4lDQogIHN1bW1hcmlzZShzdW1fc2pyID0gc3VtKHNqciwgbmEucm0gPSBUUlVFKSwNCiAgICAgICAgICAgIHN1bV9oaW5kZXggPSBzdW0oaF9pbmRleCwgbmEucm0gPSBUUlVFKSwNCiAgICAgICAgICAgIGNvdW50X3ExID0gc3VtKHNqcl9iZXN0X3F1YXJ0aWxlID09ICJRMSIpLA0KICAgICAgICAgICAgY291bnRfc2NpbWFnb19pbmRpY2F0b3JzID0gbigpKQ0KYGBgDQpNZXJnZSB3aXRoIHRoZSBwdWJsaWNhdGlvbiBhbmQgY2l0YXRpb24gZGF0YToNCmBgYHtyfQ0KcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zX3NjaSA8LSBtZXJnZShwcm9mX3llYXJfcHVic19jaXRhdGlvbnMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXJseV9zY2ltYWdvLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieS54ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5LnkgPSBjKCJwcm9maWxlX2lkIiwgInB1YmxpY2F0aW9uX3llYXIiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KYGBgDQoNClJlcGxhY2UgTkFzIHdpdGggMHMgaWYgeWVhciBpcyBhZnRlciAxOTk5Og0KYGBge3J9DQpwcm9mX3llYXJfcHVic19jaXRhdGlvbnNfc2NpIDwtIHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19zY2klPiUgDQogIG11dGF0ZShzdW1fc2pyICA9ICBpZmVsc2UoeWVhciA+PSAxOTk5ICYgaXMubmEoc3VtX3NqciksIDAgLCBzdW1fc2pyKSwNCiAgICAgICAgIHN1bV9oaW5kZXggID0gIGlmZWxzZSh5ZWFyID49IDE5OTkgJiBpcy5uYShzdW1faGluZGV4KSwgMCAsIHN1bV9oaW5kZXgpLA0KICAgICAgICAgY291bnRfcTEgID0gIGlmZWxzZSh5ZWFyID49IDE5OTkgJiBpcy5uYShjb3VudF9xMSksIDAgLCBjb3VudF9xMSksDQogICAgICAgICBjb3VudF9zY2ltYWdvX2luZGljYXRvcnMgPSBpZmVsc2UoeWVhciA+PSAxOTk5ICYgaXMubmEoY291bnRfc2NpbWFnb19pbmRpY2F0b3JzKSwgMCAsIGNvdW50X3NjaW1hZ29faW5kaWNhdG9ycykNCiAgKQ0KYGBgDQoNCg0KV3JpdGUgdGhpcyBvdXQ6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3llYXJfcHVic19jaXRhdGlvbnNfc2NpLCAicGFuZWxfZGF0YXNldHMvcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zLmNzdiIpDQpgYGANCg0KIyBHcmFudCBpbmZvcm1hdGlvbg0KDQpHZXQgYWxsIHRoZSBncmFudCBpbmZvcm1hdGlvbjoNCmBgYHtyfQ0KbndvX2dyYW50cyA8LSBkYlJlYWRUYWJsZShjb24sICJuYXJjaXNfbndvX2dyYW50X2luZm8iKQ0KZXJjX2dyYW50cyA8LSBkYlJlYWRUYWJsZShjb24sICJlcmNfZ3JhbnRfaW5mbyIpDQpgYGANCg0KR2V0IHRoaXMgaW50byBhIGJpbmFyeSBmb3JtYXQ6DQpgYGB7cn0NCiMgZm9yIE5XTw0KbndvX2dyYW50cyR2ZW5pIDwtIGlmZWxzZShud29fZ3JhbnRzJGdyYW50ID09ICJ2ZW5pIiwgMSwgMCkNCm53b19ncmFudHMkdmlkaSA8LSBpZmVsc2UobndvX2dyYW50cyRncmFudCA9PSAidmlkaSIsIDEsIDApDQpud29fZ3JhbnRzJHZpY2kgPC0gaWZlbHNlKG53b19ncmFudHMkZ3JhbnQgPT0gInZpY2kiLCAxLCAwKQ0KbndvX2dyYW50cyRzcGlub3phIDwtIGlmZWxzZShud29fZ3JhbnRzJGdyYW50ID09ICJzcGlub3phIiwgMSwgMCkNCm53b19ncmFudHMkc3RldmluIDwtIGlmZWxzZShud29fZ3JhbnRzJGdyYW50ID09ICJzdGV2aW4iLCAxLCAwKQ0KIyBzZWxlY3Qgb25seSB0aGUgbmVjZXNzYXJ5IGNvbHVtbnMNCm53b19ncmFudHMgPC0gbndvX2dyYW50cyAlPiUNCiAgc2VsZWN0KHllYXI6c3RldmluKQ0KDQojIGFueSBncmFudA0KbndvX2dyYW50cyRhbnlfbndvIDwtIGlmZWxzZShyb3dTdW1zKG53b19ncmFudHNbLCAzOjddKSA+IDAsIDEsIDApDQoNCiMgZm9yIEVSQw0KZXJjX2dyYW50cyRhZHZhbmNlZCA8LSBpZmVsc2UoZXJjX2dyYW50cyRncmFudCA9PSAiQWR2YW5jZWQgZ3JhbnRzIiwgMSwgMCkNCmVyY19ncmFudHMkY29uc29saWRhdG9yIDwtIGlmZWxzZShlcmNfZ3JhbnRzJGdyYW50ID09ICJDb25zb2xpZGF0b3IgZ3JhbnRzIiwgMSwgMCkNCmVyY19ncmFudHMkc3RhcnRpbmcgIDwtIGlmZWxzZShlcmNfZ3JhbnRzJGdyYW50ID09ICJTdGFydGluZyBncmFudHMiLCAxLCAwKQ0KZXJjX2dyYW50cyRzeW5lcmd5IDwtIGlmZWxzZShlcmNfZ3JhbnRzJGdyYW50ID09ICJTeW5lcmd5IGdyYW50cyIsIDEsIDApDQojIHNlbGVjdCBvbmx5IHRoZSBuZWNlc3NhcnkgY29sdW1ucw0KZXJjX2dyYW50cyA8LSBlcmNfZ3JhbnRzICU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZDpzeW5lcmd5KQ0KDQojIGFueSBncmFudA0KZXJjX2dyYW50cyRhbnlfZXJjIDwtIGlmZWxzZShyb3dTdW1zKGVyY19ncmFudHNbLCAzOjZdKSA+IDAsIDEsIDApDQpgYGANCg0KQWNjdW11bGF0ZSBncmFudHMsIG1ha2Ugc3VyZSB0aGVyZSBhcmUgbm8gZHVwbGljYXRlcywgYW5kIGFycmFuZ2UgbmljZWx5Og0KYGBge3J9DQpud29fY3VtdWxhdGl2ZSA8LSBud29fZ3JhbnRzICU+JQ0KICBmaWx0ZXIoeWVhciA+PSAxOTczICYgeWVhciA8PSAyMDIzKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQpJT4lDQogIG11dGF0ZShud29fdG90YWwgPSBjdW1zdW0oYW55X253bykpJT4lDQogIGRpc3RpbmN0KHByb2ZpbGVfaWQsIHllYXIsIC5rZWVwX2FsbCA9IFRSVUUpDQoNCmVyY19jdW11bGF0aXZlIDwtIGVyY19ncmFudHMgJT4lDQogIGZpbHRlcih5ZWFyID49IDE5NzMgJiB5ZWFyIDw9IDIwMjMpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgbXV0YXRlKGVyY190b3RhbCA9IGN1bXN1bShhbnlfZXJjKSklPiUNCiAgZGlzdGluY3QocHJvZmlsZV9pZCx5ZWFyLCAua2VlcF9hbGwgPSBUUlVFKQ0KYGBgDQoNCkNvbWJpbmUgdGhpcyB3aXRoIHB1YnMgYW5kIGNpdGF0aW9uczoNCmBgYHtyfQ0KcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zX2dyYW50cyA8LSBtZXJnZShwcm9mX3llYXJfcHVic19jaXRhdGlvbnNfc2NpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBud29fY3VtdWxhdGl2ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpKQ0KDQpwcm9mX3llYXJfcHVic19jaXRhdGlvbnNfZ3JhbnRzIDwtIG1lcmdlKHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyY19jdW11bGF0aXZlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIikpDQoNCiMgcmVwbGFjZSBOQXMNCnByb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHMgPC0gcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zX2dyYW50cyAlPiUNCiAgbXV0YXRlX2F0KHZhcnModmVuaTplcmNfdG90YWwpLCB+cmVwbGFjZV9uYSguLCAwKSkNCg0KIyBmaXggdGhlIGN1bXVsYXRpdmVzDQpwcm9mX3llYXJfcHVic19jaXRhdGlvbnNfZ3JhbnRzIDwtIHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHMgJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgbXV0YXRlKG53b190b3RhbCA9IGN1bXN1bShhbnlfbndvKSwNCiAgICAgICAgIGVyY190b3RhbCA9IGN1bXN1bShhbnlfZXJjKSkNCmBgYA0KDQpXcml0ZSB0aGlzIG91dDoNCmBgYHtyfQ0Kd3JpdGVfY3N2KHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHMsICJwYW5lbF9kYXRhc2V0cy9wcm9mX3llYXJfcHVic19jaXRhdGlvbnNfZ3JhbnRzLmNzdiIpDQpgYGANCg0KYGBge3J9DQpnYygpDQpybShlcmNfZ3JhbnRzKQ0Kcm0oZXJjX2N1bXVsYXRpdmUpDQpybShud29fY3VtdWxhdGl2ZSkNCnJtKG53b19ncmFudHMpDQpgYGANCg0KIyBBbHRtZXRyaWMgYXR0ZW50aW9uDQoNCkdldCBhbGwgdGhlIGF0dGVudGlvbiBtZWFzdXJlcyB3ZSBoYXZlIHBlciBwYXBlcjoNCmBgYHtyfQ0KYXR0ZW50aW9uX25ld3MgPC0gZGJSZWFkVGFibGUoY29uLCAiYWx0bWV0cmljX3B1Yl9hdHRfbmV3cyIpDQphdHRlbnRpb25fYmxvZ3MgPC0gZGJSZWFkVGFibGUoY29uLCAiYWx0bWV0cmljX3B1Yl9hdHRfYmxvZ3MiKQ0KDQojIG1lcmdlIHRoZSBwYXBlcnMgd2l0aCB0aGVpciBhdXRob3JzDQphdHRlbnRpb25fbmV3c19wcm9mcyA8LSBtZXJnZShhdHRlbnRpb25fbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICAgIG9hX3Byb2ZfcHViX21hdGNoaW5nW2MoImlkIiwgInByb2ZpbGVfaWQiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJpZCIpDQoNCiMgbWVyZ2UgdGhlIHBhcGVycyB3aXRoIHRoZWlyIGF1dGhvcnMNCmF0dGVudGlvbl9ibG9nc19wcm9mcyA8LSBtZXJnZShhdHRlbnRpb25fYmxvZ3MsDQogICAgICAgICAgICAgICAgICAgICAgICBvYV9wcm9mX3B1Yl9tYXRjaGluZ1tjKCJpZCIsICJwcm9maWxlX2lkIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSAiaWQiKQ0KYGBgDQoNCkNvbXBpbGUgdGhlIHR3byBhdHRlbnRpb24gc291cmNlcyB0b2dldGhlcjoNCmBgYHtyfQ0KYXR0ZW50aW9uX25ld3NfcHJvZnMgPC0gYXR0ZW50aW9uX25ld3NfcHJvZnNbYygiaWQiLCAidGl0bGUiLCAidXJsIiwgImxpY2Vuc2UiLCAicG9zdGVkX29uIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzdW1tYXJ5IiwgImF1dGhvcl9uYW1lIiwgImF1dGhvcl91cmwiLCAicHJvZmlsZV9pZCIpXQ0KDQphdHRlbnRpb25fYmxvZ3NfcHJvZnMgPC0gYXR0ZW50aW9uX2Jsb2dzX3Byb2ZzW2MoImlkIiwgInRpdGxlIiwgInVybCIsICJsaWNlbnNlIiwgInBvc3RlZF9vbiIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic3VtbWFyeSIsICJhdXRob3JfbmFtZSIsICJhdXRob3JfdXJsIiwgInByb2ZpbGVfaWQiKV0NCg0KYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnMgPC0gcmJpbmQoYXR0ZW50aW9uX25ld3NfcHJvZnMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb25fYmxvZ3NfcHJvZnMpDQpgYGANCg0KTG9hZCBpbiBuZXdzIG1lbnRpb25zIHdpdGggZnVsbCB0ZXh0ICgicmVzcG9uc2UiIG5vdCBhbiBlcnJvciwgYnV0IDIwMCBmb3Igc3VjY2VzcykNCmFuZCBtYXRjaCB0byBwcm9mZXNzb3JzLCBzZWVraW5nIGlmIHRoZWlyIGxhc3QgbmFtZSBpcyBtZW50aW9uZWQgaGVyZToNCmBgYHtyfQ0KYXR0ZW50aW9uX25ld3NfZnVsbCA8LSBkYkdldFF1ZXJ5KGNvbiwgInNlbGVjdCAqIGZyb20gcHViX2F0dF9uZXdzX2Z1bGxfdGV4dCB3aGVyZSBcInJlc3BvbnNlXCI9JzIwMCciKQ0KDQphdHRlbnRpb25fbmV3c19mdWxsX21hdGNoIDwtIG1lcmdlKGF0dGVudGlvbl9uZXdzX2Z1bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzW2MoInVybCIsICJwcm9maWxlX2lkIiwgImlkIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInVybCIpKQ0KDQojIG1lcmdlIHRoaXMgd2l0aCBwcm9mZXNzb3IgbGFzdCBuYW1lcw0KYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCA8LSBtZXJnZShhdHRlbnRpb25fbmV3c19mdWxsX21hdGNoLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXJjaXNfcHJvZl9pbmZvW2MoInByb2ZpbGVfaWQiLCAibGFzdCIsICJmaXJzdCIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSAicHJvZmlsZV9pZCIpDQoNCiMgcmVtb3ZlIHRoZSBkdXBsaWNhdGVzDQphdHRlbnRpb25fbmV3c19mdWxsX21hdGNoJGR1cGwgPC0gZHVwbGljYXRlZChhdHRlbnRpb25fbmV3c19mdWxsX21hdGNoW2MoInVybCIsICJpZCIsICJwcm9maWxlX2lkIildKQ0KDQphdHRlbnRpb25fbmV3c19mdWxsX21hdGNoIDwtIGF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2ggJT4lDQogIGZpbHRlcihkdXBsID09IEZBTFNFKSU+JQ0KICBzZWxlY3QoLWR1cGwpDQoNCmF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gkZmlyc3RfbGFzdCA8LSBwYXN0ZShhdHRlbnRpb25fbmV3c19mdWxsX21hdGNoJGZpcnN0LCBhdHRlbnRpb25fbmV3c19mdWxsX21hdGNoJGxhc3QpDQpgYGANCg0KR2V0IHRoZSBsYW5ndWFnZSBvZiBlYWNoIG1lbnRpb246DQpgYGB7cn0NCmF0dGVudGlvbl9uZXdzX2xhbmcgPC0gcmVwKE5BLCBucm93KGF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gpKQ0KDQpmb3IgKGkgaW4gMTpucm93KGF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gpKXsNCiAgY29udGVudCA8LSBhdHRlbnRpb25fbmV3c19mdWxsX21hdGNoJGNvbnRlbnRbaV0NCiAgDQogIGlmICghaXMubmEoY29udGVudCkpew0KICAgIA0KICAgICNub3csIGlkZW50aWZ5IHRoZSBsYW5ndWFnZSBiYXNlZCBvbiB0aGUgZmlyc3QgMzAwIGNoYXJhY3RlcnMgb2YgdGhlIGNvbnRlbnQsDQogICAgI29yLCBpZiBzaG9ydGVyLCB0aGUgd2hvbGUgc3RyaW5nDQogICAgaWYgKG5jaGFyKGNvbnRlbnQpPjMwMCl7DQogICAgICBsYW5ndWFnZSA8LSBmYXN0VGV4dDo6bGFuZ3VhZ2VfaWRlbnRpZmljYXRpb24oaW5wdXRfb2JqID0gc3Vic3RyKGNvbnRlbnQsIDEsIDMwMCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlX3RyYWluZWRfbGFuZ3VhZ2VfbW9kZWxfcGF0aCA9ICJyZXNvdXJjZXMvbGlkLjE3Ni5mdHoiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoID0gMC4wLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmJvc2UgPSBGQUxTRSkNCiAgICAgIGxhbmd1YWdlIDwtIGFzLmNoYXJhY3RlcihsYW5ndWFnZSRpc29fbGFuZ18xKQ0KICAgICAgDQogICAgfWVsc2V7DQogICAgICBsYW5ndWFnZSA8LSBmYXN0VGV4dDo6bGFuZ3VhZ2VfaWRlbnRpZmljYXRpb24oaW5wdXRfb2JqID0gY29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVfdHJhaW5lZF9sYW5ndWFnZV9tb2RlbF9wYXRoID0gInJlc291cmNlcy9saWQuMTc2LmZ0eiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGggPSAwLjAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyYm9zZSA9IEZBTFNFKQ0KICAgICAgbGFuZ3VhZ2UgPC0gYXMuY2hhcmFjdA0KICAgICAgZXIobGFuZ3VhZ2UkaXNvX2xhbmdfMSkNCiAgICB9DQogICAgYXR0ZW50aW9uX25ld3NfbGFuZ1tpXSA8LSBsYW5ndWFnZQ0KICB9DQogICAgDQogcHJpbnQoaSkgICANCn0NCiAgICANCmBgYA0KDQpTZWVrIHByb2Zlc3NvciBsYXN0IG5hbWUgbWVudGlvbnMgaW4gdGhlIGZ1bGwgdGV4dHMgb2YgbmV3cyBhcnRpY2xlczoNCmBgYHtyfQ0KYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCRsYXN0X25hbWVfbWVudGlvbiA8LSBzdHJfZGV0ZWN0KHRvbG93ZXIoYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCRjb250ZW50KSwgcGFzdGUwKCJcXGIiLCBhdHRlbnRpb25fbmV3c19mdWxsX21hdGNoJGxhc3QsICJcXGIiKSkNCg0KYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCRmaXJzdF9sYXN0X21lbnRpb24gPC0gc3RyX2RldGVjdCh0b2xvd2VyKGF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gkY29udGVudCksIHBhc3RlMCgiXFxiIiwgYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCRmaXJzdF9sYXN0LCAiXFxiIikpDQoNCmtleXdvcmRfbGlzdF8xIDwtIGMoImhvb2dsZXJhYXIiLCAidW5pdmVyc2l0YWlyIGRvY2VudCIsICJ1bml2ZXJzaXRhaXIgaG9vZmRkb2NlbnQiLCAiYXNzaXN0YW50IHByb2Zlc3NvciIsICJhc3NvY2lhdGUgcHJvZmVzc29yIiwNCiAgICAgICAgICAgICAgICAgICJvbmRlcnpvZWtlciIsICJyZXNlYXJjaGVyIiwgInVuaXZlcnNpdGVpdHNob29nbGVyYWFyIiwgInByb2Zlc3NvciIpDQoNCmtleXdvcmRfbGlzdF8xIDwtIHBhc3RlKHBhc3RlMCgiXFxiIiwga2V5d29yZF9saXN0XzEsICJcXGIiKSwgY29sbGFwc2UgPSJ8IikNCg0Ka2V5d29yZF9saXN0X2ZpbmFsIDwtIHBhc3RlKGtleXdvcmRfbGlzdF8xLCBwYXN0ZShjKCJeXFxid2V0ZW5zY2hhcCIsICJeXFxic2NpZW4iLCAgIl5cXGJ1bml2ZXJzaXQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJcXGJkclxcLiIsICJcXGJwcm9mXFwuIiksIGNvbGxhcHNlID0gInwiKSwgY29sbGFwc2UgPSAifCIpDQoNCmF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gka2V5d29yZCA8LSBzdHJfZGV0ZWN0KHRvbG93ZXIoYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCRjb250ZW50KSwga2V5d29yZF9saXN0X2ZpbmFsKQ0KDQojIGJvdGggbmFtZSBhbmQga2V5d29yZCENCmF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gkZmlyc3RfbGFzdF9rZXkgPC0gaWZlbHNlKGF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2gkZmlyc3RfbGFzdF9tZW50aW9uID09IFRSVUUgJiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uX25ld3NfZnVsbF9tYXRjaCRrZXl3b3JkID09IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRkFMU0UpDQoNCmBgYA0KDQpNZXJnZSB0aGUgbmFtZSBtZW50aW9ucyB3aXRoIHRoZSByZXN0IG9mIHRoZSBkYXRhOg0KYGBge3J9DQphdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyA8LSBtZXJnZShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbl9uZXdzX2Z1bGxfbWF0Y2hbYygicHJvZmlsZV9pZCIsICJ1cmwiLCAiaWQiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibGFzdF9uYW1lX21lbnRpb24iLCAiZmlyc3RfbGFzdF9tZW50aW9uIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwidXJsIiwgImlkIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQpgYGANCg0KQ2xhc3NpZnkgbmV3cyBhdHRlbnRpb246DQpgYGB7cn0NCiMgbG9hZCB0aGUgY2xhc3NpZmljYXRpb24gb2JqZWN0cw0Kc291cmNlKCJyZXNvdXJjZXMvYWx0bWV0cmljX25ld3Nfb3V0bGV0X2NsYXNzaWZpY2F0aW9uLlIiKQ0KDQphdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRzb3VyY2VfdHlwZSA8LSBOQQ0KDQphdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRzb3VyY2VfdHlwZSA8LSBpZmVsc2UoYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkYXV0aG9yX25hbWUgJWluJSBhdHRfbmV3c19hZ2dyZWdhdG9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2FnZ3JlZ2F0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlKQ0KDQphdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRzb3VyY2VfdHlwZSA8LSBpZmVsc2UoYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkYXV0aG9yX25hbWUgJWluJSBhdHRfbmV3c19zY2lfYWdncmVnYXRvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2NpX25ld3NfYWdncmVnYXRvciIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUpDQoNCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRhdXRob3JfbmFtZSAlaW4lIGF0dF9uZXdzX2ZpbmFuY2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImZpbmFuY2VfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUpDQoNCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRhdXRob3JfbmFtZSAlaW4lIGF0dF9uZXdzX2dlbmVyYWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdlbmVyYWxfaW50ZXJlc3RfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUpDQoNCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRhdXRob3JfbmFtZSAlaW4lIGF0dF9uZXdzX2dlbmVyYWxfbG9jYWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUpDQoNCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRhdXRob3JfbmFtZSAlaW4lIGF0dF9uZXdzX21lZGljYWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1lZGljYWxfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUpDQoNCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRhdXRob3JfbmFtZSAlaW4lIGF0dF9uZXdzX3BvcF9zY2ksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBvcHNjaV9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRzb3VyY2VfdHlwZSkNCg0KYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUgPC0gaWZlbHNlKGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJGF1dGhvcl9uYW1lICVpbiUgYXR0X25ld3Nfc2NpX3BvcnRhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2NpZW5jZV9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRzb3VyY2VfdHlwZSkNCg0KIyBpZiBub3RoaW5nIHlldCwgY2hlY2sgZm9yIGJsb2dzDQpibG9nX25hbWVzIDwtIHVuaXF1ZShhdHRlbnRpb25fYmxvZ3MkYXV0aG9yX25hbWUpDQoNCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZSgoaXMubmEoYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkc291cmNlX3R5cGUpICYgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkYXV0aG9yX25hbWUgJWluJSBibG9nX25hbWVzKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib25saW5lX2Jsb2ciLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlKQ0KDQojIGlmIG5vdGhpbmcgeWV0LCBzZXQgYXMgb3RoZXINCmF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlIDwtIGlmZWxzZShpcy5uYShhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyRzb3VyY2VfdHlwZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm90aGVyX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzJHNvdXJjZV90eXBlKQ0KDQpgYGANCg0KV3JpdGUgdGhpcyBvdXQgaW50byB0aGUgZGF0YWJhc2U6DQpgYGB7cn0NCmRiV3JpdGVUYWJsZShjb24sICJhbHRtZXRyaWNfYXR0X3ByZXBhcmVkIiwgYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMpDQpgYGANCg0KDQpDb21waWxlIHRoZSBhdHRlbnRpb24gcGVyIHByb2Zlc3NvciBwZXIgeWVhcjoNCmBgYHtyfQ0KIyBnZXQgYSB5ZWFyIGZyb20gdGhlICJwb3N0ZWQgb24iIHN0cmluZw0KYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkeWVhciA8LSB5ZWFyKGFzX2RhdGUoYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMkcG9zdGVkX29uKSkNCg0KcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmUgPC0gYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMgJT4lDQogIGZpbHRlcih5ZWFyID49IDIwMTEgJiB5ZWFyIDw9IDIwMjMpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlLCB5ZWFyKSU+JQ0KICBzdW1tYXJpc2UoYWx0X2F0dG4gPSBuKCkpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgc291cmNlX3R5cGUsIHllYXIpJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBzb3VyY2VfdHlwZSwgdmFsdWVzX2Zyb20gPSBjKGFsdF9hdHRuKSklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKQ0KDQpjb2xuYW1lcyhwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZSlbLWMoMToyKV0gPC0gcGFzdGUwKCJhbHRfIiwgY29sbmFtZXMocHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmUpWy1jKDE6MildKQ0KYGBgDQoNCkRvIHRoZSBzYW1lLCBidXQgZGVkdXBsaWNhdGluZyBtdWx0aXBsZSBwYXBlciBtZW50aW9ucyBpbiBzaW5nbGUgbmV3cyBhcnRpY2xlczoNCmBgYHtyfQ0KcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfZGVkdXBlIDwtIGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzICU+JQ0KICBmaWx0ZXIoeWVhciA+PSAyMDExICYgeWVhciA8PSAyMDIzKSU+JQ0KICBkaXN0aW5jdChwcm9maWxlX2lkLCB1cmwsIHRpdGxlLCBwb3N0ZWRfb24sIGF1dGhvcl9uYW1lLC5rZWVwX2FsbCA9IFRSVUUpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlLCB5ZWFyKSU+JQ0KICBzdW1tYXJpc2UoYWx0X2F0dG4gPSBuKCkpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgc291cmNlX3R5cGUsIHllYXIpJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBzb3VyY2VfdHlwZSwgdmFsdWVzX2Zyb20gPSBjKGFsdF9hdHRuKSklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKQ0KDQpjb2xuYW1lcyhwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9kZWR1cGUpWy1jKDE6MildIDwtIHBhc3RlMCgiYWx0X2RlZF8iLCBjb2xuYW1lcyhwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9kZWR1cGUpWy1jKDE6MildKQ0KDQojIHJlYXJyYW5nZSB0byBtYXRjaCB0aGUgY29sdW1uIG9yZGVyIG9mIHRoZSBvdGhlciBkYXRhZnJhbWUgYWJvdmUNCnByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2RlZHVwZSA8LSBwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9kZWR1cGVbYygicHJvZmlsZV9pZCIsICJ5ZWFyIiwgImFsdF9kZWRfbmV3c19hZ2dyZWdhdG9yIiwgImFsdF9kZWRfb25saW5lX2Jsb2ciLCAiYWx0X2RlZF9zY2lfbmV3c19hZ2dyZWdhdG9yIiAsICJhbHRfZGVkX2ZpbmFuY2VfbmV3cyIgLCAiYWx0X2RlZF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLCAiYWx0X2RlZF9nZW5lcmFsX2ludGVyZXN0X25ld3MiLCAiYWx0X2RlZF9tZWRpY2FsX25ld3MiLCAiYWx0X2RlZF9vdGhlcl9uZXdzIiwgImFsdF9kZWRfcG9wc2NpX25ld3MiLCAiYWx0X2RlZF9zY2llbmNlX25ld3MiKV0NCmBgYA0KDQpEbyB0aGUgc2FtZSBvbmx5IGZvciB0aG9zZSB3aGVyZSB3ZSBoYXZlIG5hbWVzIGxhc3QgaW5jbHVkZWQ6DQpgYGB7cn0NCnByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX25hbWVzIDwtIGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzX25hbWVzICU+JQ0KICBmaWx0ZXIoeWVhciA+PSAyMDExICYgeWVhciA8PSAyMDIzICYgbGFzdF9uYW1lX21lbnRpb24gPT0gVFJVRSklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgc291cmNlX3R5cGUsIHllYXIpJT4lDQogIHN1bW1hcmlzZShhbHRfYXR0biA9IG4oKSklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCBzb3VyY2VfdHlwZSwgeWVhciklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IHNvdXJjZV90eXBlLCB2YWx1ZXNfZnJvbSA9IGMoYWx0X2F0dG4pKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIpDQoNCmNvbG5hbWVzKHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX25hbWVzKVstYygxOjIpXSA8LSBwYXN0ZTAoImFsdF9uYW1lXyIsIGNvbG5hbWVzKHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX25hbWVzKVstYygxOjIpXSkNCg0KIyByZWFycmFuZ2UgdG8gbWF0Y2ggdGhlIGNvbHVtbiBvcmRlciBvZiB0aGUgb3RoZXIgZGF0YWZyYW1lIGFib3ZlDQpwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9uYW1lcyA8LSBwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9uYW1lc1tjKCJwcm9maWxlX2lkIiwgInllYXIiLCAiYWx0X25hbWVfbmV3c19hZ2dyZWdhdG9yIiwgImFsdF9uYW1lX29ubGluZV9ibG9nIiwgImFsdF9uYW1lX3NjaV9uZXdzX2FnZ3JlZ2F0b3IiICwgImFsdF9uYW1lX2ZpbmFuY2VfbmV3cyIgLCAiYWx0X25hbWVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwgImFsdF9uYW1lX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICJhbHRfbmFtZV9tZWRpY2FsX25ld3MiLCAiYWx0X25hbWVfb3RoZXJfbmV3cyIsICJhbHRfbmFtZV9wb3BzY2lfbmV3cyIsICJhbHRfbmFtZV9zY2llbmNlX25ld3MiKV0NCmBgYA0KDQpBbmQgZm9yIHRoZSBmdWxsIG5hbWUgaW5jbHVkZWQ6DQpgYGB7cn0NCnByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2Z1bGxfbmFtZXMgPC0gYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMgJT4lDQogIGZpbHRlcih5ZWFyID49IDIwMTEgJiB5ZWFyIDw9IDIwMjMgJiBmaXJzdF9sYXN0X21lbnRpb24gPT0gVFJVRSklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgc291cmNlX3R5cGUsIHllYXIpJT4lDQogIHN1bW1hcmlzZShhbHRfYXR0biA9IG4oKSklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCBzb3VyY2VfdHlwZSwgeWVhciklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IHNvdXJjZV90eXBlLCB2YWx1ZXNfZnJvbSA9IGMoYWx0X2F0dG4pKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIpDQoNCmNvbG5hbWVzKHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2Z1bGxfbmFtZXMpWy1jKDE6MildIDwtIHBhc3RlMCgiYWx0X2ZuYW1lXyIsIGNvbG5hbWVzKHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2Z1bGxfbmFtZXMpWy1jKDE6MildKQ0KDQojIHJlYXJyYW5nZSB0byBtYXRjaCB0aGUgY29sdW1uIG9yZGVyIG9mIHRoZSBvdGhlciBkYXRhZnJhbWUgYWJvdmUNCnByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2Z1bGxfbmFtZXMgPC0gcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfZnVsbF9uYW1lc1tjKCJwcm9maWxlX2lkIiwgInllYXIiLCAiYWx0X2ZuYW1lX25ld3NfYWdncmVnYXRvciIsICJhbHRfZm5hbWVfb25saW5lX2Jsb2ciLCAiYWx0X2ZuYW1lX3NjaV9uZXdzX2FnZ3JlZ2F0b3IiICwgImFsdF9mbmFtZV9maW5hbmNlX25ld3MiICwgImFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLCAiYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICJhbHRfZm5hbWVfbWVkaWNhbF9uZXdzIiwgImFsdF9mbmFtZV9vdGhlcl9uZXdzIiwgImFsdF9mbmFtZV9wb3BzY2lfbmV3cyIsICJhbHRfZm5hbWVfc2NpZW5jZV9uZXdzIildDQpgYGANCg0KQW5kIG5vdyBvbmx5IGZvciBzaW5nbGUtYXV0aG9yZWQgcGFwZXJzOg0KYGBge3J9DQpwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9zaW5nbGVfYXUgPC0gYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMgJT4lDQogIGZpbHRlcih5ZWFyID49IDIwMTEgJiB5ZWFyIDw9IDIwMjMgJiBpZCAlaW4lIG9hX3Byb2ZfcHVic191bmlxdWVfc2luZ2xlX2F1JGlkKSU+JQ0KICBkaXN0aW5jdChwcm9maWxlX2lkLCB1cmwsIHRpdGxlLCBwb3N0ZWRfb24sIGF1dGhvcl9uYW1lLC5rZWVwX2FsbCA9IFRSVUUpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlLCB5ZWFyKSU+JQ0KICBzdW1tYXJpc2UoYWx0X2F0dG4gPSBuKCkpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgc291cmNlX3R5cGUsIHllYXIpJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBzb3VyY2VfdHlwZSwgdmFsdWVzX2Zyb20gPSBjKGFsdF9hdHRuKSklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKQ0KDQpjb2xuYW1lcyhwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9zaW5nbGVfYXUpWy1jKDE6MildIDwtIHBhc3RlMCgiYWx0X3NpbmdsZV8iLCBjb2xuYW1lcyhwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9zaW5nbGVfYXUpWy1jKDE6MildKQ0KDQpwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9zaW5nbGVfYXUgPC0gcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfc2luZ2xlX2F1W2MoInByb2ZpbGVfaWQiLCAieWVhciIsICJhbHRfc2luZ2xlX25ld3NfYWdncmVnYXRvciIsICJhbHRfc2luZ2xlX29ubGluZV9ibG9nIiwgImFsdF9zaW5nbGVfc2NpX25ld3NfYWdncmVnYXRvciIgLCAiYWx0X3NpbmdsZV9maW5hbmNlX25ld3MiICwgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzIiwgImFsdF9zaW5nbGVfbWVkaWNhbF9uZXdzIiwgImFsdF9zaW5nbGVfb3RoZXJfbmV3cyIsICJhbHRfc2luZ2xlX3BvcHNjaV9uZXdzIiwgImFsdF9zaW5nbGVfc2NpZW5jZV9uZXdzIildDQpgYGANCg0KQW5kIGZvciBkdXRjaCBtZW50aW9ucyBvbmx5Og0KYGBge3J9DQpwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9kdXRjaCA8LSBhdHRlbnRpb25fbmV3c19ibG9nc19wcm9mc19uYW1lcyAlPiUNCiAgZmlsdGVyKHllYXIgPj0gMjAxMSAmIHllYXIgPD0gMjAyMyAmIGxhbmcgPT0gIm5sIiklPiUNCiAgZGlzdGluY3QocHJvZmlsZV9pZCwgdXJsLCB0aXRsZSwgcG9zdGVkX29uLCBhdXRob3JfbmFtZSwua2VlcF9hbGwgPSBUUlVFKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCBzb3VyY2VfdHlwZSwgeWVhciklPiUNCiAgc3VtbWFyaXNlKGFsdF9hdHRuID0gbigpKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlLCB5ZWFyKSU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gc291cmNlX3R5cGUsIHZhbHVlc19mcm9tID0gYyhhbHRfYXR0bikpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhcikNCg0KY29sbmFtZXMocHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfZHV0Y2gpWy1jKDE6MildIDwtIHBhc3RlMCgiYWx0X2R1dGNoXyIsIGNvbG5hbWVzKHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2R1dGNoKVstYygxOjIpXSkNCg0KcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfZHV0Y2gkYWx0X2R1dGNoX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3cyA8LSAwDQoNCnByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2R1dGNoIDwtIHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2R1dGNoW2MoInByb2ZpbGVfaWQiLCAieWVhciIsICJhbHRfZHV0Y2hfbmV3c19hZ2dyZWdhdG9yIiwgImFsdF9kdXRjaF9vbmxpbmVfYmxvZyIsICJhbHRfZHV0Y2hfc2NpX25ld3NfYWdncmVnYXRvciIgLCAiYWx0X2R1dGNoX2ZpbmFuY2VfbmV3cyIgLCAiYWx0X2R1dGNoX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3cyIsICJhbHRfZHV0Y2hfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzIiwgImFsdF9kdXRjaF9tZWRpY2FsX25ld3MiLCAiYWx0X2R1dGNoX290aGVyX25ld3MiLCAiYWx0X2R1dGNoX3BvcHNjaV9uZXdzIiwgImFsdF9kdXRjaF9zY2llbmNlX25ld3MiKV0NCmBgYA0KDQoNCk1lcmdlIHRoZSBhdHRlbnRpb24gd2l0aCB0aGUgcmVzdDogDQpgYGB7cn0NCnByb2ZfeWVhcl9wX2NfZ19hIDwtIG1lcmdlKHByb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCnByb2ZfeWVhcl9wX2NfZ19hIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfZGVkdXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCg0KcHJvZl95ZWFyX3BfY19nX2EgPC0gbWVyZ2UocHJvZl95ZWFyX3BfY19nX2EsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX3llYXJfYXR0ZW50aW9uX29ubGluZV9zaW5nbGVfYXUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQoNCnByb2ZfeWVhcl9wX2NfZ19hIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl95ZWFyX2F0dGVudGlvbl9vbmxpbmVfbmFtZXMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSA8LSBtZXJnZShwcm9mX3llYXJfcF9jX2dfYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2Z1bGxfbmFtZXMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSA8LSBtZXJnZShwcm9mX3llYXJfcF9jX2dfYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfeWVhcl9hdHRlbnRpb25fb25saW5lX2R1dGNoLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCg0KDQojIGdldCB0aGUgY3VtdWxhdGl2ZXMNCiMgQXMgQWx0bWV0cmljIGRhdGEgZ29lcyBiYWNrIHRvIDIwMTEgaW4gcHJpbmNpcGxlLCBzZXQgYXR0ZW50aW9uIHRvIDAgaWYgeWVhciA+PSAyMDExLCBsZWF2ZSBhcyBOQQ0KIyBvdGhlcndpc2U6DQpwcm9mX3llYXJfcF9jX2dfYSA8LSBwcm9mX3llYXJfcF9jX2dfYSAlPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKSU+JQ0KICBtdXRhdGVfYXQodmFycyhjb250YWlucygnYWx0XycpKSwgfmlmZWxzZShpcy5uYSguKSwgMCwgLikpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQpJT4lDQogIG11dGF0ZShhY3Jvc3MoYWx0X25ld3NfYWdncmVnYXRvcjphbHRfZHV0Y2hfc2NpZW5jZV9uZXdzLCB+Y3Vtc3VtKC54KSwgLm5hbWVzID0gIntjb2x9X3RvdGFsIikpJT4lDQogIG11dGF0ZV9hdCh2YXJzKGNvbnRhaW5zKCdhbHRfJykpLCB+aWZlbHNlKC4gPT0gMCAmIHllYXIgPCAyMDExLCBOQSwgLikpDQpgYGANCg0KQ29tYmluZSB0aGlzIHdpdGggVHdpdHRlciBhdHRlbnRpb24sIHdoaWNoIHdlIG9ubHkgb2J0YWluIHVzaW5nIE9SQ0lEcyAoZm9yIG5vdykuDQpgYGB7cn0NCnR3aXR0ZXJfb3JjaWRfYXR0ZW50aW9uIDwtIGRiR2V0UXVlcnkoY29uLCBzdGF0ZW1lbnQgPSAic2VsZWN0ICogZnJvbSBhbHRtZXRyaWNfcHJvZl9hdHRlbnRpb24gd2hlcmUgXCJtZW50aW9uX3R5cGVcIj0ndHdlZXQnIikNCg0KIyByZW5hbWUgdGhlIGNvbHVtbnMgYW5kIGdldCBjdW11bGF0aXZlcw0KdHdpdHRlcl9vcmNpZF9hdHRlbnRpb24gPC0gdHdpdHRlcl9vcmNpZF9hdHRlbnRpb24gJT4lDQogIHNlbGVjdChwcm9maWxlX2lkLCB5ZWFyLCB5ZWFybHlfY291bnQpDQoNCmNvbG5hbWVzKHR3aXR0ZXJfb3JjaWRfYXR0ZW50aW9uKVt3aGljaChjb2xuYW1lcyh0d2l0dGVyX29yY2lkX2F0dGVudGlvbikgPT0gInllYXJseV9jb3VudCIpXSA8LSAiYWx0X3R3aXR0ZXIiDQoNCg0KcHJvZl95ZWFyX3BfY19nX2EgPC0gbWVyZ2UocHJvZl95ZWFyX3BfY19nX2EsDQogICAgICAgICAgICAgICAgICAgICAgICAgICB0d2l0dGVyX29yY2lkX2F0dGVudGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCnByb2ZfeWVhcl9wX2NfZ19hIDwtIHByb2ZfeWVhcl9wX2NfZ19hICU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIpJT4lDQogIG11dGF0ZV9hdCh2YXJzKGNvbnRhaW5zKCd0d2l0dGVyJykpLCB+aWZlbHNlKGlzLm5hKC4pLCAwLCAuKSklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgbXV0YXRlKGFjcm9zcyhhbHRfdHdpdHRlciwgfmN1bXN1bSgueCksIC5uYW1lcyA9ICJ7Y29sfV90b3RhbCIpKSU+JQ0KICBtdXRhdGVfYXQodmFycyhjb250YWlucygndHdpdHRlcicpKSwgfmlmZWxzZSguID09IDAgJiB5ZWFyIDwgMjAxMSwgTkEsIC4pKQ0KYGBgDQoNCkdldCB0b3RhbCBhbHRtZXRyaWNzIGFzIHdlbGwgYXMgdG90YWxzIG9mICJnZW5lcmFsIGludGVyZXN0IiBvdXRsZXRzOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2FsbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKCJhbHRfbmV3c19hZ2dyZWdhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9vbmxpbmVfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2NpX25ld3NfYWdncmVnYXRvciIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZmluYW5jZV9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbWVkaWNhbF9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9vdGhlcl9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9wb3BzY2lfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2NpZW5jZV9uZXdzIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2RlZF9hbGwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygiYWx0X2RlZF9uZXdzX2FnZ3JlZ2F0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kZWRfb25saW5lX2Jsb2ciLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kZWRfc2NpX25ld3NfYWdncmVnYXRvciIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9maW5hbmNlX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kZWRfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZGVkX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9tZWRpY2FsX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kZWRfb3RoZXJfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9wb3BzY2lfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9zY2llbmNlX25ld3MiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfbmFtZV9hbGwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygiYWx0X25hbWVfbmV3c19hZ2dyZWdhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfb25saW5lX2Jsb2ciLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9zY2lfbmV3c19hZ2dyZWdhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfZmluYW5jZV9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzIiwgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfbWVkaWNhbF9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfb3RoZXJfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9uYW1lX3BvcHNjaV9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfc2NpZW5jZV9uZXdzIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2ZuYW1lX2FsbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKCJhbHRfZm5hbWVfbmV3c19hZ2dyZWdhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9vbmxpbmVfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZm5hbWVfc2NpX25ld3NfYWdncmVnYXRvciIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZm5hbWVfZmluYW5jZV9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZm5hbWVfbWVkaWNhbF9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9vdGhlcl9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9wb3BzY2lfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZm5hbWVfc2NpZW5jZV9uZXdzIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX3NpbmdsZV9hbGwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygiYWx0X3NpbmdsZV9uZXdzX2FnZ3JlZ2F0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zaW5nbGVfb25saW5lX2Jsb2ciLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zaW5nbGVfc2NpX25ld3NfYWdncmVnYXRvciIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9maW5hbmNlX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2luZ2xlX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9tZWRpY2FsX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zaW5nbGVfb3RoZXJfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9wb3BzY2lfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9zY2llbmNlX25ld3MiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfZHV0Y2hfYWxsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoImFsdF9kdXRjaF9uZXdzX2FnZ3JlZ2F0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9vbmxpbmVfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX3NjaV9uZXdzX2FnZ3JlZ2F0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9maW5hbmNlX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9nZW5lcmFsX2ludGVyZXN0X25ld3MiLCAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9tZWRpY2FsX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9vdGhlcl9uZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZHV0Y2hfcG9wc2NpX25ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9zY2llbmNlX25ld3MiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoImFsdF9uZXdzX2FnZ3JlZ2F0b3JfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X29ubGluZV9ibG9nX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zY2lfbmV3c19hZ2dyZWdhdG9yX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9maW5hbmNlX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsIiwgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9tZWRpY2FsX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X290aGVyX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3BvcHNjaV9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zY2llbmNlX25ld3NfdG90YWwiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfZGVkX2FsbF90b3RhbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKCJhbHRfZGVkX25ld3NfYWdncmVnYXRvcl90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9vbmxpbmVfYmxvZ190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9zY2lfbmV3c19hZ2dyZWdhdG9yX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZGVkX2ZpbmFuY2VfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kZWRfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsIiwgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZGVkX21lZGljYWxfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2RlZF9vdGhlcl9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZGVkX3BvcHNjaV9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZGVkX3NjaWVuY2VfbmV3c190b3RhbCIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9uYW1lX2FsbF90b3RhbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKCJhbHRfbmFtZV9uZXdzX2FnZ3JlZ2F0b3JfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9vbmxpbmVfYmxvZ190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9uYW1lX3NjaV9uZXdzX2FnZ3JlZ2F0b3JfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9maW5hbmNlX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9nZW5lcmFsX2ludGVyZXN0X25ld3NfdG90YWwiLCAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9tZWRpY2FsX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9vdGhlcl9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X25hbWVfcG9wc2NpX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfbmFtZV9zY2llbmNlX25ld3NfdG90YWwiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfZm5hbWVfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoImFsdF9mbmFtZV9uZXdzX2FnZ3JlZ2F0b3JfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2ZuYW1lX29ubGluZV9ibG9nX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9zY2lfbmV3c19hZ2dyZWdhdG9yX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9maW5hbmNlX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZm5hbWVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsIiwgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9tZWRpY2FsX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2ZuYW1lX290aGVyX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2ZuYW1lX3BvcHNjaV9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9mbmFtZV9zY2llbmNlX25ld3NfdG90YWwiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfc2luZ2xlX2FsbF90b3RhbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKCJhbHRfc2luZ2xlX25ld3NfYWdncmVnYXRvcl90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9vbmxpbmVfYmxvZ190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9zY2lfbmV3c19hZ2dyZWdhdG9yX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2luZ2xlX2ZpbmFuY2VfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsIiwgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2luZ2xlX21lZGljYWxfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X3NpbmdsZV9vdGhlcl9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2luZ2xlX3BvcHNjaV9uZXdzX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfc2luZ2xlX3NjaWVuY2VfbmV3c190b3RhbCIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9kdXRjaF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygiYWx0X2R1dGNoX25ld3NfYWdncmVnYXRvcl90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX29ubGluZV9ibG9nX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhbHRfZHV0Y2hfc2NpX25ld3NfYWdncmVnYXRvcl90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX2ZpbmFuY2VfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX2dlbmVyYWxfaW50ZXJlc3RfbmV3c190b3RhbCIsICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX21lZGljYWxfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX290aGVyX25ld3NfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsdF9kdXRjaF9wb3BzY2lfbmV3c190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWx0X2R1dGNoX3NjaWVuY2VfbmV3c190b3RhbCIpXSkNCg0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2dlbmVyYWxfYWxsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoDQogICJhbHRfZmluYW5jZV9uZXdzIiwNCiAgImFsdF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLA0KICAiYWx0X2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICANCiAgImFsdF9wb3BzY2lfbmV3cyIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9nZW5lcmFsX2RlZF9hbGwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygNCiAgImFsdF9kZWRfZmluYW5jZV9uZXdzIiwNCiAgImFsdF9kZWRfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwNCiAgImFsdF9kZWRfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzIiwgICAgICAgDQogICJhbHRfZGVkX3BvcHNjaV9uZXdzIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2dlbmVyYWxfbmFtZV9hbGwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygNCiAgImFsdF9uYW1lX2ZpbmFuY2VfbmV3cyIsDQogICJhbHRfbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLA0KICAiYWx0X25hbWVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzIiwgICAgICAgDQogICJhbHRfbmFtZV9wb3BzY2lfbmV3cyIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9nZW5lcmFsX2ZuYW1lX2FsbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKA0KICAiYWx0X2ZuYW1lX2ZpbmFuY2VfbmV3cyIsDQogICJhbHRfZm5hbWVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwNCiAgImFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X25ld3MiLCAgICAgICANCiAgImFsdF9mbmFtZV9wb3BzY2lfbmV3cyIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9nZW5lcmFsX3NpbmdsZV9hbGwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygNCiAgImFsdF9zaW5nbGVfZmluYW5jZV9uZXdzIiwNCiAgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzIiwNCiAgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzIiwgICAgICAgDQogICJhbHRfc2luZ2xlX3BvcHNjaV9uZXdzIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2dlbmVyYWxfZHV0Y2hfYWxsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoDQogICJhbHRfZHV0Y2hfZmluYW5jZV9uZXdzIiwNCiAgImFsdF9kdXRjaF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MiLA0KICAiYWx0X2R1dGNoX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyIsICAgICAgIA0KICAiYWx0X2R1dGNoX3BvcHNjaV9uZXdzIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2dlbmVyYWxfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoDQogICJhbHRfZmluYW5jZV9uZXdzX3RvdGFsIiwNCiAgImFsdF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWwiLA0KICAiYWx0X2dlbmVyYWxfaW50ZXJlc3RfbmV3c190b3RhbCIsICAgICAgICAgICAgDQogICJhbHRfcG9wc2NpX25ld3NfdG90YWwiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfZ2VuZXJhbF9kZWRfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoDQogICJhbHRfZGVkX2ZpbmFuY2VfbmV3c190b3RhbCIsDQogICJhbHRfZGVkX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbCIsDQogICJhbHRfZGVkX2dlbmVyYWxfaW50ZXJlc3RfbmV3c190b3RhbCIsICANCiAgImFsdF9kZWRfcG9wc2NpX25ld3NfdG90YWwiKV0pDQoNCnByb2ZfeWVhcl9wX2NfZ19hJGFsdF9vbmxpbmVfZ2VuZXJhbF9uYW1lX2FsbF90b3RhbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKA0KICAiYWx0X25hbWVfZmluYW5jZV9uZXdzX3RvdGFsIiwNCiAgImFsdF9uYW1lX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbCIsDQogICJhbHRfbmFtZV9nZW5lcmFsX2ludGVyZXN0X25ld3NfdG90YWwiLCAgDQogICJhbHRfbmFtZV9wb3BzY2lfbmV3c190b3RhbCIpXSkNCg0KDQpwcm9mX3llYXJfcF9jX2dfYSRhbHRfb25saW5lX2dlbmVyYWxfZm5hbWVfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl95ZWFyX3BfY19nX2FbLGMoDQogICJhbHRfZm5hbWVfZmluYW5jZV9uZXdzX3RvdGFsIiwNCiAgImFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWwiLA0KICAiYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfbmV3c190b3RhbCIsICANCiAgImFsdF9mbmFtZV9wb3BzY2lfbmV3c190b3RhbCIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9nZW5lcmFsX3NpbmdsZV9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX3llYXJfcF9jX2dfYVssYygNCiAgImFsdF9zaW5nbGVfZmluYW5jZV9uZXdzX3RvdGFsIiwNCiAgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzX3RvdGFsIiwNCiAgImFsdF9zaW5nbGVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsIiwgIA0KICAiYWx0X3NpbmdsZV9wb3BzY2lfbmV3c190b3RhbCIpXSkNCg0KcHJvZl95ZWFyX3BfY19nX2EkYWx0X29ubGluZV9nZW5lcmFsX2R1dGNoX2FsbF90b3RhbCA8LSByb3dTdW1zKHByb2ZfeWVhcl9wX2NfZ19hWyxjKA0KICAiYWx0X2R1dGNoX2ZpbmFuY2VfbmV3c190b3RhbCIsDQogICJhbHRfZHV0Y2hfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzX3RvdGFsIiwNCiAgImFsdF9kdXRjaF9nZW5lcmFsX2ludGVyZXN0X25ld3NfdG90YWwiLCAgDQogICJhbHRfZHV0Y2hfcG9wc2NpX25ld3NfdG90YWwiKV0pDQpgYGANCg0KV3JpdGUgdGhpcyBvdXQ6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3llYXJfcF9jX2dfYSwgInBhbmVsX2RhdGFzZXRzL3Byb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHNfYWx0LmNzdiIpDQpgYGANCg0KDQpDbGVhciB0aGUgbWVtb3J5LCByZW1vdmUgc29tZSByZWR1bmRhbnQgb2JqZWN0czoNCmBgYHtyfQ0Kcm0odHdpdHRlcl9vcmNpZF9hdHRlbnRpb24pDQpybShhdHRlbnRpb25fYmxvZ3MpDQpybShhdHRlbnRpb25fYmxvZ3NfcHJvZnMpDQpybShhdHRlbnRpb25fbmV3cykNCnJtKGF0dGVudGlvbl9uZXdzX2Jsb2dzX3Byb2ZzKQ0Kcm0oYXR0ZW50aW9uX25ld3NfYmxvZ3NfcHJvZnNfbmFtZXMpDQpybShsYXRlc3RfY2l0YXRpb24pDQpnYygpDQpgYGANCg0KDQojIFByaW50ZWQgbmV3cyBhdHRlbnRpb24NCg0KTG9hZCB0aGUgTGV4aXNOZXhpcyBhcnRpY2xlczoNCmBgYHtyfQ0KbGV4aXNfZGF0YSA8LSBkYlJlYWRUYWJsZShjb24sICJsZXhpc19uZXhpc19tZW50aW9ucyIpDQpgYGANCg0KTm93LCBhZ2dyZWdhdGUgcHJvZmVzc29yIG1lbnRpb25zIHBlciB5ZWFyIGFuZCBwZXIgc291cmNlLCB3aGVyZXZlciByZWxldmFudDoNCmBgYHtyfQ0KIyBjb21iaW5lIHNvdXJjZXMgZm9yIGVhc2llciBoYW5kbGluZzoNCnByb2ZfbmV3c195ZWFyIDwtIGxleGlzX2RhdGEgJT4lDQogIGZpbHRlcighaXMubmEoeWVhcikgJiB5ZWFyID49IDE5NzMgJiB5ZWFyIDw9IDIwMjMpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgeWVhciwgc291cmNlX3R5cGUpJT4lDQogIHN1bW1hcmlzZShuID0gbigpKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIsIHNvdXJjZV90eXBlKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCBzb3VyY2VfdHlwZSklPiUNCiAgbXV0YXRlKGN1bXN1bSA9IGN1bXN1bShuKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IHNvdXJjZV90eXBlLCB2YWx1ZXNfZnJvbSA9IGMobiwgY3Vtc3VtKSklPiUNCiAgZmlsbChjdW1zdW1fbmF0aW9uYWxfbmw6Y3Vtc3VtX2hpZ2hfcHJvZl9pbnRsKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKQ0KDQpwcm9mX25ld3NfeWVhciA8LSBwcm9mX25ld3NfeWVhcltjKCJwcm9maWxlX2lkIiwgInllYXIiLCAibl9uYXRpb25hbF9ubCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9uZXdzX2FnZ3IiLCAibl9maW5hbmNlIiwgIm5fb3RoZXIiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5fcmVnaW9uYWxfbmwiLCAibl9zY2llbmNlIiwgIm5fcHJvZiIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9sb2NhbF9pbnQiLCAibl91bmtub3duIiwgIm5faGlnaF9wcm9mX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9vdGhlcl9pbnQiLCAibl9ibG9nIiwgImN1bXN1bV9uYXRpb25hbF9ubCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX25ld3NfYWdnciIsICJjdW1zdW1fZmluYW5jZSIsICJjdW1zdW1fb3RoZXIiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImN1bXN1bV9yZWdpb25hbF9ubCIsICJjdW1zdW1fc2NpZW5jZSIsICJjdW1zdW1fcHJvZiIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX2xvY2FsX2ludCIsICJjdW1zdW1fdW5rbm93biIsICJjdW1zdW1faGlnaF9wcm9mX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX290aGVyX2ludCIsICJjdW1zdW1fYmxvZyIgKV0NCg0KIyB0aWR5IHVwIHRoZSBjb2x1bW5zDQpjb2xuYW1lcyhwcm9mX25ld3NfeWVhcilbMzoyNl0gPC0gYygibmV3c19uYXRpb25hbCIsICJuZXdzX2FnZ3IiLCAibmV3c19maW5hbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX290aGVyIiwgIm5ld3NfcmVnaW9uYWwiLCAibmV3c19zY2llbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3Byb2Zlc3Npb25hbCIsICJuZXdzX2xvY2FsX2ludGwiLCAibmV3c191bmtub3duIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2ludGwiLCAibmV3c19pbnRsX290aGVyIiwgIm5ld3NfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19uYXRpb25hbF90b3RhbCIsICJuZXdzX2FnZ3JfdG90YWwiLCAibmV3c19maW5hbmNlX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX290aGVyX3RvdGFsIiwgIm5ld3NfcmVnaW9uYWxfdG90YWwiLCAibmV3c19zY2llbmNlX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3Byb2Zlc3Npb25hbF90b3RhbCIsICJuZXdzX2xvY2FsX2ludGxfdG90YWwiLCAibmV3c191bmtub3duX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2ludGxfdG90YWwiLCAibmV3c19pbnRsX290aGVyX3RvdGFsIiwgIm5ld3NfYmxvZ190b3RhbCIpDQoNCiMgYWRkIHRvdGFsIGNvdW50cw0KcHJvZl9uZXdzX3llYXIkbmV3c19hbGwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhclszOjE0XSkNCnByb2ZfbmV3c195ZWFyJG5ld3NfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl9uZXdzX3llYXJbMTU6MjZdKQ0KICAgDQojIGFkZCBnZW5lcmFsIGludGVyZXN0IGNvdW50cw0KcHJvZl9uZXdzX3llYXIkbmV3c19nZW5lcmFsX2FsbCA8LSByb3dTdW1zKHByb2ZfbmV3c195ZWFyW2MoIm5ld3NfbmF0aW9uYWwiLCAibmV3c19yZWdpb25hbCIsICJuZXdzX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfbG9jYWxfaW50bCIsICJuZXdzX2ludGxfb3RoZXIiKV0pDQoNCnByb2ZfbmV3c195ZWFyJG5ld3NfZ2VuZXJhbF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcltjKCJuZXdzX25hdGlvbmFsX3RvdGFsIiwgIm5ld3NfcmVnaW9uYWxfdG90YWwiLCAibmV3c19pbnRsX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2xvY2FsX2ludGxfdG90YWwiLCAibmV3c19pbnRsX290aGVyX3RvdGFsIildKQ0KICAgDQojIHJlYXJyYW5nZSBhIGJpdA0KcHJvZl9uZXdzX3llYXIgPC0gcHJvZl9uZXdzX3llYXIgJT4lDQogIHNlbGVjdChwcm9maWxlX2lkLCB5ZWFyLCBuZXdzX25hdGlvbmFsLCBuZXdzX3JlZ2lvbmFsLCBuZXdzX2ludGwsIG5ld3NfbG9jYWxfaW50bCwNCiAgICAgICAgIG5ld3NfaW50bF9vdGhlciwgbmV3c19nZW5lcmFsX2FsbCwgbmV3c19maW5hbmNlLCBuZXdzX3Byb2Zlc3Npb25hbCwgbmV3c19zY2llbmNlLCBuZXdzX2Jsb2csDQogICAgICAgICBuZXdzX2FnZ3IsIG5ld3NfdW5rbm93biwgbmV3c19vdGhlciwgbmV3c19hbGwsDQogICAgICAgICBuZXdzX25hdGlvbmFsX3RvdGFsLCBuZXdzX3JlZ2lvbmFsX3RvdGFsLCANCiAgICAgICAgIG5ld3NfaW50bF90b3RhbCwgbmV3c19sb2NhbF9pbnRsX3RvdGFsLCBuZXdzX2ludGxfb3RoZXJfdG90YWwsIG5ld3NfZ2VuZXJhbF9hbGxfdG90YWwsIA0KICAgICAgICAgbmV3c19maW5hbmNlX3RvdGFsLCBuZXdzX3Byb2Zlc3Npb25hbF90b3RhbCwgbmV3c19zY2llbmNlX3RvdGFsLCBuZXdzX2Jsb2dfdG90YWwsDQogICAgICAgICBuZXdzX2FnZ3JfdG90YWwsIG5ld3NfdW5rbm93bl90b3RhbCwgbmV3c19vdGhlcl90b3RhbCwgbmV3c19hbGxfdG90YWwpDQpgYGANCg0KRGVkdXBsaWNhdGVkIHJlZ2lvbmFsIG5ld3M6DQpgYGB7cn0NCiMgY29tYmluZSBzb3VyY2VzIGZvciBlYXNpZXIgaGFuZGxpbmc6DQpwcm9mX25ld3NfeWVhcl9kZWQgPC0gbGV4aXNfZGF0YSAlPiUNCiAgZmlsdGVyKCFpcy5uYSh5ZWFyKSAmIHllYXIgPj0gMTk3MyAmIHllYXIgPD0gMjAyMyAmIHJlZ2lvbmFsX2R1cGxpY2F0ZSA9PSBGQUxTRSklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCB5ZWFyLCBzb3VyY2VfdHlwZSklPiUNCiAgc3VtbWFyaXNlKG4gPSBuKCkpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciwgc291cmNlX3R5cGUpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlKSU+JQ0KICBtdXRhdGUoY3Vtc3VtID0gY3Vtc3VtKG4pKSU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gc291cmNlX3R5cGUsIHZhbHVlc19mcm9tID0gYyhuLCBjdW1zdW0pKSU+JQ0KICBmaWxsKGN1bXN1bV9uYXRpb25hbF9ubDpjdW1zdW1faGlnaF9wcm9mX2ludGwpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApDQoNCnByb2ZfbmV3c195ZWFyX2RlZCA8LSBwcm9mX25ld3NfeWVhcl9kZWRbYygicHJvZmlsZV9pZCIsICJ5ZWFyIiwgIm5fbmF0aW9uYWxfbmwiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9uZXdzX2FnZ3IiLCAibl9maW5hbmNlIiwgIm5fb3RoZXIiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9yZWdpb25hbF9ubCIsICJuX3NjaWVuY2UiLCAibl9wcm9mIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5fbG9jYWxfaW50IiwgIm5fdW5rbm93biIsICJuX2hpZ2hfcHJvZl9pbnRsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9vdGhlcl9pbnQiLCAibl9ibG9nIiwgImN1bXN1bV9uYXRpb25hbF9ubCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fbmV3c19hZ2dyIiwgImN1bXN1bV9maW5hbmNlIiwgImN1bXN1bV9vdGhlciIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fcmVnaW9uYWxfbmwiLCAiY3Vtc3VtX3NjaWVuY2UiLCAiY3Vtc3VtX3Byb2YiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX2xvY2FsX2ludCIsICJjdW1zdW1fdW5rbm93biIsICJjdW1zdW1faGlnaF9wcm9mX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fb3RoZXJfaW50IiwgImN1bXN1bV9ibG9nIiApXQ0KDQojIHRpZHkgdXAgdGhlIGNvbHVtbnMNCmNvbG5hbWVzKHByb2ZfbmV3c195ZWFyX2RlZClbMzoyNl0gPC0gYygibmV3c19kZWRfbmF0aW9uYWwiLCAibmV3c19kZWRfYWdnciIsICJuZXdzX2RlZF9maW5hbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9vdGhlciIsICJuZXdzX2RlZF9yZWdpb25hbCIsICJuZXdzX2RlZF9zY2llbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9wcm9mZXNzaW9uYWwiLCAibmV3c19kZWRfbG9jYWxfaW50bCIsICJuZXdzX2RlZF91bmtub3duIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9pbnRsIiwgIm5ld3NfZGVkX2ludGxfb3RoZXIiLCAibmV3c19kZWRfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19kZWRfbmF0aW9uYWxfdG90YWwiLCAibmV3c19kZWRfYWdncl90b3RhbCIsICJuZXdzX2RlZF9maW5hbmNlX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9vdGhlcl90b3RhbCIsICJuZXdzX2RlZF9yZWdpb25hbF90b3RhbCIsICJuZXdzX2RlZF9zY2llbmNlX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9wcm9mZXNzaW9uYWxfdG90YWwiLCAibmV3c19kZWRfbG9jYWxfaW50bF90b3RhbCIsICJuZXdzX2RlZF91bmtub3duX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9pbnRsX3RvdGFsIiwgIm5ld3NfZGVkX2ludGxfb3RoZXJfdG90YWwiLCAibmV3c19kZWRfYmxvZ190b3RhbCIpDQoNCiMgYWRkIHRvdGFsIGNvdW50cw0KcHJvZl9uZXdzX3llYXJfZGVkJG5ld3NfZGVkX2FsbCA8LSByb3dTdW1zKHByb2ZfbmV3c195ZWFyX2RlZFszOjE0XSkNCnByb2ZfbmV3c195ZWFyX2RlZCRuZXdzX2RlZF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9kZWRbMTU6MjZdKQ0KICAgDQojIGFkZCBnZW5lcmFsIGludGVyZXN0IGNvdW50cw0KcHJvZl9uZXdzX3llYXJfZGVkJG5ld3NfZGVkX2dlbmVyYWxfYWxsIDwtIHJvd1N1bXMocHJvZl9uZXdzX3llYXJfZGVkW2MoIm5ld3NfZGVkX25hdGlvbmFsIiwgIm5ld3NfZGVkX3JlZ2lvbmFsIiwgIm5ld3NfZGVkX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2xvY2FsX2ludGwiLCAibmV3c19kZWRfaW50bF9vdGhlciIpXSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KcHJvZl9uZXdzX3llYXJfZGVkJG5ld3NfZGVkX2dlbmVyYWxfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl9uZXdzX3llYXJfZGVkW2MoIm5ld3NfZGVkX25hdGlvbmFsX3RvdGFsIiwgIm5ld3NfZGVkX3JlZ2lvbmFsX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9pbnRsX3RvdGFsIiwgIm5ld3NfZGVkX2xvY2FsX2ludGxfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2ludGxfb3RoZXJfdG90YWwiKV0pDQogICANCiMgcmVhcnJhbmdlIGEgYml0DQpwcm9mX25ld3NfeWVhcl9kZWQgPC0gcHJvZl9uZXdzX3llYXJfZGVkICU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgeWVhciwgbmV3c19kZWRfcmVnaW9uYWwsIG5ld3NfZGVkX2dlbmVyYWxfYWxsLCBuZXdzX2RlZF9hbGwsDQogICAgICAgICBuZXdzX2RlZF9yZWdpb25hbF90b3RhbCwgbmV3c19kZWRfZ2VuZXJhbF9hbGxfdG90YWwsIG5ld3NfZGVkX2FsbF90b3RhbCkNCmBgYA0KDQpEbyB0aGUgc2FtZSwgYnV0IGV4Y2x1ZGluZyBvbmxpbmUgcmVzb3VyY2VzOg0KYGBge3J9DQpwcm9mX25ld3NfeWVhcl9vZmZsaW5lIDwtIGxleGlzX2RhdGEgJT4lDQogIGZpbHRlcighaXMubmEoeWVhcikgJiB5ZWFyID49IDE5NzMgJiB5ZWFyIDw9IDIwMjMgJiBvbmxpbmVfcmVzb3VyY2UgPT0gRkFMU0UpJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgeWVhciwgc291cmNlX3R5cGUpJT4lDQogIHN1bW1hcmlzZShuID0gbigpKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIsIHNvdXJjZV90eXBlKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCBzb3VyY2VfdHlwZSklPiUNCiAgbXV0YXRlKGN1bXN1bSA9IGN1bXN1bShuKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IHNvdXJjZV90eXBlLCB2YWx1ZXNfZnJvbSA9IGMobiwgY3Vtc3VtKSklPiUNCiAgZmlsbChjdW1zdW1fbmF0aW9uYWxfbmw6Y3Vtc3VtX2hpZ2hfcHJvZl9pbnRsKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKQ0KDQpwcm9mX25ld3NfeWVhcl9vZmZsaW5lIDwtIHByb2ZfbmV3c195ZWFyX29mZmxpbmVbYygicHJvZmlsZV9pZCIsICJ5ZWFyIiwgIm5fbmF0aW9uYWxfbmwiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX25ld3NfYWdnciIsICJuX2ZpbmFuY2UiLCAibl9vdGhlciIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5fcmVnaW9uYWxfbmwiLCAibl9zY2llbmNlIiwgIm5fcHJvZiIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5fbG9jYWxfaW50IiwgIm5fdW5rbm93biIsICJuX2hpZ2hfcHJvZl9pbnRsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX290aGVyX2ludCIsICJuX2Jsb2ciLCAiY3Vtc3VtX25hdGlvbmFsX25sIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX25ld3NfYWdnciIsICJjdW1zdW1fZmluYW5jZSIsICJjdW1zdW1fb3RoZXIiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fcmVnaW9uYWxfbmwiLCAiY3Vtc3VtX3NjaWVuY2UiLCAiY3Vtc3VtX3Byb2YiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fbG9jYWxfaW50IiwgImN1bXN1bV91bmtub3duIiwgImN1bXN1bV9oaWdoX3Byb2ZfaW50bCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX290aGVyX2ludCIsICJjdW1zdW1fYmxvZyIgKV0NCg0KIyB0aWR5IHVwIHRoZSBjb2x1bW5zDQpjb2xuYW1lcyhwcm9mX25ld3NfeWVhcl9vZmZsaW5lKVszOjI2XSA8LSBjKCJuZXdzX29mZl9uYXRpb25hbCIsICJuZXdzX29mZl9hZ2dyIiwgIm5ld3Nfb2ZmX2ZpbmFuY2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19vZmZfb3RoZXIiLCAibmV3c19vZmZfcmVnaW9uYWwiLCAibmV3c19vZmZfc2NpZW5jZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX29mZl9wcm9mZXNzaW9uYWwiLCAibmV3c19vZmZfbG9jYWxfaW50bCIsICJuZXdzX29mZl91bmtub3duIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfb2ZmX2ludGwiLCAibmV3c19vZmZfaW50bF9vdGhlciIsICJuZXdzX29mZl9ibG9nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfb2ZmX25hdGlvbmFsX3RvdGFsIiwgIm5ld3Nfb2ZmX2FnZ3JfdG90YWwiLCAibmV3c19vZmZfZmluYW5jZV90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX29mZl9vdGhlcl90b3RhbCIsICJuZXdzX29mZl9yZWdpb25hbF90b3RhbCIsICJuZXdzX29mZl9zY2llbmNlX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfb2ZmX3Byb2Zlc3Npb25hbF90b3RhbCIsICJuZXdzX29mZl9sb2NhbF9pbnRsX3RvdGFsIiwgIm5ld3Nfb2ZmX3Vua25vd25fdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19vZmZfaW50bF90b3RhbCIsICJuZXdzX29mZl9pbnRsX290aGVyX3RvdGFsIiwgIm5ld3Nfb2ZmX2Jsb2dfdG90YWwiKQ0KICANCiMgYWRkIHRvdGFsIGNvdW50cw0KcHJvZl9uZXdzX3llYXJfb2ZmbGluZSRuZXdzX29mZl9hbGwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9vZmZsaW5lWzM6MTRdKQ0KcHJvZl9uZXdzX3llYXJfb2ZmbGluZSRuZXdzX29mZl9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9vZmZsaW5lWzE1OjI2XSkNCiAgIA0KIyBhZGQgZ2VuZXJhbCBpbnRlcmVzdCBjb3VudHMNCnByb2ZfbmV3c195ZWFyX29mZmxpbmUkbmV3c19vZmZfZ2VuZXJhbF9hbGwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9vZmZsaW5lW2MoIm5ld3Nfb2ZmX25hdGlvbmFsIiwgIm5ld3Nfb2ZmX3JlZ2lvbmFsIiwgIm5ld3Nfb2ZmX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfb2ZmX2xvY2FsX2ludGwiLCAibmV3c19vZmZfaW50bF9vdGhlciIpXSkNCnByb2ZfbmV3c195ZWFyX29mZmxpbmUkbmV3c19vZmZfZ2VuZXJhbF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9vZmZsaW5lW2MoIm5ld3Nfb2ZmX25hdGlvbmFsX3RvdGFsIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX29mZl9yZWdpb25hbF90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX29mZl9pbnRsX3RvdGFsIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX29mZl9sb2NhbF9pbnRsX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfb2ZmX2ludGxfb3RoZXJfdG90YWwiKV0pDQogICANCiMgcmVhcnJhbmdlIGEgYml0DQpwcm9mX25ld3NfeWVhcl9vZmZsaW5lIDwtIHByb2ZfbmV3c195ZWFyX29mZmxpbmUgJT4lDQogIHNlbGVjdChwcm9maWxlX2lkLCB5ZWFyLCBuZXdzX29mZl9uYXRpb25hbCwgbmV3c19vZmZfcmVnaW9uYWwsIG5ld3Nfb2ZmX2ludGwsIG5ld3Nfb2ZmX2xvY2FsX2ludGwsDQogICAgICAgICBuZXdzX29mZl9pbnRsX290aGVyLCBuZXdzX29mZl9nZW5lcmFsX2FsbCwgbmV3c19vZmZfZmluYW5jZSwgbmV3c19vZmZfcHJvZmVzc2lvbmFsLCBuZXdzX29mZl9zY2llbmNlLCBuZXdzX29mZl9ibG9nLA0KICAgICAgICAgbmV3c19vZmZfYWdnciwgbmV3c19vZmZfdW5rbm93biwgbmV3c19vZmZfb3RoZXIsIG5ld3Nfb2ZmX2FsbCwNCiAgICAgICAgIG5ld3Nfb2ZmX25hdGlvbmFsX3RvdGFsLCBuZXdzX29mZl9yZWdpb25hbF90b3RhbCwgDQogICAgICAgICBuZXdzX29mZl9pbnRsX3RvdGFsLCBuZXdzX29mZl9sb2NhbF9pbnRsX3RvdGFsLCBuZXdzX29mZl9pbnRsX290aGVyX3RvdGFsLCBuZXdzX29mZl9nZW5lcmFsX2FsbF90b3RhbCwgDQogICAgICAgICBuZXdzX29mZl9maW5hbmNlX3RvdGFsLCBuZXdzX29mZl9wcm9mZXNzaW9uYWxfdG90YWwsIG5ld3Nfb2ZmX3NjaWVuY2VfdG90YWwsIG5ld3Nfb2ZmX2Jsb2dfdG90YWwsDQogICAgICAgICBuZXdzX29mZl9hZ2dyX3RvdGFsLCBuZXdzX29mZl91bmtub3duX3RvdGFsLCBuZXdzX29mZl9vdGhlcl90b3RhbCwgbmV3c19vZmZfYWxsX3RvdGFsKQ0KYGBgDQoNCk5vdyBjb3ZlciBvbmx5IHJlc291cmNlcyB3aXRoIGluc3RpdHV0aW9uYWwgYWZmaWxpYXRpb24gbWVudGlvbmVkOg0KYGBge3J9DQpwcm9mX25ld3NfeWVhcl9pbnN0IDwtIGxleGlzX2RhdGEgJT4lDQogIGZpbHRlcighaXMubmEoeWVhcikgJiB5ZWFyID49IDE5NzMgJiB5ZWFyIDw9IDIwMjMgJiBhZmZpbGlhdGlvbiA9PSBUUlVFKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHllYXIsIHNvdXJjZV90eXBlKSU+JQ0KICBzdW1tYXJpc2UobiA9IG4oKSklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyLCBzb3VyY2VfdHlwZSklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgc291cmNlX3R5cGUpJT4lDQogIG11dGF0ZShjdW1zdW0gPSBjdW1zdW0obikpJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBzb3VyY2VfdHlwZSwgdmFsdWVzX2Zyb20gPSBjKG4sIGN1bXN1bSkpJT4lDQogIGZpbGwoY3Vtc3VtX25hdGlvbmFsX25sOmN1bXN1bV9oaWdoX3Byb2ZfaW50bCklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCkNCg0KcHJvZl9uZXdzX3llYXJfaW5zdCA8LSBwcm9mX25ld3NfeWVhcl9pbnN0W2MoInByb2ZpbGVfaWQiLCAieWVhciIsICJuX25hdGlvbmFsX25sIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9uZXdzX2FnZ3IiLCAibl9maW5hbmNlIiwgIm5fb3RoZXIiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX3JlZ2lvbmFsX25sIiwgIm5fc2NpZW5jZSIsICJuX3Byb2YiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX2xvY2FsX2ludCIsICJuX3Vua25vd24iLCAibl9oaWdoX3Byb2ZfaW50bCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9vdGhlcl9pbnQiLCAibl9ibG9nIiwgImN1bXN1bV9uYXRpb25hbF9ubCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImN1bXN1bV9uZXdzX2FnZ3IiLCAiY3Vtc3VtX2ZpbmFuY2UiLCAiY3Vtc3VtX290aGVyIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX3JlZ2lvbmFsX25sIiwgImN1bXN1bV9zY2llbmNlIiwgImN1bXN1bV9wcm9mIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX2xvY2FsX2ludCIsICJjdW1zdW1fdW5rbm93biIsICJjdW1zdW1faGlnaF9wcm9mX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImN1bXN1bV9vdGhlcl9pbnQiLCAiY3Vtc3VtX2Jsb2ciICldDQoNCiMgdGlkeSB1cCB0aGUgY29sdW1ucw0KY29sbmFtZXMocHJvZl9uZXdzX3llYXJfaW5zdClbMzoyNl0gPC0gYygibmV3c19pbnN0X25hdGlvbmFsIiwgIm5ld3NfaW5zdF9hZ2dyIiwgIm5ld3NfaW5zdF9maW5hbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfaW5zdF9vdGhlciIsICJuZXdzX2luc3RfcmVnaW9uYWwiLCAibmV3c19pbnN0X3NjaWVuY2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19pbnN0X3Byb2Zlc3Npb25hbCIsICJuZXdzX2luc3RfbG9jYWxfaW50bCIsICJuZXdzX2luc3RfdW5rbm93biIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2luc3RfaW50bCIsICJuZXdzX2luc3RfaW50bF9vdGhlciIsICJuZXdzX2luc3RfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2luc3RfbmF0aW9uYWxfdG90YWwiLCAibmV3c19pbnN0X2FnZ3JfdG90YWwiLCAibmV3c19pbnN0X2ZpbmFuY2VfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19pbnN0X290aGVyX3RvdGFsIiwgIm5ld3NfaW5zdF9yZWdpb25hbF90b3RhbCIsICJuZXdzX2luc3Rfc2NpZW5jZV90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2luc3RfcHJvZmVzc2lvbmFsX3RvdGFsIiwgIm5ld3NfaW5zdF9sb2NhbF9pbnRsX3RvdGFsIiwgIm5ld3NfaW5zdF91bmtub3duX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfaW5zdF9pbnRsX3RvdGFsIiwgIm5ld3NfaW5zdF9pbnRsX290aGVyX3RvdGFsIiwgIm5ld3NfaW5zdF9ibG9nX3RvdGFsIikNCiAgDQojIGFkZCB0b3RhbCBjb3VudHMNCnByb2ZfbmV3c195ZWFyX2luc3QkbmV3c19pbnN0X2FsbCA8LSByb3dTdW1zKHByb2ZfbmV3c195ZWFyX2luc3RbMzoxNF0pDQpwcm9mX25ld3NfeWVhcl9pbnN0JG5ld3NfaW5zdF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9pbnN0WzE1OjI2XSkNCiAgIA0KIyBhZGQgZ2VuZXJhbCBpbnRlcmVzdCBjb3VudHMNCnByb2ZfbmV3c195ZWFyX2luc3QkbmV3c19pbnN0X2dlbmVyYWxfYWxsIDwtIHJvd1N1bXMocHJvZl9uZXdzX3llYXJfaW5zdFtjKCJuZXdzX2luc3RfbmF0aW9uYWwiLCAibmV3c19pbnN0X3JlZ2lvbmFsIiwgIm5ld3NfaW5zdF9pbnRsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2luc3RfbG9jYWxfaW50bCIsICJuZXdzX2luc3RfaW50bF9vdGhlciIpXSkNCg0KcHJvZl9uZXdzX3llYXJfaW5zdCRuZXdzX2luc3RfZ2VuZXJhbF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9pbnN0W2MoIm5ld3NfaW5zdF9uYXRpb25hbF90b3RhbCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19pbnN0X3JlZ2lvbmFsX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfaW5zdF9pbnRsX3RvdGFsIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2luc3RfbG9jYWxfaW50bF90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2luc3RfaW50bF9vdGhlcl90b3RhbCIpXSkNCiAgIA0KIyByZWFycmFuZ2UgYSBiaXQNCnByb2ZfbmV3c195ZWFyX2luc3QgPC0gcHJvZl9uZXdzX3llYXJfaW5zdCAlPiUNCiAgc2VsZWN0KHByb2ZpbGVfaWQsIHllYXIsIG5ld3NfaW5zdF9uYXRpb25hbCwgbmV3c19pbnN0X3JlZ2lvbmFsLCBuZXdzX2luc3RfaW50bCwgbmV3c19pbnN0X2xvY2FsX2ludGwsDQogICAgICAgICBuZXdzX2luc3RfaW50bF9vdGhlciwgbmV3c19pbnN0X2dlbmVyYWxfYWxsLCBuZXdzX2luc3RfZmluYW5jZSwgbmV3c19pbnN0X3Byb2Zlc3Npb25hbCwgbmV3c19pbnN0X3NjaWVuY2UsIG5ld3NfaW5zdF9ibG9nLA0KICAgICAgICAgbmV3c19pbnN0X2FnZ3IsIG5ld3NfaW5zdF91bmtub3duLCBuZXdzX2luc3Rfb3RoZXIsIG5ld3NfaW5zdF9hbGwsDQogICAgICAgICBuZXdzX2luc3RfbmF0aW9uYWxfdG90YWwsIG5ld3NfaW5zdF9yZWdpb25hbF90b3RhbCwgDQogICAgICAgICBuZXdzX2luc3RfaW50bF90b3RhbCwgbmV3c19pbnN0X2xvY2FsX2ludGxfdG90YWwsIG5ld3NfaW5zdF9pbnRsX290aGVyX3RvdGFsLCBuZXdzX2luc3RfZ2VuZXJhbF9hbGxfdG90YWwsIA0KICAgICAgICAgbmV3c19pbnN0X2ZpbmFuY2VfdG90YWwsIG5ld3NfaW5zdF9wcm9mZXNzaW9uYWxfdG90YWwsIG5ld3NfaW5zdF9zY2llbmNlX3RvdGFsLCBuZXdzX2luc3RfYmxvZ190b3RhbCwNCiAgICAgICAgIG5ld3NfaW5zdF9hZ2dyX3RvdGFsLCBuZXdzX2luc3RfdW5rbm93bl90b3RhbCwgbmV3c19pbnN0X290aGVyX3RvdGFsLCBuZXdzX2luc3RfYWxsX3RvdGFsKQ0KYGBgDQoNCkFuZCBkZWR1cGxpY2F0ZWQ6DQpgYGB7cn0NCnByb2ZfbmV3c195ZWFyX2luc3RfZGVkIDwtIGxleGlzX2RhdGEgJT4lDQogIGZpbHRlcighaXMubmEoeWVhcikgJiB5ZWFyID49IDE5NzMgJiB5ZWFyIDw9IDIwMjMgJiBhZmZpbGlhdGlvbiA9PSBUUlVFICYgcmVnaW9uYWxfZHVwbGljYXRlID09IEZBTFNFKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIsIHNvdXJjZV90eXBlKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCB5ZWFyLCBzb3VyY2VfdHlwZSklPiUNCiAgc3VtbWFyaXNlKG4gPSBuKCkpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciwgc291cmNlX3R5cGUpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlKSU+JQ0KICBtdXRhdGUoY3Vtc3VtID0gY3Vtc3VtKG4pKSU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gc291cmNlX3R5cGUsIHZhbHVlc19mcm9tID0gYyhuLCBjdW1zdW0pKSU+JQ0KICBmaWxsKGN1bXN1bV9uYXRpb25hbF9ubDpjdW1zdW1faGlnaF9wcm9mX2ludGwpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApDQoNCnByb2ZfbmV3c195ZWFyX2luc3RfZGVkIDwtIHByb2ZfbmV3c195ZWFyX2luc3RfZGVkW2MoInByb2ZpbGVfaWQiLCAieWVhciIsICJuX25hdGlvbmFsX25sIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX25ld3NfYWdnciIsICJuX2ZpbmFuY2UiLCAibl9vdGhlciIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9yZWdpb25hbF9ubCIsICJuX3NjaWVuY2UiLCAibl9wcm9mIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX2xvY2FsX2ludCIsICJuX3Vua25vd24iLCAibl9oaWdoX3Byb2ZfaW50bCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuX290aGVyX2ludCIsICJuX2Jsb2ciLCAiY3Vtc3VtX25hdGlvbmFsX25sIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fbmV3c19hZ2dyIiwgImN1bXN1bV9maW5hbmNlIiwgImN1bXN1bV9vdGhlciIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX3JlZ2lvbmFsX25sIiwgImN1bXN1bV9zY2llbmNlIiwgImN1bXN1bV9wcm9mIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fbG9jYWxfaW50IiwgImN1bXN1bV91bmtub3duIiwgImN1bXN1bV9oaWdoX3Byb2ZfaW50bCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fb3RoZXJfaW50IiwgImN1bXN1bV9ibG9nIiApXQ0KDQojIHRpZHkgdXAgdGhlIGNvbHVtbnMNCmNvbG5hbWVzKHByb2ZfbmV3c195ZWFyX2luc3RfZGVkKVszOjI2XSA8LSBjKCJuZXdzX2RlZF9pbnN0X25hdGlvbmFsIiwgIm5ld3NfZGVkX2luc3RfYWdnciIsICJuZXdzX2RlZF9pbnN0X2ZpbmFuY2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19kZWRfaW5zdF9vdGhlciIsICJuZXdzX2RlZF9pbnN0X3JlZ2lvbmFsIiwgIm5ld3NfZGVkX2luc3Rfc2NpZW5jZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9pbnN0X3Byb2Zlc3Npb25hbCIsICJuZXdzX2RlZF9pbnN0X2xvY2FsX2ludGwiLCAibmV3c19kZWRfaW5zdF91bmtub3duIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2luc3RfaW50bCIsICJuZXdzX2RlZF9pbnN0X2ludGxfb3RoZXIiLCAibmV3c19kZWRfaW5zdF9ibG9nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2luc3RfbmF0aW9uYWxfdG90YWwiLCAibmV3c19kZWRfaW5zdF9hZ2dyX3RvdGFsIiwgIm5ld3NfZGVkX2luc3RfZmluYW5jZV90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9pbnN0X290aGVyX3RvdGFsIiwgIm5ld3NfZGVkX2luc3RfcmVnaW9uYWxfdG90YWwiLCAibmV3c19kZWRfaW5zdF9zY2llbmNlX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2luc3RfcHJvZmVzc2lvbmFsX3RvdGFsIiwgIm5ld3NfZGVkX2luc3RfbG9jYWxfaW50bF90b3RhbCIsICJuZXdzX2RlZF9pbnN0X3Vua25vd25fdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19kZWRfaW5zdF9pbnRsX3RvdGFsIiwgIm5ld3NfZGVkX2luc3RfaW50bF9vdGhlcl90b3RhbCIsICJuZXdzX2RlZF9pbnN0X2Jsb2dfdG90YWwiKQ0KICANCiMgYWRkIHRvdGFsIGNvdW50cw0KcHJvZl9uZXdzX3llYXJfaW5zdF9kZWQkbmV3c19kZWRfaW5zdF9hbGwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9pbnN0X2RlZFszOjE0XSkNCnByb2ZfbmV3c195ZWFyX2luc3RfZGVkJG5ld3NfZGVkX2luc3RfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl9uZXdzX3llYXJfaW5zdF9kZWRbMTU6MjZdKQ0KICAgDQojIGFkZCBnZW5lcmFsIGludGVyZXN0IGNvdW50cw0KcHJvZl9uZXdzX3llYXJfaW5zdF9kZWQkbmV3c19kZWRfaW5zdF9nZW5lcmFsX2FsbCA8LSByb3dTdW1zKHByb2ZfbmV3c195ZWFyX2luc3RfZGVkW2MoIm5ld3NfZGVkX2luc3RfbmF0aW9uYWwiLCAibmV3c19kZWRfaW5zdF9yZWdpb25hbCIsICJuZXdzX2RlZF9pbnN0X2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2luc3RfbG9jYWxfaW50bCIsICJuZXdzX2RlZF9pbnN0X2ludGxfb3RoZXIiKV0pDQoNCnByb2ZfbmV3c195ZWFyX2luc3RfZGVkJG5ld3NfZGVkX2luc3RfZ2VuZXJhbF9hbGxfdG90YWwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9pbnN0X2RlZFtjKCJuZXdzX2RlZF9pbnN0X25hdGlvbmFsX3RvdGFsIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX2RlZF9pbnN0X3JlZ2lvbmFsX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2luc3RfaW50bF90b3RhbCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19kZWRfaW5zdF9sb2NhbF9pbnRsX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfZGVkX2luc3RfaW50bF9vdGhlcl90b3RhbCIpXSkNCiAgIA0KIyByZWFycmFuZ2UgYSBiaXQNCnByb2ZfbmV3c195ZWFyX2luc3RfZGVkIDwtIHByb2ZfbmV3c195ZWFyX2luc3RfZGVkICU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgeWVhciwgbmV3c19kZWRfaW5zdF9uYXRpb25hbCwgbmV3c19kZWRfaW5zdF9yZWdpb25hbCwgbmV3c19kZWRfaW5zdF9pbnRsLCBuZXdzX2RlZF9pbnN0X2xvY2FsX2ludGwsDQogICAgICAgICBuZXdzX2RlZF9pbnN0X2ludGxfb3RoZXIsIG5ld3NfZGVkX2luc3RfZ2VuZXJhbF9hbGwsIG5ld3NfZGVkX2luc3RfZmluYW5jZSwgbmV3c19kZWRfaW5zdF9wcm9mZXNzaW9uYWwsIG5ld3NfZGVkX2luc3Rfc2NpZW5jZSwgbmV3c19kZWRfaW5zdF9ibG9nLA0KICAgICAgICAgbmV3c19kZWRfaW5zdF9hZ2dyLCBuZXdzX2RlZF9pbnN0X3Vua25vd24sIG5ld3NfZGVkX2luc3Rfb3RoZXIsIG5ld3NfZGVkX2luc3RfYWxsLA0KICAgICAgICAgbmV3c19kZWRfaW5zdF9uYXRpb25hbF90b3RhbCwgbmV3c19kZWRfaW5zdF9yZWdpb25hbF90b3RhbCwgDQogICAgICAgICBuZXdzX2RlZF9pbnN0X2ludGxfdG90YWwsIG5ld3NfZGVkX2luc3RfbG9jYWxfaW50bF90b3RhbCwgbmV3c19kZWRfaW5zdF9pbnRsX290aGVyX3RvdGFsLCBuZXdzX2RlZF9pbnN0X2dlbmVyYWxfYWxsX3RvdGFsLCANCiAgICAgICAgIG5ld3NfZGVkX2luc3RfZmluYW5jZV90b3RhbCwgbmV3c19kZWRfaW5zdF9wcm9mZXNzaW9uYWxfdG90YWwsIG5ld3NfZGVkX2luc3Rfc2NpZW5jZV90b3RhbCwgbmV3c19kZWRfaW5zdF9ibG9nX3RvdGFsLA0KICAgICAgICAgbmV3c19kZWRfaW5zdF9hZ2dyX3RvdGFsLCBuZXdzX2RlZF9pbnN0X3Vua25vd25fdG90YWwsIG5ld3NfZGVkX2luc3Rfb3RoZXJfdG90YWwsIG5ld3NfZGVkX2luc3RfYWxsX3RvdGFsKQ0KYGBgDQoNCkZpbmFsbHksIGRlZHVwbGljYXRlZCByZXNvdXJjZXMgd2l0aCBzdHJpY3QgbmFtZSBjcml0ZXJpYSBpbmxjdWRlZDoNCmBgYHtyfQ0KbGV4aXNfZGF0YV9zdHJpY3QgPC0gZGJSZWFkVGFibGUoY29uLCAibGV4aXNfbmV4aXNfbWVudGlvbnNfc3RyaWN0X2NyaXRlcmlvbiIpDQoNCnByb2ZfbmV3c195ZWFyX3N0cmljdCA8LSBsZXhpc19kYXRhX3N0cmljdCAlPiUNCiAgZmlsdGVyKCFpcy5uYSh5ZWFyKSAmIHllYXIgPj0gMTk3MyAmIHllYXIgPD0gMjAyMyAmIHN0cmljdF9jcml0ZXJpYSA9PSBUUlVFKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIsIHNvdXJjZV90eXBlKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCB5ZWFyLCBzb3VyY2VfdHlwZSklPiUNCiAgc3VtbWFyaXNlKG4gPSBuKCkpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgeWVhciwgc291cmNlX3R5cGUpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHNvdXJjZV90eXBlKSU+JQ0KICBtdXRhdGUoY3Vtc3VtID0gY3Vtc3VtKG4pKSU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gc291cmNlX3R5cGUsIHZhbHVlc19mcm9tID0gYyhuLCBjdW1zdW0pKSU+JQ0KICBmaWxsKGN1bXN1bV9uYXRpb25hbF9ubDpjdW1zdW1faGlnaF9wcm9mX2ludGwpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApDQoNCnByb2ZfbmV3c195ZWFyX3N0cmljdCA8LSBwcm9mX25ld3NfeWVhcl9zdHJpY3RbYygicHJvZmlsZV9pZCIsICJ5ZWFyIiwgIm5fbmF0aW9uYWxfbmwiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9uZXdzX2FnZ3IiLCAibl9maW5hbmNlIiwgIm5fb3RoZXIiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9yZWdpb25hbF9ubCIsICJuX3NjaWVuY2UiLCAibl9wcm9mIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5fbG9jYWxfaW50IiwgIm5fdW5rbm93biIsICJuX2hpZ2hfcHJvZl9pbnRsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibl9vdGhlcl9pbnQiLCAibl9ibG9nIiwgImN1bXN1bV9uYXRpb25hbF9ubCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fbmV3c19hZ2dyIiwgImN1bXN1bV9maW5hbmNlIiwgImN1bXN1bV9vdGhlciIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fcmVnaW9uYWxfbmwiLCAiY3Vtc3VtX3NjaWVuY2UiLCAiY3Vtc3VtX3Byb2YiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3Vtc3VtX2xvY2FsX2ludCIsICJjdW1zdW1fdW5rbm93biIsICJjdW1zdW1faGlnaF9wcm9mX2ludGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjdW1zdW1fb3RoZXJfaW50IiwgImN1bXN1bV9ibG9nIiApXQ0KDQojIHRpZHkgdXAgdGhlIGNvbHVtbnMNCmNvbG5hbWVzKHByb2ZfbmV3c195ZWFyX3N0cmljdClbMzoyNl0gPC0gYygibmV3c19zdHJpY3RfbmF0aW9uYWwiLCAibmV3c19zdHJpY3RfYWdnciIsICJuZXdzX3N0cmljdF9maW5hbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfc3RyaWN0X290aGVyIiwgIm5ld3Nfc3RyaWN0X3JlZ2lvbmFsIiwgIm5ld3Nfc3RyaWN0X3NjaWVuY2UiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19zdHJpY3RfcHJvZmVzc2lvbmFsIiwgIm5ld3Nfc3RyaWN0X2xvY2FsX2ludGwiLCAibmV3c19zdHJpY3RfdW5rbm93biIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3N0cmljdF9pbnRsIiwgIm5ld3Nfc3RyaWN0X2ludGxfb3RoZXIiLCAibmV3c19zdHJpY3RfYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3N0cmljdF9uYXRpb25hbF90b3RhbCIsICJuZXdzX3N0cmljdF9hZ2dyX3RvdGFsIiwgIm5ld3Nfc3RyaWN0X2ZpbmFuY2VfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19zdHJpY3Rfb3RoZXJfdG90YWwiLCAibmV3c19zdHJpY3RfcmVnaW9uYWxfdG90YWwiLCAibmV3c19zdHJpY3Rfc2NpZW5jZV90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3N0cmljdF9wcm9mZXNzaW9uYWxfdG90YWwiLCAibmV3c19zdHJpY3RfbG9jYWxfaW50bF90b3RhbCIsICJuZXdzX3N0cmljdF91bmtub3duX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3Nfc3RyaWN0X2ludGxfdG90YWwiLCAibmV3c19zdHJpY3RfaW50bF9vdGhlcl90b3RhbCIsICJuZXdzX3N0cmljdF9ibG9nX3RvdGFsIikNCiAgDQojIGFkZCB0b3RhbCBjb3VudHMNCnByb2ZfbmV3c195ZWFyX3N0cmljdCRuZXdzX3N0cmljdF9hbGwgPC0gcm93U3Vtcyhwcm9mX25ld3NfeWVhcl9zdHJpY3RbMzoxNF0pDQpwcm9mX25ld3NfeWVhcl9zdHJpY3QkbmV3c19zdHJpY3RfYWxsX3RvdGFsIDwtIHJvd1N1bXMocHJvZl9uZXdzX3llYXJfc3RyaWN0WzE1OjI2XSkNCiAgIA0KIyBhZGQgZ2VuZXJhbCBpbnRlcmVzdCBjb3VudHMNCnByb2ZfbmV3c195ZWFyX3N0cmljdCRuZXdzX3N0cmljdF9nZW5lcmFsX2FsbCA8LSByb3dTdW1zKHByb2ZfbmV3c195ZWFyX3N0cmljdFtjKCJuZXdzX3N0cmljdF9uYXRpb25hbCIsICJuZXdzX3N0cmljdF9yZWdpb25hbCIsICJuZXdzX3N0cmljdF9pbnRsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3N0cmljdF9sb2NhbF9pbnRsIiwgIm5ld3Nfc3RyaWN0X2ludGxfb3RoZXIiKV0pDQoNCnByb2ZfbmV3c195ZWFyX3N0cmljdCRuZXdzX3N0cmljdF9nZW5lcmFsX2FsbF90b3RhbCA8LSByb3dTdW1zKHByb2ZfbmV3c195ZWFyX3N0cmljdFtjKCJuZXdzX3N0cmljdF9uYXRpb25hbF90b3RhbCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19zdHJpY3RfcmVnaW9uYWxfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19zdHJpY3RfaW50bF90b3RhbCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c19zdHJpY3RfbG9jYWxfaW50bF90b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3N0cmljdF9pbnRsX290aGVyX3RvdGFsIildKQ0KICAgDQojIHJlYXJyYW5nZSBhIGJpdA0KcHJvZl9uZXdzX3llYXJfc3RyaWN0IDwtIHByb2ZfbmV3c195ZWFyX3N0cmljdCAlPiUNCiAgc2VsZWN0KHByb2ZpbGVfaWQsIHllYXIsIG5ld3Nfc3RyaWN0X25hdGlvbmFsLCBuZXdzX3N0cmljdF9yZWdpb25hbCwgbmV3c19zdHJpY3RfaW50bCwgbmV3c19zdHJpY3RfbG9jYWxfaW50bCwNCiAgICAgICAgIG5ld3Nfc3RyaWN0X2ludGxfb3RoZXIsIG5ld3Nfc3RyaWN0X2dlbmVyYWxfYWxsLCBuZXdzX3N0cmljdF9maW5hbmNlLCBuZXdzX3N0cmljdF9wcm9mZXNzaW9uYWwsIG5ld3Nfc3RyaWN0X3NjaWVuY2UsIG5ld3Nfc3RyaWN0X2Jsb2csDQogICAgICAgICBuZXdzX3N0cmljdF9hZ2dyLCBuZXdzX3N0cmljdF91bmtub3duLCBuZXdzX3N0cmljdF9vdGhlciwgbmV3c19zdHJpY3RfYWxsLA0KICAgICAgICAgbmV3c19zdHJpY3RfbmF0aW9uYWxfdG90YWwsIG5ld3Nfc3RyaWN0X3JlZ2lvbmFsX3RvdGFsLCANCiAgICAgICAgIG5ld3Nfc3RyaWN0X2ludGxfdG90YWwsIG5ld3Nfc3RyaWN0X2xvY2FsX2ludGxfdG90YWwsIG5ld3Nfc3RyaWN0X2ludGxfb3RoZXJfdG90YWwsIG5ld3Nfc3RyaWN0X2dlbmVyYWxfYWxsX3RvdGFsLCANCiAgICAgICAgIG5ld3Nfc3RyaWN0X2ZpbmFuY2VfdG90YWwsIG5ld3Nfc3RyaWN0X3Byb2Zlc3Npb25hbF90b3RhbCwgbmV3c19zdHJpY3Rfc2NpZW5jZV90b3RhbCwgbmV3c19zdHJpY3RfYmxvZ190b3RhbCwNCiAgICAgICAgIG5ld3Nfc3RyaWN0X2FnZ3JfdG90YWwsIG5ld3Nfc3RyaWN0X3Vua25vd25fdG90YWwsIG5ld3Nfc3RyaWN0X290aGVyX3RvdGFsLCBuZXdzX3N0cmljdF9hbGxfdG90YWwpDQpgYGANCg0KDQpNZXJnZSB0aGUgbGV4aXMgc3ViLWRhdGEtZnJhbWVzOg0KYGBge3J9DQpwcm9mX25ld3NfeWVhciA8LSBtZXJnZShwcm9mX25ld3NfeWVhciwNCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfbmV3c195ZWFyX2RlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIikpDQoNCnByb2ZfbmV3c195ZWFyIDwtIG1lcmdlKHByb2ZfbmV3c195ZWFyLA0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9uZXdzX3llYXJfb2ZmbGluZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIikpDQoNCnByb2ZfbmV3c195ZWFyIDwtIG1lcmdlKHByb2ZfbmV3c195ZWFyLA0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9uZXdzX3llYXJfaW5zdCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIikpDQoNCnByb2ZfbmV3c195ZWFyIDwtIG1lcmdlKHByb2ZfbmV3c195ZWFyLA0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9uZXdzX3llYXJfaW5zdF9kZWQsDQogICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpKQ0KDQpwcm9mX25ld3NfeWVhciA8LSBtZXJnZShwcm9mX25ld3NfeWVhciwNCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfbmV3c195ZWFyX3N0cmljdCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIikpDQpgYGANCg0KUGFkIGxleGlzIGRhdGEgd2l0aCB0aGUgcHJvZmVzc29yIHBhbmVsOg0KYGBge3J9DQojIGdldCBhbGwgb2JzZXJ2YXRpb25zIGluIHRoZSBwYW5lbA0KcHJvZl9sZXhpc195ZWFyX3BhZCA8LSBtZXJnZShwcm9mX25ld3NfeWVhciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl95ZWFyX3BfY19nX2FbYygicHJvZmlsZV9pZCIsICJ5ZWFyIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueT0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQojIGZpbGwgZG93biBvbiB0b3RhbHMgYW5kIHJlcGxhY2UgTkFzIHdpdGggemVyb2VzDQpwcm9mX2xleGlzX3llYXJfcGFkIDwtIHByb2ZfbGV4aXNfeWVhcl9wYWQgJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQpJT4lDQogIGZpbGwobmV3c19uYXRpb25hbF90b3RhbCwgbmV3c19yZWdpb25hbF90b3RhbCwNCiAgICAgICBuZXdzX2ludGxfdG90YWwsbmV3c19sb2NhbF9pbnRsX3RvdGFsLCBuZXdzX2ludGxfb3RoZXJfdG90YWwsDQogICAgICAgbmV3c19nZW5lcmFsX2FsbF90b3RhbCwgbmV3c19maW5hbmNlX3RvdGFsLCBuZXdzX3Byb2Zlc3Npb25hbF90b3RhbCwNCiAgICAgICBuZXdzX3NjaWVuY2VfdG90YWwsIG5ld3NfYmxvZ190b3RhbCxuZXdzX2FnZ3JfdG90YWwsDQogICAgICAgbmV3c191bmtub3duX3RvdGFsLCBuZXdzX290aGVyX3RvdGFsLCBuZXdzX2FsbF90b3RhbCwNCiAgICAgICBuZXdzX2RlZF9yZWdpb25hbF90b3RhbCwgbmV3c19kZWRfZ2VuZXJhbF9hbGxfdG90YWwsIG5ld3NfZGVkX2FsbF90b3RhbCwNCiAgICAgICBuZXdzX29mZl9uYXRpb25hbF90b3RhbCwgbmV3c19vZmZfcmVnaW9uYWxfdG90YWwsIG5ld3Nfb2ZmX2ludGxfdG90YWwsIA0KICAgICAgIG5ld3Nfb2ZmX2xvY2FsX2ludGxfdG90YWwsDQogICAgICAgbmV3c19vZmZfaW50bF9vdGhlcl90b3RhbCwgbmV3c19vZmZfZ2VuZXJhbF9hbGxfdG90YWwsIG5ld3Nfb2ZmX2ZpbmFuY2VfdG90YWwsDQogICAgICAgbmV3c19vZmZfcHJvZmVzc2lvbmFsX3RvdGFsLCBuZXdzX29mZl9zY2llbmNlX3RvdGFsLCBuZXdzX29mZl9ibG9nX3RvdGFsLA0KICAgICAgIG5ld3Nfb2ZmX2FnZ3JfdG90YWwsIG5ld3Nfb2ZmX3Vua25vd25fdG90YWwsIG5ld3Nfb2ZmX290aGVyX3RvdGFsLA0KICAgICAgIG5ld3Nfb2ZmX2FsbF90b3RhbCwgDQogICAgICAgbmV3c19pbnN0X25hdGlvbmFsX3RvdGFsLCBuZXdzX2luc3RfcmVnaW9uYWxfdG90YWwsIG5ld3NfaW5zdF9pbnRsX3RvdGFsLA0KICAgICAgIG5ld3NfaW5zdF9sb2NhbF9pbnRsX3RvdGFsLCBuZXdzX2luc3RfaW50bF9vdGhlcl90b3RhbCwgbmV3c19pbnN0X2dlbmVyYWxfYWxsX3RvdGFsLA0KICAgICAgIG5ld3NfaW5zdF9maW5hbmNlX3RvdGFsLCBuZXdzX2luc3RfcHJvZmVzc2lvbmFsX3RvdGFsLCBuZXdzX2luc3Rfc2NpZW5jZV90b3RhbCwNCiAgICAgICBuZXdzX2luc3RfYmxvZ190b3RhbCwgbmV3c19pbnN0X2FnZ3JfdG90YWwsIG5ld3NfaW5zdF91bmtub3duX3RvdGFsLA0KICAgICAgIG5ld3NfaW5zdF9vdGhlcl90b3RhbCwgbmV3c19pbnN0X2FsbF90b3RhbCwNCiAgICAgICBuZXdzX2RlZF9pbnN0X25hdGlvbmFsX3RvdGFsLCBuZXdzX2RlZF9pbnN0X3JlZ2lvbmFsX3RvdGFsLA0KICAgICAgIG5ld3NfZGVkX2luc3RfaW50bF90b3RhbCwgbmV3c19kZWRfaW5zdF9sb2NhbF9pbnRsX3RvdGFsLCBuZXdzX2RlZF9pbnN0X2ludGxfb3RoZXJfdG90YWwsDQogICAgICAgbmV3c19kZWRfaW5zdF9nZW5lcmFsX2FsbF90b3RhbCwgbmV3c19kZWRfaW5zdF9maW5hbmNlX3RvdGFsLCBuZXdzX2RlZF9pbnN0X3Byb2Zlc3Npb25hbF90b3RhbCwNCiAgICAgICBuZXdzX2RlZF9pbnN0X3NjaWVuY2VfdG90YWwsIG5ld3NfZGVkX2luc3RfYmxvZ190b3RhbCwgbmV3c19kZWRfaW5zdF9hZ2dyX3RvdGFsLA0KICAgICAgIG5ld3NfZGVkX2luc3RfdW5rbm93bl90b3RhbCwgbmV3c19kZWRfaW5zdF9vdGhlcl90b3RhbCwgbmV3c19kZWRfaW5zdF9hbGxfdG90YWwsIA0KICAgICAgIG5ld3Nfc3RyaWN0X25hdGlvbmFsX3RvdGFsLCBuZXdzX3N0cmljdF9yZWdpb25hbF90b3RhbCwNCiAgICAgICBuZXdzX3N0cmljdF9pbnRsX3RvdGFsLCBuZXdzX3N0cmljdF9sb2NhbF9pbnRsX3RvdGFsLCBuZXdzX3N0cmljdF9pbnRsX290aGVyX3RvdGFsLA0KICAgICAgIG5ld3Nfc3RyaWN0X2dlbmVyYWxfYWxsX3RvdGFsLCBuZXdzX3N0cmljdF9maW5hbmNlX3RvdGFsLCBuZXdzX3N0cmljdF9wcm9mZXNzaW9uYWxfdG90YWwsDQogICAgICAgbmV3c19zdHJpY3Rfc2NpZW5jZV90b3RhbCwgbmV3c19zdHJpY3RfYmxvZ190b3RhbCwgbmV3c19zdHJpY3RfYWdncl90b3RhbCwNCiAgICAgICBuZXdzX3N0cmljdF91bmtub3duX3RvdGFsLCBuZXdzX3N0cmljdF9vdGhlcl90b3RhbCwgbmV3c19zdHJpY3RfYWxsX3RvdGFsLCANCiAgICAgICAuZGlyZWN0aW9uID0gImRvd24iKSU+JQ0KICBtdXRhdGUoYWNyb3NzKGNvbnRhaW5zKCduZXdzJyksIHJlcGxhY2VfbmEsIDApKQ0KYGBgDQoNCklmIGV4Y2x1ZGVkIHByb2Zlc3NvcnMsIHNldCB0byBOQXM6DQpgYGB7cn0NCmV4Y2x1ZGVfcHJvZnMgPC0gYygpICMgcmVkYWN0ZWQgZm9yIHByaXZhY3kNCg0KcHJvZl9sZXhpc195ZWFyX3BhZFt3aGljaChwcm9mX2xleGlzX3llYXJfcGFkJHByb2ZpbGVfaWQgJWluJSBwYXN0ZTAoImh0dHBzOi8vd3d3Lm5hcmNpcy5ubC9wZXJzb24vUmVjb3JkSUQvIixleGNsdWRlX3Byb2ZzKSksMzoxNDhdIDwtIE5BDQpgYGANCg0KDQpDb21iaW5lIG91ciBwcm9mZXNzb3IgcGFuZWwgd2l0aCBsZXhpcyBkYXRhOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYV9sIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX2xleGlzX3llYXJfcGFkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQpgYGANCg0KV3JpdGUgdGhpcyBvdXQ6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3llYXJfcF9jX2dfYV9sLCAicGFuZWxfZGF0YXNldHMvcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zX2dyYW50c19hbHRfbGV4aXMuY3N2IikNCmBgYA0KDQpgYGB7cn0NCnJtKGxleGlzX2RhdGEpDQpybShsZXhpc19kYXRhX2ZpbHQpDQpybShsZXhpc19kYXRhX2ZpbHRfZGVkKQ0Kcm0ocHJvZl9uZXdzX3llYXIpDQpybShwcm9mX25ld3NfeWVhcl9kZWQpDQpybShwcm9mX25ld3NfeWVhcl9pbnN0KQ0Kcm0ocHJvZl9uZXdzX3llYXJfaW5zdF9kZWQpDQpybShwcm9mX2xleGlzX3llYXJfcGFkKQ0KZ2MoKQ0KYGBgDQoNCg0KIyBGaWVsZCBjbGFzc2lmaWNhdGlvbg0KDQpHZXQgZWFjaCBwcm9mZXNzb3IncyBtYWluIGZpZWxkIGluIGEgZ2l2ZW4geWVhciBiYXNlZCBvbiB0aGVpciBwYXBlcnMsIGFuZCBnZXQgDQp0aGVpciBvdmVyYWxsIHNwZWNpYWxpemF0aW9uLg0KDQpGaXJzdCwgZmV0Y2hpbmcgdGhlIHRvcGljczogDQpgYGB7cn0NCm9hX3B1YnNfdG9waWNzIDwtIGRiUmVhZFRhYmxlKGNvbiwgIm9hX3B1YnNfdG9waWNzIikNCg0Kb2FfcHVic190b3BpY3MgPC0gbWVyZ2Uob2FfcHJvZl9wdWJfbWF0Y2hpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICBvYV9wdWJzX3RvcGljcywNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImlkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCiANCm9hX3B1YnNfdG9waWNzIDwtIG1lcmdlKG9hX3B1YnNfdG9waWNzLA0KICAgICAgICAgICAgICAgICAgICAgICAgb2FfcHVic191bmlxdWVbYygiaWQiLCAicHVibGljYXRpb25feWVhciIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImlkIikNCg0KIyBsZWF2ZSB0aGUgZG9tYWluIGFzIGlzLCB1bmxlc3MgaXQncyBhcnRzIGFuZCBodW1hbml0aWVzDQpvYV9wdWJzX3RvcGljcyRzY29wdXNfZG9tYWluX2FkaiA8LSBpZmVsc2Uob2FfcHVic190b3BpY3MkZmllbGRfZGlzcGxheV9uYW1lID09ICJBcnRzIGFuZCBIdW1hbml0aWVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQXJ0cyBhbmQgSHVtYW5pdGllcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2FfcHVic190b3BpY3MkZG9tYWluX2Rpc3BsYXlfbmFtZSkNCmBgYA0KDQpQcm9mZXNzb3IncyB0b3BpYyBkaXZlcnNpdHkgcGVyIHllYXIgYW5kIGluIHRvdGFsOg0KYGBge3J9DQpvYV9wdWJzX3RvcGljcyRmaWVsZF9kaXNwbGF5X25hbWUgPC0gYXMuZmFjdG9yKG9hX3B1YnNfdG9waWNzJGZpZWxkX2Rpc3BsYXlfbmFtZSkNCg0KIyBwZXIgeWVhcg0KcHJvZl95ZWFyX2ZpZWxkIDwtIG9hX3B1YnNfdG9waWNzICU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCBmaWVsZF9kaXNwbGF5X25hbWUsIHB1YmxpY2F0aW9uX3llYXIpICU+JQ0KICBzdW1tYXJpc2UoY291bnQgPSBuKCkpJT4lDQogIGZpbHRlcighaXMubmEoZmllbGRfZGlzcGxheV9uYW1lKSklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCBmaWVsZF9kaXNwbGF5X25hbWUsIHB1YmxpY2F0aW9uX3llYXIpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIGZpZWxkX2Rpc3BsYXlfbmFtZSkgJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBmaWVsZF9kaXNwbGF5X25hbWUsIHZhbHVlc19mcm9tID0gY291bnQpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApDQogIA0KICANCmRpdmVyc2l0eV95ZWFyIDwtIGRpdmVyc2l0eShwcm9mX3llYXJfZmllbGRbLCAtYygxOjIpXSwgaW5kZXggPSAic2hhbm5vbiIpDQoNCnByb2ZfeWVhcl9maWVsZF9kaXYgPC0gY2JpbmQuZGF0YS5mcmFtZShwcm9mX3llYXJfZmllbGRbLCBjKDE6MildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXJseV9kaXZlcnNpdHkgPSBkaXZlcnNpdHlfeWVhcikNCg0KcHJvZl95ZWFyX2ZpZWxkX2RpdiR5ZWFybHlfZmllbGRfZXZlbm5lcyA8LSBwcm9mX3llYXJfZmllbGRfZGl2JHllYXJseV9kaXZlcnNpdHkvbG9nKDI2KQ0KDQpjb2xuYW1lcyhwcm9mX3llYXJfZmllbGRfZGl2KVsyXSA8LSAieWVhciINCg0KIyBpbiB0b3RhbA0KcHJvZl90b3RhbF9maWVsZCA8LSBvYV9wdWJzX3RvcGljcyAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgZmllbGRfZGlzcGxheV9uYW1lKSAlPiUNCiAgc3VtbWFyaXNlKGNvdW50ID0gbigpKSU+JQ0KICBmaWx0ZXIoIWlzLm5hKGZpZWxkX2Rpc3BsYXlfbmFtZSkpJT4lDQogIHJlcGxhY2UoaXMubmEoLiksIDApJT4lDQogIGFycmFuZ2UocHJvZmlsZV9pZCwgZmllbGRfZGlzcGxheV9uYW1lKSU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gZmllbGRfZGlzcGxheV9uYW1lLCB2YWx1ZXNfZnJvbSA9IGMoY291bnQpKSU+JQ0KICByZXBsYWNlKGlzLm5hKC4pLCAwKQ0KICANCiAgDQpkaXZlcnNpdHlfdG90YWwgPC0gZGl2ZXJzaXR5KHByb2ZfdG90YWxfZmllbGRbLCAtYygxKV0sIGluZGV4ID0gInNoYW5ub24iKQ0KDQoNCnByb2ZfZmllbGRfZGl2IDwtIGNiaW5kLmRhdGEuZnJhbWUocHJvZl90b3RhbF9maWVsZFssIGMoMSldLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsX2RpdmVyc2l0eSA9IGRpdmVyc2l0eV90b3RhbCkNCg0KcHJvZl9maWVsZF9kaXYkdG90YWxfZmllbGRfZXZlbm5lcyA8LSBwcm9mX2ZpZWxkX2RpdiR0b3RhbF9kaXZlcnNpdHkvbG9nKDI2KQ0KDQpgYGANCg0KTWVyZ2UgdGhpcyB3aXRoIG91ciBkYXRhOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYV9sX2YgPC0gbWVyZ2UocHJvZl95ZWFyX3BfY19nX2FfbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl95ZWFyX2ZpZWxkX2RpdiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IEZBTFNFKSANCg0KcHJvZl95ZWFyX3BfY19nX2FfbF9mIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9maWVsZF9kaXYsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gRkFMU0UpIA0KYGBgDQoNCkZpZWxkcyBhbmQgc3ViZmllbGRzIHBlciBwcm9mIHBlciB5ZWFyIGFuZCBpbiB0b3RhbA0KYGBge3J9DQojIHBlciB5ZWFyIGZpZWxkDQpwcm9mX3llYXJfZmllbGQgPC0gb2FfcHVic190b3BpY3MgJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHB1YmxpY2F0aW9uX3llYXIsIGZpZWxkX2Rpc3BsYXlfbmFtZSkgJT4lDQogIHN1bW1hcmlzZShuID0gbigpKSU+JQ0KICBzbGljZV9tYXgobiwgd2l0aF90aWVzID0gRkFMU0UpJT4lDQogIHNlbGVjdCgtbikNCg0KY29sbmFtZXMocHJvZl95ZWFyX2ZpZWxkKVtjKDIsMyldIDwtIGMoInllYXIiLCJ5ZWFybHlfZmllbGQiICkNCg0KIyBwZXIgeWVhciBzdWJmaWVsZA0KcHJvZl95ZWFyX3N1YmZpZWxkIDwtIG9hX3B1YnNfdG9waWNzICU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCBwdWJsaWNhdGlvbl95ZWFyLCBzdWJmaWVsZF9kaXNwbGF5X25hbWUpICU+JQ0KICBzdW1tYXJpc2UobiA9IG4oKSklPiUNCiAgc2xpY2VfbWF4KG4sIHdpdGhfdGllcyA9IEZBTFNFKSU+JQ0KICBzZWxlY3QoLW4pDQoNCmNvbG5hbWVzKHByb2ZfeWVhcl9zdWJmaWVsZClbYygyLDMpXSA8LSBjKCJ5ZWFyIiwieWVhcmx5X3N1YmZpZWxkIikgDQoNCiMgcGVyIHllYXIgYWRqdXN0ZWQNCnByb2ZfeWVhcl9kb21haW4gPC0gb2FfcHVic190b3BpY3MgJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHB1YmxpY2F0aW9uX3llYXIsIHNjb3B1c19kb21haW5fYWRqKSAlPiUNCiAgc3VtbWFyaXNlKG4gPSBuKCkpJT4lDQogIHNsaWNlX21heChuLCB3aXRoX3RpZXMgPSBGQUxTRSklPiUNCiAgc2VsZWN0KC1uKQ0KDQpjb2xuYW1lcyhwcm9mX3llYXJfZG9tYWluKVtjKDIsMyldIDwtIGMoInllYXIiLCAieWVhcmx5X2Fkal9kb21haW4iKSANCg0KDQojIG92ZXJhbGwgDQpwcm9mX3RvdGFsX3N1YmZpZWxkIDwtIG9hX3B1YnNfdG9waWNzICU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCBzdWJmaWVsZF9kaXNwbGF5X25hbWUpICU+JQ0KICBzdW1tYXJpc2UobiA9IG4oKSklPiUNCiAgc2xpY2VfbWF4KG4sIHdpdGhfdGllcyA9IEZBTFNFKSU+JQ0KICBzZWxlY3QoLW4pDQoNCmNvbG5hbWVzKHByb2ZfdG90YWxfc3ViZmllbGQpWzJdIDwtIGMoIm92ZXJhbGxfc3ViZmllbGQiICkNCg0KcHJvZl90b3RhbF9maWVsZCA8LSBvYV9wdWJzX3RvcGljcyAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgZmllbGRfZGlzcGxheV9uYW1lKSAlPiUNCiAgc3VtbWFyaXNlKG4gPSBuKCkpJT4lDQogIHNsaWNlX21heChuLCB3aXRoX3RpZXMgPSBGQUxTRSklPiUNCiAgc2VsZWN0KC1uKQ0KDQpjb2xuYW1lcyhwcm9mX3RvdGFsX2ZpZWxkKVsyXSA8LSBjKCJvdmVyYWxsX2ZpZWxkIiApDQoNCiMgb3ZlcmFsIGFkanVzdGVkDQpwcm9mX3RvdGFsX2RvbWFpbiA8LSBvYV9wdWJzX3RvcGljcyAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgc2NvcHVzX2RvbWFpbl9hZGopICU+JQ0KICBzdW1tYXJpc2UobiA9IG4oKSklPiUNCiAgc2xpY2VfbWF4KG4sIHdpdGhfdGllcyA9IEZBTFNFKSU+JQ0KICBzZWxlY3QoLW4pDQoNCmNvbG5hbWVzKHByb2ZfdG90YWxfZG9tYWluKVsyXSA8LSBjKCJvdmVyYWxsX2Fkal9kb21haW4iKSANCg0KDQojIG1lcmdlIHByb2ZzIGFuZCB0aGVpciBmaWVsZHMNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZiA8LSBtZXJnZShwcm9mX3llYXJfcF9jX2dfYV9sX2YsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfeWVhcl9maWVsZFtjKCJwcm9maWxlX2lkIiwgInllYXJseV9maWVsZCIsICJ5ZWFyIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gRkFMU0UpIA0KDQpwcm9mX3llYXJfcF9jX2dfYV9sX2YgPC0gbWVyZ2UocHJvZl95ZWFyX3BfY19nX2FfbF9mLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX3llYXJfc3ViZmllbGRbYygicHJvZmlsZV9pZCIsICJ5ZWFybHlfc3ViZmllbGQiLCAieWVhciIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IEZBTFNFKSANCg0KcHJvZl95ZWFyX3BfY19nX2FfbF9mIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl95ZWFyX2RvbWFpbltjKCJwcm9maWxlX2lkIiwgInllYXJseV9hZGpfZG9tYWluIiwgInllYXIiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnkgPSBGQUxTRSkgDQoNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZiA8LSBtZXJnZShwcm9mX3llYXJfcF9jX2dfYV9sX2YsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfdG90YWxfZmllbGRbYygicHJvZmlsZV9pZCIsICJvdmVyYWxsX2ZpZWxkIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IEZBTFNFKSANCg0KcHJvZl95ZWFyX3BfY19nX2FfbF9mIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl90b3RhbF9zdWJmaWVsZFtjKCJwcm9maWxlX2lkIiwgIm92ZXJhbGxfc3ViZmllbGQiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gRkFMU0UpIA0KDQpwcm9mX3llYXJfcF9jX2dfYV9sX2YgPC0gbWVyZ2UocHJvZl95ZWFyX3BfY19nX2FfbF9mLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX3RvdGFsX2RvbWFpbltjKCJwcm9maWxlX2lkIiwgIm92ZXJhbGxfYWRqX2RvbWFpbiIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnkgPSBGQUxTRSkgDQpgYGANCg0KUmVtb3ZlIGR1cGxpY2F0ZXMsIGlmIGFueToNCmBgYHtyfQ0KcHJvZl95ZWFyX3BfY19nX2FfbF9mJGR1cGwgPC0gZHVwbGljYXRlZChwcm9mX3llYXJfcF9jX2dfYV9sX2ZbYygicHJvZmlsZV9pZCIsICJ5ZWFyIildKQ0KDQpwcm9mX3llYXJfcF9jX2dfYV9sX2YgPC0gcHJvZl95ZWFyX3BfY19nX2FfbF9mICU+JQ0KICBmaWx0ZXIoZHVwbCA9PSBGQUxTRSklPiUNCiAgc2VsZWN0KC1kdXBsKQ0KDQojIGZpbGwNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZiA8LSBwcm9mX3llYXJfcF9jX2dfYV9sX2YgJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQpJT4lDQogIGZpbGwoeWVhcmx5X2ZpZWxkLCB5ZWFybHlfc3ViZmllbGQsIHllYXJseV9hZGpfZG9tYWluLCAgLmRpcmVjdGlvbiA9ICJkb3duIikNCmBgYA0KDQpXcml0ZSB0aGlzIG91dDoNCmBgYHtyfQ0Kd3JpdGVfY3N2KHByb2ZfeWVhcl9wX2NfZ19hX2xfZiwgInBhbmVsX2RhdGFzZXRzL3Byb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHNfYWx0X2xleGlzX2ZpZWxkLmNzdiIpDQpgYGANCg0KUmVtb3ZlIHNvbWUgcmVkdW5kYW50IG9iamVjdHM6DQpgYGB7cn0NCnJtKG9hX3B1YnNfdG9waWNzKQ0KZ2MoKQ0KYGBgDQoNCiMgSW5zdGl0dXRpb24gZHVtbWllcw0KDQpMb2FkIHllYXJseSBpbnN0aXR1dGlvbiBkYXRhLiBUaGVuLCBmaW5kIHRoZSBtb3N0IGZyZXF1ZW50IGluc3RpdHV0aW9uYWwNCmFmZmlsaWF0aW9uIGZvciBlYWNoIHByb2YgZm9yIGVhY2ggeWVhci4NCg0KYGBge3J9DQojIGxvYWQgdGhlIGluc3RpdHV0aW9uIGRhdGENCmluc3RpdHV0aW9uX3llYXJseV9kYXRhIDwtIGRiUmVhZFRhYmxlKGNvbiwgIm9hX3Byb2ZfeWVhcmx5X2FmZmlsaWF0aW9ucyIpDQojIG1lcmdlIGJhY2sgdG8gTkFSQ0lTIElEcw0Kb2FfaWRzIDwtIGRiUmVhZFRhYmxlKGNvbiwgIm9hX2lkX21hcHBpbmciKQ0KaW5zdGl0dXRpb25feWVhcmx5X2RhdGEgPC0gbWVyZ2UoaW5zdGl0dXRpb25feWVhcmx5X2RhdGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYV9pZHNbYygicHJvZmlsZV9pZCIsICJvYV9pZCIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5LnggPSAiYXVfaWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkueSA9ICJvYV9pZCIpDQoNCmBgYA0KDQpOb3csIHJlY29kZSB0aGUgaW5zdGl0dXRpb25zIGNhcHR1cmUgVW5pdmVyc2l0eSB1bml0cyBhbmQgVU1DcyBhc3NvY2lhdGVkIHRvIGFsbCB0aGUgRHV0Y2ggdW5pdmVyc2l0aWVzLCBiaW5uaW5nDQpvdGhlciBpbnN0aXR1dGlvbnMgKGFsc28gaW5jbHVkaW5nIGUuZy4sIEhvZ2VzaG9vbHMsIGdvdmVybm1lbnRhbCBpbnN0aXR1dGVzLCBhbmQgZm9yZWlnbiBpbnN0aXR1dGlvbnMgYXMgIk90aGVyIikuDQpgYGB7cn0NCiMgd2UgbWFudWFsbHkgZXh0cmFjdCB0aGUgcmVsZXZhbnQgdW5pdmVyc2l0eSB1bml0cyBmcm9tIHRoZSBPcGVuQWxleCBkYXRhc2V0DQp1dmFfc3RyaW5nIDwtIGMoIlVuaXZlcnNpdHkgb2YgQW1zdGVyZGFtIiwNCiAgICAgICAgICAgICAgICAiQW1zdGVyZGFtIFVuaXZlcnNpdHkgTWVkaWNhbCBDZW50ZXJzIiwNCiAgICAgICAgICAgICAgICAiQW1zdGVyZGFtIE5ldXJvc2NpZW5jZSIsDQogICAgICAgICAgICAgICAgIkFtc3RlcmRhbSBVbml2ZXJzaXR5IG9mIHRoZSBBcnRzIiwNCiAgICAgICAgICAgICAgICAiQWNhZGVtaWMgQ2VudGVyIGZvciBEZW50aXN0cnkgQW1zdGVyZGFtIiwNCiAgICAgICAgICAgICAgICAiQ2FuY2VyIENlbnRlciBBbXN0ZXJkYW0iKQ0KDQp2dV9zdHJpbmcgPC0gYygiVnJpamUgVW5pdmVyc2l0ZWl0IEFtc3RlcmRhbSIsDQogICAgICAgICAgICAgICAiQW1zdGVyZGFtIFVNQyBMb2NhdGlvbiBWVW1jIikNCg0KcnVnX3N0cmluZyA8LSBjKCJVbml2ZXJzaXR5IG9mIEdyb25pbmdlbiIsDQogICAgICAgICAgICAgICAgIlVuaXZlcnNpdHkgTWVkaWNhbCBDZW50ZXIgR3JvbmluZ2VuIiwNCiAgICAgICAgICAgICAgICAiRGlhbHlzZSBDZW50cnVtIEdyb25pbmdlbiIpDQoNCmxlaWRlbl9zdHJpbmcgPC0gYygiTGVpZGVuIFVuaXZlcnNpdHkiLA0KICAgICAgICAgICAgICAgICAgICJMZWlkZW4gVW5pdmVyc2l0eSBNZWRpY2FsIENlbnRlciIsDQogICAgICAgICAgICAgICAgICAgIkxlaWRlbiBPYnNlcnZhdG9yeSIpDQoNCm1hYXN0cmljdF9zdHJpbmcgPC0gYygiTWFhc3RyaWNodCBVbml2ZXJzaXR5IiwNCiAgICAgICAgICAgICAgICAgICAgICAiTWFhc3RyaWNodCBVbml2ZXJzaXR5IE1lZGljYWwgQ2VudHJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiTWFhc3RyaWNodCBTY2hvb2wgb2YgTWFuYWdlbWVudCIsDQogICAgICAgICAgICAgICAgICAgICAgIkNsaW5pY2FsIFRyaWFsIENlbnRlciBNYWFzdHJpY2h0IikNCg0KcnVfc3RyaW5nIDwtIGMoIlJhZGJvdWQgVW5pdmVyc2l0eSBOaWptZWdlbiIsDQogICAgICAgICAgICAgICAiUmFkYm91ZCBVbml2ZXJzaXR5IE1lZGljYWwgQ2VudGVyIiwNCiAgICAgICAgICAgICAgICJSYWRib3VkIEluc3RpdHV0ZSBmb3IgTW9sZWN1bGFyIExpZmUgU2NpZW5jZXMiKQ0KDQoNCmV1X3N0cmluZyA8LSBjKCJFcmFzbXVzIFVuaXZlcnNpdHkgUm90dGVyZGFtIiwNCiAgICAgICAgICAgICAgICJFcmFzbXVzIE1DIiwNCiAgICAgICAgICAgICAgICJFcmFzbXVzIE1DIENhbmNlciBJbnN0aXR1dGUiLA0KICAgICAgICAgICAgICAgIkVyYXNtdXMgTUMgLSBTb3BoaWEgQ2hpbGRyZW7igJlzIEhvc3BpdGFsIiwNCiAgICAgICAgICAgICAgICJFcmFzbXVzIE9wdGljYWwgSW1hZ2luZyBDZW50cmUiKQ0KDQp0aWxidXJnX3N0cmluZyA8LSBjKCJUaWxidXJnIFVuaXZlcnNpdHkiKQ0KDQp1dV9zdHJpbmcgPC0gYygiVXRyZWNodCBVbml2ZXJzaXR5IiwNCiAgICAgICAgICAgICAgIlVuaXZlcnNpdHkgTWVkaWNhbCBDZW50ZXIgVXRyZWNodCIpDQoNCmRlbGZ0X3N0cmluZyA8LSBjKCJEZWxmdCBVbml2ZXJzaXR5IG9mIFRlY2hub2xvZ3kiKQ0KDQplaW5kaG92ZW5fc3RyaW5nIDwtIGMoIkVpbmRob3ZlbiBVbml2ZXJzaXR5IG9mIFRlY2hub2xvZ3kiKQ0KDQp0d2VudGVfc3RyaW5nIDwtIGMoIlVuaXZlcnNpdHkgb2YgVHdlbnRlIikNCg0Kd2FnZW5pbmdlbl9zdHJpbmcgPC0gYygiV2FnZW5pbmdlbiBVbml2ZXJzaXR5ICYgUmVzZWFyY2giKQ0KDQppbnN0aXR1dGlvbl95ZWFybHlfZGF0YSRkdXRjaF91bmlfdmFyIDwtIGlmZWxzZSgNCiAgaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZGlzcGxheV9uYW1lICVpbiUgdXZhX3N0cmluZywNCiAgInVuaV8xIiwNCiAgaWZlbHNlKA0KICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGRpc3BsYXlfbmFtZSAlaW4lIHZ1X3N0cmluZywNCiAgICAidW5pXzIiLA0KICAgIGlmZWxzZSgNCiAgICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGRpc3BsYXlfbmFtZSAlaW4lIHJ1Z19zdHJpbmcsDQogICAgICAidW5pXzMiLA0KICAgICAgaWZlbHNlKA0KICAgICAgICBpbnN0aXR1dGlvbl95ZWFybHlfZGF0YSRkaXNwbGF5X25hbWUgJWluJSBsZWlkZW5fc3RyaW5nLA0KICAgICAgICAidW5pXzQiLA0KICAgICAgICBpZmVsc2UoDQogICAgICAgICAgaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZGlzcGxheV9uYW1lICVpbiUgbWFhc3RyaWN0X3N0cmluZywNCiAgICAgICAgICAidW5pXzUiLA0KICAgICAgICAgIGlmZWxzZSgNCiAgICAgICAgICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGRpc3BsYXlfbmFtZSAlaW4lIHJ1X3N0cmluZywNCiAgICAgICAgICAgICJ1bmlfNiIsDQogICAgICAgICAgICBpZmVsc2UoDQogICAgICAgICAgICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGRpc3BsYXlfbmFtZSAlaW4lIGV1X3N0cmluZywNCiAgICAgICAgICAgICAgInVuaV83IiwNCiAgICAgICAgICAgICAgaWZlbHNlKA0KICAgICAgICAgICAgICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGRpc3BsYXlfbmFtZSAlaW4lIHRpbGJ1cmdfc3RyaW5nLA0KICAgICAgICAgICAgICAgICJ1bmlfOCIsDQogICAgICAgICAgICAgICAgaWZlbHNlKA0KICAgICAgICAgICAgICAgICAgaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZGlzcGxheV9uYW1lICVpbiUgdXVfc3RyaW5nLA0KICAgICAgICAgICAgICAgICAgInVuaV85IiwNCiAgICAgICAgICAgICAgICAgIGlmZWxzZSgNCiAgICAgICAgICAgICAgICAgICAgaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZGlzcGxheV9uYW1lICVpbiUgZGVsZnRfc3RyaW5nLA0KICAgICAgICAgICAgICAgICAgICAidW5pXzEwIiwNCiAgICAgICAgICAgICAgICAgICAgaWZlbHNlKA0KICAgICAgICAgICAgICAgICAgICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGRpc3BsYXlfbmFtZSAlaW4lIGVpbmRob3Zlbl9zdHJpbmcsDQogICAgICAgICAgICAgICAgICAgICAgInVuaV8xMSIsDQogICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKA0KICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZGlzcGxheV9uYW1lICVpbiUgdHdlbnRlX3N0cmluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICJ1bmlfMTIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKA0KICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0aXR1dGlvbl95ZWFybHlfZGF0YSRkaXNwbGF5X25hbWUgJWluJSB3YWdlbmluZ2VuX3N0cmluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgInVuaV8xMyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3RoZXIiKSkpKSkpKSkpKSkpKQ0KDQojIG5vdywgZW5jb2RlIHRoZSBkaXBsYXkgbmFtZXMgb2YgaW5zdGl0dXRpb25zIHRvIHByb3RlY3QgcHJvZmVzc29ycycgYW5vbnltaXR5IGluIHRoZSBmaW5hbCBzZXQNCiMgZ2VuZXJhdGUgbmV3IElEIG1hcHBpbmcNCnVuaXF1ZV9pZCA8LSB1bmlxdWUoaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkaWQpDQpuZXdfaWRzIDwtIHBhc3RlKCJpbnN0IiwgYygxOmxlbmd0aCh1bmlxdWVfaWQpKSwgc2VwPSAiXyIpDQoNCm5ld19pZF9tYXBwaW5nIDwtIGRhdGEuZnJhbWUoaWQgPSB1bmlxdWVfaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RfaWQgPSBuZXdfaWRzKQ0KDQpkYldyaXRlVGFibGUoY29uLCAiYW5vbnltb3VzX2luc3RpdHV0aW9uX2lkX21hcHBpbmciLCBuZXdfaWRfbWFwcGluZywgcm93Lm5hbWVzPUZBTFNFLCBhcHBlbmQ9VFJVRSkNCg0KIyBjb21iaW5lIHRoZSBwYW5lbCB3aXRoIHRoZSBuZXcgSUQgbWFwcGluZw0KaW5zdGl0dXRpb25feWVhcmx5X2RhdGEgPC0gbWVyZ2UoaW5zdGl0dXRpb25feWVhcmx5X2RhdGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfaWRfbWFwcGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImlkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCg0KYGBgDQoNCkdldCB0aGUgbW9kZWwgaW5zdGl0dXRpb24gaW4gZ2VuZXJhbCwgYW5kIGFsc28gYmV0d2VlbiAyMDEyIGFuZCAyMDIzLCB3aGljaCBpcyBvdXINCmZvY3VzIHBlcmlvZDoNCmBgYHtyfQ0KbW9kYWxfaW5zdGl0dXRpb24gPC0gaW5zdGl0dXRpb25feWVhcmx5X2RhdGEgJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHllYXJzKSU+JQ0KICBzdW1tYXJpc2UoaW5zdGl0dXRpb25faWRfeWVhcmx5ID0gY29sbGFwc2U6OmZtb2RlKGluc3RfaWQpLA0KICAgICAgICAgICAgaW5zdGl0dXRpb25fZHV0Y2hfeWVhcmx5ID0gY29sbGFwc2U6OmZtb2RlKGR1dGNoX3VuaV92YXIpKQ0KDQpjb2xuYW1lcyhtb2RhbF9pbnN0aXR1dGlvbilbMl0gPC0gInllYXIiDQoNCm1vZGFsX2luc3RpdHV0aW9uXzIwMTIgPC0gaW5zdGl0dXRpb25feWVhcmx5X2RhdGEgJT4lDQogIGZpbHRlcih5ZWFycyA+PSAyMDEyKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkLCB5ZWFycyklPiUNCiAgc3VtbWFyaXNlKGluc3RpdHV0aW9uX2lkX3llYXJseV9zaW5jZTIwMTIgPSBjb2xsYXBzZTo6Zm1vZGUoaW5zdF9pZCksDQogICAgICAgICAgICBpbnN0aXR1dGlvbl9kdXRjaF95ZWFybHlfc2luY2UyMDEyID0gY29sbGFwc2U6OmZtb2RlKGR1dGNoX3VuaV92YXIpKQ0KDQpjb2xuYW1lcyhtb2RhbF9pbnN0aXR1dGlvbl8yMDEyKVsyXSA8LSAieWVhciINCmBgYA0KUHJlcGFyZSB0aGUgZm9sbG93aW5nIGFzIHdlbGw6IG1ha2Ugc3VyZSB0aGF0IGlmIGEgZHV0Y2ggdW5pdmVyc2l0eSBhZmZpbGlhdG9uIG1ha2VzIHVwIGF0IGxlYXN0IGFuIGVxdWFsIHBhcnQgb2YgYWZmaWxpYXRpb25zDQppbiBhIHllYXIgdG8gZGVub3RlIHRoYXQgeWVhcidzIGFmZmlsaWF0aW9uIGFzIHRoZSBkdXRjaCB1bml2ZXJzaXR5IGFmZmlsaWF0aW9uLg0KDQpgYGB7cn0NCnByb2ZpbGVfaWRzIDwtIHVuaXF1ZShwcm9mX3llYXJfcF9jX2dfYV9sX2YkcHJvZmlsZV9pZCkNCg0KaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkaW5zdF9pZF9kdXRjaCA8LSBpZmVsc2UoaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZHV0Y2hfdW5pX3ZhciAhPSAib3RoZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGl0dXRpb25feWVhcmx5X2RhdGEkZHV0Y2hfdW5pX3ZhciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RpdHV0aW9uX3llYXJseV9kYXRhJGluc3RfaWQpDQoNCnByb2ZfYWZmaWxpYXRpb25zX3llYXJseV9kdXRjaCA8LSBkYXRhLmZyYW1lKG1hdHJpeChOQSwgbmNvbCA9IDAsIG5yb3cgPSAwKSkNCg0KZm9yIChwcm9mIGluIHByb2ZpbGVfaWRzKXsNCiAgDQogICMgZ2V0IHRoaXMgcHJvZmVzc29yJ3MgYWZmaWxpYXRpb25zDQogIHByb2ZfYWZmaWxpYXRpb25zIDwtIGluc3RpdHV0aW9uX3llYXJseV9kYXRhICU+JQ0KICAgIGZpbHRlcihwcm9maWxlX2lkID09IHByb2YpJT4lDQogICAgZ3JvdXBfYnkoeWVhcnMsIGluc3RfaWRfZHV0Y2gpJT4lDQogICAgc3VtbWFyaXNlKG4gPSBuKCkpICU+JQ0KICAgIG11dGF0ZShmcmVxID0gbiAvIHN1bShuKSkNCiAgDQogIGlmKG5yb3cocHJvZl9hZmZpbGlhdGlvbnMpID4gMCl7DQogIA0KICAjIGdldCB5ZWFybHkgdG90YWxzDQogIHByb2ZfeWVhcmx5IDwtIGluc3RpdHV0aW9uX3llYXJseV9kYXRhICU+JQ0KICAgIGZpbHRlcihwcm9maWxlX2lkID09IHByb2YpJT4lDQogICAgZ3JvdXBfYnkoeWVhcnMpJT4lDQogICAgc3VtbWFyaXNlKHllYXJseV90b3RhbCA9IG4oKSkNCiAgDQogICMgbWVyZ2UNCiAgcHJvZl9hZmZpbGlhdGlvbnMgPC0gbWVyZ2UocHJvZl9hZmZpbGlhdGlvbnMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfeWVhcmx5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJ5ZWFycyIpDQogIA0KICAjIGRldGVybWluZSB0aGUgbWluaW1hbCBzaGFyZSBmb3IgZXF1YWwgc2hhcmUgb2YgYSBkdXRjaCBpbnN0aXR1dGlvbg0KICBwcm9mX2FmZmlsaWF0aW9ucyRpZGVhbF9zaGFyZSA8LSAxL3Byb2ZfYWZmaWxpYXRpb25zJHllYXJseV90b3RhbA0KICANCiAgIyBtYXJrIGFsbCBkdXRjaCB1bml2ZXJzaXRpZXMgYXMgb25lDQogIHByb2ZfYWZmaWxpYXRpb25zJGR1dGNoX3VuaV9tYWluIDwtIGlmZWxzZShwcm9mX2FmZmlsaWF0aW9ucyRmcmVxID09IHByb2ZfYWZmaWxpYXRpb25zJGlkZWFsX3NoYXJlICYgc3RyX2RldGVjdChwcm9mX2FmZmlsaWF0aW9ucyRpbnN0X2lkX2R1dGNoLCAidW5pIiksICJ5ZXMiLCAibm8iKQ0KICANCiAgIyBub3cgZmlsdGVyIG91dCBvbmx5IHRoZSBkdXRjaCB1bml2ZXJzaXR5IGFmZmlsaWF0aW9ucw0KICBwcm9mX2FmZmlsaWF0aW9uc19kdXRjaCA8LSBwcm9mX2FmZmlsaWF0aW9ucyAlPiUNCiAgICBmaWx0ZXIoZHV0Y2hfdW5pX21haW4gPT0gInllcyIpJT4lDQogICAgc2VsZWN0KHllYXJzLCBpbnN0X2lkX2R1dGNoKQ0KICANCiAgaWYgKG5yb3cocHJvZl9hZmZpbGlhdGlvbnNfZHV0Y2gpID4gMCl7DQogIA0KICBwcm9mX2FmZmlsaWF0aW9uc19kdXRjaCRwcm9maWxlX2lkIDwtIHByb2YNCiAgcHJvZl9hZmZpbGlhdGlvbnNfZHV0Y2gkaW5zdGl0dXRpb25faWRfeWVhcmx5IDwtIHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoJGluc3RfaWRfZHV0Y2gNCiAgDQogIGNvbG5hbWVzKHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoKVsyXSA8LSBjKCJpbnN0aXR1dGlvbl9kdXRjaF95ZWFybHkiKQ0KICB9DQoNCiAgIyBmb3IgeWVhcnMgd2l0aG91dCBkdXRjaCBhZmZpbGlhdGlvbiwgZ2V0IHRoZSBtb2RhbCBvbmUNCiAgcHJvZl9hZmZpbGlhdGlvbnNfbm9uZHV0Y2ggPC0gaW5zdGl0dXRpb25feWVhcmx5X2RhdGEgJT4lDQogICAgZmlsdGVyKHByb2ZpbGVfaWQgPT0gcHJvZiAmICF5ZWFycyAlaW4lIHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoJHllYXJzKSU+JQ0KICAgIGdyb3VwX2J5KHByb2ZpbGVfaWQsIHllYXJzKSU+JQ0KICAgIHN1bW1hcmlzZShpbnN0aXR1dGlvbl9pZF95ZWFybHkgPSBjb2xsYXBzZTo6Zm1vZGUoaW5zdF9pZCksDQogICAgICAgICAgICAgIGluc3RpdHV0aW9uX2R1dGNoX3llYXJseSA9IGNvbGxhcHNlOjpmbW9kZShkdXRjaF91bmlfdmFyKSkNCiAgDQogIGlmIChucm93KHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoKSA+IDApew0KICAgIHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoIDwtIHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoW2NvbG5hbWVzKHByb2ZfYWZmaWxpYXRpb25zX25vbmR1dGNoKV0NCiAgfQ0KICANCiAgaWYgKG5yb3cocHJvZl9hZmZpbGlhdGlvbnNfZHV0Y2gpID4gMCAmIG5yb3cocHJvZl9hZmZpbGlhdGlvbnNfbm9uZHV0Y2gpID4gMCApew0KICANCiAgcHJvZl9hZmZsaWF0aW9uc195ZWFybHlfYWxsIDwtIHJiaW5kKHByb2ZfYWZmaWxpYXRpb25zX2R1dGNoLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9hZmZpbGlhdGlvbnNfbm9uZHV0Y2gpDQogIH0NCiAgaWYgKG5yb3cocHJvZl9hZmZpbGlhdGlvbnNfZHV0Y2gpID4gMCAmIG5yb3cocHJvZl9hZmZpbGlhdGlvbnNfbm9uZHV0Y2gpID09IDAgKXsNCiAgDQogIHByb2ZfYWZmbGlhdGlvbnNfeWVhcmx5X2FsbCA8LSBwcm9mX2FmZmlsaWF0aW9uc19kdXRjaA0KICB9DQogIA0KICBpZiAobnJvdyhwcm9mX2FmZmlsaWF0aW9uc19kdXRjaCkgPT0gMCAmIG5yb3cocHJvZl9hZmZpbGlhdGlvbnNfbm9uZHV0Y2gpID4gMCApew0KICANCiAgcHJvZl9hZmZsaWF0aW9uc195ZWFybHlfYWxsIDwtIHByb2ZfYWZmaWxpYXRpb25zX25vbmR1dGNoDQogIH0NCiAgDQogIA0KICBwcm9mX2FmZmxpYXRpb25zX3llYXJseV9hbGwgPC0gcHJvZl9hZmZsaWF0aW9uc195ZWFybHlfYWxsICU+JSANCiAgICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXJzKSU+JQ0KICAgIGRpc3RpbmN0KHllYXJzLCBpbnN0aXR1dGlvbl9kdXRjaF95ZWFybHksIC5rZWVwX2FsbCA9IFRSVUUpDQogIA0KICBjb2xuYW1lcyhwcm9mX2FmZmxpYXRpb25zX3llYXJseV9hbGwpWzJdIDwtICJ5ZWFyIg0KICANCiAgcHJvZl9hZmZpbGlhdGlvbnNfeWVhcmx5X2R1dGNoIDwtIHJiaW5kKHByb2ZfYWZmaWxpYXRpb25zX3llYXJseV9kdXRjaCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfYWZmbGlhdGlvbnNfeWVhcmx5X2FsbCkNCiAgfQ0KICANCiAgcHJpbnQod2hpY2gocHJvZmlsZV9pZHMgPT0gcHJvZikpDQp9DQoNCmNvbG5hbWVzKHByb2ZfYWZmaWxpYXRpb25zX3llYXJseV9kdXRjaClbNF0gPC0gImluc3RpdHV0aW9uX2R1dGNoX3llYXJseV9zdHJpY3QiDQpgYGANCg0KRGVkdXBsaWNhdGUgdGhpczoNCmBgYHtyfQ0KIHByb2ZfYWZmaWxpYXRpb25zX3llYXJseV9kdXRjaF9kZWR1cGUgPC0gcHJvZl9hZmZpbGlhdGlvbnNfeWVhcmx5X2R1dGNoICU+JSANCiAgZGlzdGluY3QocHJvZmlsZV9pZCwgeWVhciwgLmtlZXBfYWxsID0gVFJVRSkNCmBgYA0KDQoNCk1lcmdlIHdpdGggdGhlIHBhbmVsOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaSA8LSBtZXJnZShwcm9mX3llYXJfcF9jX2dfYV9sX2YsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbF9pbnN0aXR1dGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxfaW5zdGl0dXRpb25fMjAxMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9hZmZpbGlhdGlvbnNfeWVhcmx5X2R1dGNoX2RlZHVwZVtjKCJwcm9maWxlX2lkIiwgInllYXIiLCAiaW5zdGl0dXRpb25fZHV0Y2hfeWVhcmx5X3N0cmljdCIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQpgYGANCg0KRm9yIHllYXJzIHdoZXJlIHdlIGNhbid0IG9idGFpbiB0aGlzIGluZm9ybWF0aW9uIGZyb20gcHVibGljYXRpb24gZGF0YSwNCndlIHVzZSB0aGUgbGFzdCBrbm93biBpbnN0aXR1dGlvbmFsIGFmZmlsaWF0aW9uOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaSA8LSBwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaSAlPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKSU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkKSU+JQ0KICBmaWxsKGluc3RpdHV0aW9uX2lkX3llYXJseSwgaW5zdGl0dXRpb25fZHV0Y2hfeWVhcmx5LCBpbnN0aXR1dGlvbl9pZF95ZWFybHlfc2luY2UyMDEyLCBpbnN0aXR1dGlvbl9kdXRjaF95ZWFybHlfc2luY2UyMDEyLCBpbnN0aXR1dGlvbl9kdXRjaF95ZWFybHlfc3RyaWN0LCAuZGlyZWN0aW9uID0gImRvd24iKQ0KYGBgDQoNCk5vdyBnZXQgdGhlaXIgY2FyZWVyLXdpZGUgYWZmaWxpYXRpb25zOg0KYGBge3J9DQptb2RhbF9pbnN0aXR1dGlvbl90b3RhbCA8LSBpbnN0aXR1dGlvbl95ZWFybHlfZGF0YSAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgc3VtbWFyaXNlKGluc3RpdHV0aW9uX2lkX3RvdGFsID0gY29sbGFwc2U6OmZtb2RlKGluc3RfaWQpLA0KICAgICAgICAgICAgaW5zdGl0dXRpb25fZHV0Y2hfdG90YWwgPSBjb2xsYXBzZTo6Zm1vZGUoZHV0Y2hfdW5pX3ZhcikpDQoNCg0KbW9kYWxfaW5zdGl0dXRpb25fdG90YWxfMjAxMiA8LSBpbnN0aXR1dGlvbl95ZWFybHlfZGF0YSAlPiUNCiAgZmlsdGVyKHllYXJzID49IDIwMTIpJT4lDQogIGdyb3VwX2J5KHByb2ZpbGVfaWQpJT4lDQogIHN1bW1hcmlzZShpbnN0aXR1dGlvbl9pZF90b3RhbF9zaW5jZTIwMTIgPSBjb2xsYXBzZTo6Zm1vZGUoaW5zdF9pZCksDQogICAgICAgICAgICBpbnN0aXR1dGlvbl9kdXRjaF90b3RhbF9zaW5jZTIwMTIgPSBjb2xsYXBzZTo6Zm1vZGUoZHV0Y2hfdW5pX3ZhcikpDQoNCmBgYA0KDQpNZXJnZSB3aXRoIHRoZSBwYW5lbDoNCmBgYHtyfQ0KcHJvZl95ZWFyX3BfY19nX2FfbF9mX2kgPC0gbWVyZ2UocHJvZl95ZWFyX3BfY19nX2FfbF9mX2ksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbF9pbnN0aXR1dGlvbl90b3RhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQpwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaSA8LSBtZXJnZShwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsX2luc3RpdHV0aW9uX3RvdGFsXzIwMTIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCmBgYA0KDQpPcGVuQWxleCBpbmZvIG1pZ2h0IG5vdCBhbHdheXMgYmUgYWNjdXJhdGUuIEZldGNoIHRoZSBOQVJDSVMgYWZmaWxpYXRpb24gaW5mb3JtYXRpb246DQpgYGB7cn0NCm5hcmNpc19pbnN0aXR1dGlvbiA8LSBkYlJlYWRUYWJsZShjb24sICJuYXJjaXNfaW5zdGl0dXRpb24iKQ0KDQpjb2xuYW1lcyhuYXJjaXNfaW5zdGl0dXRpb24pWzJdIDwtICJpbnN0aXR1dGlvbl9kdXRjaF90b3RhbF9uYXJjaXMiDQoNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXJjaXNfaW5zdGl0dXRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gInByb2ZpbGVfaWQiKQ0KYGBgDQoNCg0KV3JpdGUgdGhpcyBvdXQ6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaSwgInBhbmVsX2RhdGFzZXRzL3Byb2ZfeWVhcl9wdWJzX2NpdGF0aW9uc19ncmFudHNfYWx0X2xleGlzX2ZpZWxkX2luc3RpdHV0aW9uLmNzdiIpDQpgYGANCg0KUmVtb3ZlIHNvbWUgcmVkdW5kYW50IG9iamVjdHM6DQpgYGB7cn0NCnJtKGluc3RpdHV0aW9uX3llYXJseV9kYXRhKQ0KZ2MoKQ0KYGBgDQoNCiMgRmlyc3QsIGxhc3QgYXV0aG9yc2hpcA0KDQpFeHRyYWN0aW5nIGluZm9ybWF0aW9uIG9uIHByb2Zlc3NvcnMnIGF1dGhvcnNoaXAgb24gZWFjaCBwYXBlcjoNCmBgYHtyfQ0Kb2FfcHJvZl9wdWJzX2F1dGhvcnNoaXAgPC0gb2FfcHJvZl9wdWJzICU+JQ0KICBkaXN0aW5jdChpZCwgLmtlZXBfYWxsID0gVFJVRSklPiUNCiAgc2VsZWN0KGlkLCBwdWJsaWNhdGlvbl95ZWFyLCBhdXRob3JfcG9zaXRpb24sIHR5cGUpDQoNCiMgbWVyZ2Ugd2l0aCBwcm9mZXNzb3IgZGF0YQ0Kb2FfcHJvZl9wdWJzX2F1dGhvcnNoaXAgPC0gbWVyZ2Uob2FfcHJvZl9wdWJzX2F1dGhvcnNoaXAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYV9wcm9mX3B1Yl9tYXRjaGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImlkIikNCg0KYGBgDQoNCkNoZWNrIG51bWJlciBvZiBjb2F1dGhvcnMgZm9yIGVhY2ggcGFwZXI6DQpgYGB7cn0NCmNvYXV0aG9yX2luZm9fcGFwZXIgPC0gY29hdXRob3JfaW5mbyAgJT4lDQogIGdyb3VwX2J5KGlkKSU+JQ0KICBzdW1tYXJpc2UobiA9IG4oKSkNCmBgYA0KDQpNZXJnZSB0aGUgcHJvZmVzc29yJ3MgYXV0aG9yc2hpcCBpbmZvIHdpdGggdGhlIHRvdGFsIG51bWJlciBvZiBhdXRob3JzIGZvciBlYWNoIHBhcGVyOg0KYGBge3J9DQpvYV9wcm9mX3B1YnNfYXV0aG9yc2hpcF9jb2EgPC0gbWVyZ2Uob2FfcHJvZl9wdWJzX2F1dGhvcnNoaXAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3JfaW5mb19wYXBlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJpZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQojIGRldGVybWluZSBzaW5nbGUgYXV0aG9yc2hpcA0Kb2FfcHJvZl9wdWJzX2F1dGhvcnNoaXBfY29hJGF1dGhvcl9wb3NpdGlvbiA8LSBpZmVsc2UoaXMubmEob2FfcHJvZl9wdWJzX2F1dGhvcnNoaXBfY29hJG4pLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaW5nbGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2FfcHJvZl9wdWJzX2F1dGhvcnNoaXBfY29hJGF1dGhvcl9wb3NpdGlvbikNCg0KIyByZXBsYWNlIE5BcyBpbiBuIHdpdGggb25lcw0Kb2FfcHJvZl9wdWJzX2F1dGhvcnNoaXBfY29hJG4gPC0gaWZlbHNlKGlzLm5hKG9hX3Byb2ZfcHVic19hdXRob3JzaGlwX2NvYSRuKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYV9wcm9mX3B1YnNfYXV0aG9yc2hpcF9jb2EkbikNCmBgYA0KDQoNCg0KR2V0IHllYXJseSBjb3VudHMgZm9yIGRpZmZlcmVudCBhdXRob3JzaGlwIHBvc2l0aW9uczoNCmBgYHtyfQ0KeWVhcmx5X2F1dGhvcnNoaXAgPC0gb2FfcHJvZl9wdWJzX2F1dGhvcnNoaXBfY29hICU+JQ0KICAgIGZpbHRlcighaXMubmEocHVibGljYXRpb25feWVhcikgJiBwdWJsaWNhdGlvbl95ZWFyID49IDE5NzMgJiBwdWJsaWNhdGlvbl95ZWFyIDw9IDIwMjMgJiANCiAgICAgICAgICAgdHlwZSAlaW4lIGMoImFydGljbGUiLCAiYm9vayIsICJib29rLWNoYXB0ZXIiKSklPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCwgcHVibGljYXRpb25feWVhcikgJT4lDQogIHN1bW1hcmlzZShuX3B1YnNfZmlyc3RfYXUgPSBzdW0oYXV0aG9yX3Bvc2l0aW9uID09ICJmaXJzdCIpLA0KICAgICAgICAgICAgbl9wdWJzX2xhc3RfYXUgPSBzdW0oYXV0aG9yX3Bvc2l0aW9uID09ICJsYXN0IiksDQogICAgICAgICAgICBuX3B1YnNfc2luZ2xlX2F1ID0gc3VtKGF1dGhvcl9wb3NpdGlvbiA9PSAic2luZ2xlIiksDQogICAgICAgICAgICBuX3B1YnNfYWxsX2F1ID0gbigpLA0KICAgICAgICAgICAgbl9wdWJzX3RvdGFsX2F1dGhvcnNoaXBzID0gc3VtKG4pKQ0KDQpjb2xuYW1lcyh5ZWFybHlfYXV0aG9yc2hpcClbMl0gPC0gInllYXIiDQpgYGANCk1lcmdlIHdpdGggdGhlIHBhbmVsOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcmx5X2F1dGhvcnNoaXAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQojIHJlcGxhY2Ugd2l0aCB6ZXJvZXMgd2hlcmUgYXBwcm9wcmlhdGUNCg0KcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYSA8LSBwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hJT4lIA0KICBtdXRhdGUobl9wdWJzX2ZpcnN0X2F1ICA9ICBpZmVsc2UoY291bnRfcHVicyA9PSAwLCAwICwgbl9wdWJzX2ZpcnN0X2F1KSwNCiAgICAgICAgIG5fcHVic19sYXN0X2F1ICA9ICBpZmVsc2UoY291bnRfcHVicyA9PSAwLCAwICwgbl9wdWJzX2xhc3RfYXUpLA0KICAgICAgICAgbl9wdWJzX3NpbmdsZV9hdSAgPSAgaWZlbHNlKGNvdW50X3B1YnMgPT0gMCwgMCAsIG5fcHVic19zaW5nbGVfYXUpLA0KICAgICAgICAgbl9wdWJzX2FsbF9hdSAgPSAgaWZlbHNlKGNvdW50X3B1YnMgPT0gMCwgMCAsIG5fcHVic19hbGxfYXUpLA0KICAgICAgICAgbl9wdWJzX3RvdGFsX2F1dGhvcnNoaXBzICA9ICBpZmVsc2UoY291bnRfcHVicyA9PSAwLCAwICwgbl9wdWJzX3RvdGFsX2F1dGhvcnNoaXBzKSwNCiAgKQ0KDQojIG1ha2Ugc29tZSBuZXcgdmFyaWFibGVzDQoNCnByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2Ekbl9wdWJzX2ZpcnN0X2xhc3Rfc2luZ2xlX2F1IDwtIHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2Ekbl9wdWJzX2ZpcnN0X2F1ICsgcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYSRuX3B1YnNfbGFzdF9hdSArIHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2Ekbl9wdWJzX3NpbmdsZV9hdQ0KDQpwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hJG5fcHVic19maXJzdF9zaW5nbGVfYXUgPC0gcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYSRuX3B1YnNfZmlyc3RfYXUgKyBwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hJG5fcHVic19zaW5nbGVfYXUNCg0KcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYSRuX3B1YnNfbGFzdF9zaW5nbGVfYXUgPC0gcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYSRuX3B1YnNfbGFzdF9hdSArIHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2Ekbl9wdWJzX3NpbmdsZV9hdQ0KYGBgDQoNCg0KV3JpdGUgdGhpcyBvdXQ6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hLCAicGFuZWxfZGF0YXNldHMvcHJvZl95ZWFyX3B1YnNfY2l0YXRpb25zX2dyYW50c19hbHRfbGV4aXNfZmllbGRfaW5zdGl0dXRpb25fYXV0aG9yc2hpcC5jc3YiKQ0KYGBgDQoNCiMgR2V0IHNvbWUgcmVtYWluaW5nIHRvdGFscw0KDQpHZXQgdG90YWxzIGZvciBzb21lIHJlbWFpbmluZyB2YXJpYWJsZXMNCmBgYHtyfQ0KcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYSA8LSBwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hICU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkKSU+JQ0KICBhcnJhbmdlKHllYXIpJT4lDQogIG11dGF0ZShzdW1fc2pyX3RvdGFsID0gY3Vtc3VtKHJlcGxhY2VfbmEoc3VtX3NqciwgMCkpLA0KICAgICAgICAgc3VtX2hpbmRleF90b3RhbCA9IGN1bXN1bShyZXBsYWNlX25hKHN1bV9zanIsIDApKSwNCiAgICAgICAgIGNvdW50X3ExX3RvdGFsID0gY3Vtc3VtKHJlcGxhY2VfbmEoY291bnRfcTEsIDApKSwNCiAgICAgICAgIGNvdW50X3NjaW1hZ29faW5kaWNhdG9yc190b3RhbCA9IGN1bXN1bShyZXBsYWNlX25hKGNvdW50X3NjaW1hZ29faW5kaWNhdG9ycywgMCkpLA0KICAgICAgICAgbl9wdWJzX2ZpcnN0X2F1X3RvdGFsID0gY3Vtc3VtKG5fcHVic19maXJzdF9hdSksDQogICAgICAgICBuX3B1YnNfbGFzdF9hdV90b3RhbCA9IGN1bXN1bShuX3B1YnNfbGFzdF9hdSksDQogICAgICAgICBuX3B1YnNfc2luZ2xlX2F1X3RvdGFsID0gY3Vtc3VtKG5fcHVic19zaW5nbGVfYXUpLA0KICAgICAgICAgbl9wdWJzX2FsbF9hdV90b3RhbCA9IGN1bXN1bShuX3B1YnNfYWxsX2F1KSwNCiAgICAgICAgIG5fcHVic190b3RhbF9hdXRob3JzaGlwc190b3RhbCA9IGN1bXN1bShuX3B1YnNfdG90YWxfYXV0aG9yc2hpcHMpLA0KICAgICAgICAgbl9wdWJzX2ZpcnN0X2xhc3Rfc2luZ2xlX2F1X3RvdGFsID0gY3Vtc3VtKG5fcHVic19maXJzdF9sYXN0X3NpbmdsZV9hdSkgDQogICklPiUNCiAgYXJyYW5nZShwcm9maWxlX2lkLCB5ZWFyKSU+JQ0KICB1bmdyb3VwKCklPiUNCiAgbXV0YXRlKHN1bV9zanJfdG90YWwgID0gIGlmZWxzZSh5ZWFyIDwgMTk5OSwgTkEgLCBzdW1fc2pyX3RvdGFsKSwNCiAgICAgICAgIHN1bV9oaW5kZXhfdG90YWwgID0gIGlmZWxzZSh5ZWFyIDwgMTk5OSwgTkEgLCBzdW1faGluZGV4X3RvdGFsKSwNCiAgICAgICAgIGNvdW50X3ExX3RvdGFsICA9ICBpZmVsc2UoeWVhciA8IDE5OTksIE5BICwgY291bnRfcTFfdG90YWwpLA0KICAgICAgICAgY291bnRfc2NpbWFnb19pbmRpY2F0b3JzX3RvdGFsID0gaWZlbHNlKHllYXIgPCAxOTk5LCBOQSwgY291bnRfc2NpbWFnb19pbmRpY2F0b3JzX3RvdGFsKSkNCg0KYGBgDQoNCg0KIyBMYWdnZWQgdmFyaWFibGVzDQoNCk5ldyBkYXRhIGZyYW1lIGZvciBsYWdnaW5nOg0KYGBge3J9DQpwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hX2wgPC0gcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYQ0KY29sbmFtZXMocHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYV9sKVstYygxOjIpXSA8LSBwYXN0ZTAoY29sbmFtZXMocHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYV9sKVstYygxOjIpXSwgIl9sIikNCmBgYA0KDQpMYWcgdGhlIHJlbGV2YW50IHZhcmlhYmxlczoNCmBgYHtyfQ0KcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYV9sIDwtIHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2FfbCAlPiUNCiAgYXJyYW5nZSh5ZWFyKSAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCkgJT4lDQogIG11dGF0ZV9hdCh2YXJzKGNvbnRhaW5zKCdfbCcpKSwgbGFnKSU+JQ0KICBhcnJhbmdlKHByb2ZpbGVfaWQsIHllYXIpDQpgYGANCg0KTWVyZ2Ugd2l0aCB0aGUgbm9uLWxhZ2dlZCBwYW5lbDoNCmBgYHtyfQ0KcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYV9sIDwtIG1lcmdlKHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2EsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYV9sLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIikpDQpgYGANCg0KV3JpdGUgdGhpcyBvdXQ6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3llYXJfcF9jX2dfYV9sX2ZfaV9hX2wsICJwYW5lbF9kYXRhc2V0cy9wcm9mX3llYXJfcHVic19jaXRhdGlvbnNfZ3JhbnRzX2FsdF9sZXhpc19maWVsZF9pbnN0aXR1dGlvbl9hdXRob3JzaGlwX2xhZy5jc3YiKQ0KYGBgDQoNCg0KIyBDb2F1dGhvciBkYXRhDQoNCkZldGNoIGFsbCBjb2F1dGhvciBkYXRhLCBpbmNsdWRpbmcgZnVsbCBpbmZvLCB0aGVpciBpbmZlcnJlZCBnZW5kZXIsIGFuZCBjaXRhdGlvbiBjb3VudHMuDQpgYGB7cn0NCm9hX2NvYXV0aG9yX2luZm8gPC0gZGJSZWFkVGFibGUoY29uLCAib2FfY29hdXRob3JfaW5mbyIpDQpvYV9jb2F1dGhvcl9pbmZvX25hbWUgPC0gZGJSZWFkVGFibGUoY29uLCAib2FfY29hdXRob3JfbmFtZV9saXN0IikNCmNvYXV0aG9yX2dlbmRlciA8LSBkYlJlYWRUYWJsZShjb24sICJjb2F1dGhvcl9uYW1lX2dlbmRlciIpDQojIGFkZCBwcm9mZXNzb3IgZ2VuZGVyIG5hbWVzLCBhcyB0aGVzZSBhcmUgc3BlY2lmaWMgZm9yIHRoZSANCiMgRHV0Y2ggY29udGV4dCBhbmQgbWlnaHQgaGVscCBmdXJ0aGVyDQpwcm9mX2dlbmRlcl9uYW1lcyA8LSBkYlJlYWRUYWJsZShjb24sICJnZW5kZXJfdGFibGUiKSU+JQ0KICBkaXN0aW5jdChmaXJzdCwgLmtlZXBfYWxsID0gVFJVRSklPiUNCiAgc2VsZWN0KGZpcnN0LCBpbmZlcnJlZF9nZW5kZXIpDQpvYV9jb2F1dGhvcl9pbmZvX2Z1bGwgPC0gZGJSZWFkVGFibGUoY29uLCAib2FfY29hdXRob3JfaW5mb19mdWxsIikNCmBgYA0KDQpNYXRjaCBuYW1lIGdlbmRlciBpbmZlcmVuY2Ugd2l0aCBjb2F1dGhvciBuYW1lczoNCmBgYHtyfQ0KY29sbmFtZXMoY29hdXRob3JfZ2VuZGVyKVsyXSA8LSAiZmlyc3QiDQpjb2F1dGhvcl9nZW5kZXIgPC0gY29hdXRob3JfZ2VuZGVyICU+JQ0KICBmaWx0ZXIoZmlyc3QgIT0gIiIpJT4lDQogIHNlbGVjdChmaXJzdCwgZ2VuZGVyKQ0KDQojIHJlY29kZSB0aGUgdmFyaWFibGUNCmNvYXV0aG9yX2dlbmRlciRnZW5kZXIgPC0gaWZlbHNlKGNvYXV0aG9yX2dlbmRlciRnZW5kZXIgPT0gIm1hbGUiLCAibSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoY29hdXRob3JfZ2VuZGVyJGdlbmRlciA9PSAiZmVtYWxlIiwgInciLCBjb2F1dGhvcl9nZW5kZXIkZ2VuZGVyKSkNCg0KY29sbmFtZXMocHJvZl9nZW5kZXJfbmFtZXMpWzJdIDwtICJnZW5kZXIiDQoNCiMgY29tYmluZQ0KYWxsX25hbWVzIDwtIHJiaW5kKGNvYXV0aG9yX2dlbmRlciwNCiAgICAgICAgICAgICAgICAgICBwcm9mX2dlbmRlcl9uYW1lcyklPiUNCiAgZGlzdGluY3QoZmlyc3QsIC5rZWVwX2FsbCA9IFRSVUUpDQoNCg0KIyBmaWx0ZXIgb3V0ICJhbmQiIHdoaWNoIHNlZW1zIHRvIGp1c3QgYmUgYSBtaXN0YWtlDQpvYV9jb2F1dGhvcl9pbmZvX25hbWUgPC0gb2FfY29hdXRob3JfaW5mb19uYW1lICU+JQ0KICBmaWx0ZXIoISB0b2xvd2VyKGZpcnN0KSAlaW4lIGMoInZhbiIsICJhbmQiLCAiZGVuIikpDQoNCm9hX2NvYXV0aG9yX2luZm9fbmFtZSRmaXJzdCA8LSB0b2xvd2VyKG9hX2NvYXV0aG9yX2luZm9fbmFtZSRmaXJzdCkNCg0KY29hdXRob3JfbmFtZV9nZW5kZXIgPC0gbWVyZ2Uob2FfY29hdXRob3JfaW5mb19uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX25hbWVzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSAiZmlyc3QiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnkgPSBGQUxTRSkNCg0KY29hdXRob3JfbmFtZV9nZW5kZXIgPC0gY29hdXRob3JfbmFtZV9nZW5kZXIgJT4lDQogIHNlbGVjdChpZCwgZ2VuZGVyKSU+JQ0KICBmaWx0ZXIoIWlzLm5hKGdlbmRlcikpDQoNCmBgYA0KDQpSZW1vdmUgcmVkdW5kYW50IGl0ZW1zOg0KYGBge3J9DQojcm0ob2FfY29hdXRob3JfaW5mbykNCmdjKCkNCmBgYA0KDQpGb3IgZWFjaCBjb2F1dGhvciwgZ2V0IHRoZWlyIGN1bXVsYXRpdmUgY2l0YXRpb24gY291bnRzOg0KYGBge3J9DQpjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSA8LSBvYV9jb2F1dGhvcl9pbmZvX2Z1bGwgJT4lDQogIHNlbGVjdChpZDpkaXNwbGF5X25hbWUsIHdvcmtzX2NvdW50OmNvdW50c19ieV95ZWFyX2NpdGVkX2J5X2NvdW50KSU+JQ0KICBncm91cF9ieShpZCklPiUNCiAgYXJyYW5nZShjb3VudHNfYnlfeWVhcl95ZWFyKSU+JQ0KICBtdXRhdGUoY291bnRzX2J5X3llYXJfd29ya3NfY291bnRfdG90YWwgPSBjdW1zdW0oY291bnRzX2J5X3llYXJfd29ya3NfY291bnQpLA0KICAgICAgICAgY291bnRzX2J5X3llYXJfY2l0ZWRfYnlfY291bnRfdG90YWwgPSBjdW1zdW0oY291bnRzX2J5X3llYXJfY2l0ZWRfYnlfY291bnQpKSAlPiUNCiAgYXJyYW5nZShpZCwgY291bnRzX2J5X3llYXJfeWVhcikNCg0KIyByZW5hbWUgc29tZSBjb2x1bW5zDQpjb2xuYW1lcyhjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSlbd2hpY2goY29sbmFtZXMoY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUpPT0iY291bnRzX2J5X3llYXJfeWVhciIpXSA8LSAieWVhciINCmNvbG5hbWVzKGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlKVt3aGljaChjb2xuYW1lcyhjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSk9PSJjb3VudHNfYnlfeWVhcl93b3Jrc19jb3VudCIpXSA8LSAiY291bnRfcHVicyINCmNvbG5hbWVzKGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlKVt3aGljaChjb2xuYW1lcyhjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSk9PSJ3b3Jrc19jb3VudCIpXSA8LSAiY291bnRfcHVic190b3RhbCINCmNvbG5hbWVzKGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlKVt3aGljaChjb2xuYW1lcyhjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSk9PSJjb3VudHNfYnlfeWVhcl93b3Jrc19jb3VudF90b3RhbCIpXSA8LSAiY291bnRfcHVic190b3RhbF9vYSINCmNvbG5hbWVzKGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlKVt3aGljaChjb2xuYW1lcyhjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSk9PSJjb3VudHNfYnlfeWVhcl9jaXRlZF9ieV9jb3VudCIpXSA8LSAiY2l0ZWRfYnkiDQpjb2xuYW1lcyhjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSlbd2hpY2goY29sbmFtZXMoY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUpPT0iY2l0ZWRfYnlfY291bnQiKV0gPC0gImNpdGVkX2J5X3RvdGFsIg0KY29sbmFtZXMoY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUpW3doaWNoKGNvbG5hbWVzKGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlKT09ImNvdW50c19ieV95ZWFyX2NpdGVkX2J5X2NvdW50X3RvdGFsIildIDwtICJjaXRlZF9ieV90b3RhbF9vYSINCg0KIyBjaXRhdGlvbnMgcHJpb3IgdG8gMjAxMg0KbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yIDwtIGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlICU+JQ0KICBncm91cF9ieShpZCklPiUNCiAgc2xpY2Uod2hpY2gubWF4KHllYXIpKQ0KDQpsYXRlc3RfY2l0YXRpb25fY29hdXRob3IkY2l0ZWRfYnlfYmVmb3JlXzIwMTIgPC0gbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yJGNpdGVkX2J5X3RvdGFsIC0gbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yJGNpdGVkX2J5X3RvdGFsX29hDQpsYXRlc3RfY2l0YXRpb25fY29hdXRob3IkY291bnRfcHVic19iZWZvcmVfMjAxMiA8LSBsYXRlc3RfY2l0YXRpb25fY29hdXRob3IkY291bnRfcHVic190b3RhbCAtIGxhdGVzdF9jaXRhdGlvbl9jb2F1dGhvciRjb3VudF9wdWJzX3RvdGFsX29hDQoNCiMgcmVwbGFjZSBieSAwIGlmIG5lZ2F0aXZlIChPQSBpc3N1ZSB0aWNrZXQgb3BlbmVkKQ0KbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yJGNpdGVkX2J5X2JlZm9yZV8yMDEyIDwtIGlmZWxzZShsYXRlc3RfY2l0YXRpb25fY29hdXRob3IkY2l0ZWRfYnlfYmVmb3JlXzIwMTI8MCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yJGNpdGVkX2J5X2JlZm9yZV8yMDEyKQ0KDQpsYXRlc3RfY2l0YXRpb25fY29hdXRob3IkY291bnRfcHVic19iZWZvcmVfMjAxMiA8LSBpZmVsc2UobGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yJGNvdW50X3B1YnNfYmVmb3JlXzIwMTI8MCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yJGNvdW50X3B1YnNfYmVmb3JlXzIwMTIpDQoNCiMgbWVyZ2Ugd2l0aCB0aGUgcmVzdA0KY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUgPC0gbWVyZ2UoY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0X2NpdGF0aW9uX2NvYXV0aG9yW2MoImlkIiwgImNpdGVkX2J5X2JlZm9yZV8yMDEyIiwgImNvdW50X3B1YnNfYmVmb3JlXzIwMTIiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSAiaWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCg0KY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUkY2l0ZWRfYnlfdG90YWxfYWxsIDwtIGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlJGNpdGVkX2J5X2JlZm9yZV8yMDEyICsgY29hdXRob3JfcHVic19jaXRzX2N1bXVsYXRpdmUkY2l0ZWRfYnlfdG90YWxfb2ENCmNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlJGNvdW50X3B1YnNfdG90YWxfYWxsIDwtIGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlJGNvdW50X3B1YnNfYmVmb3JlXzIwMTIgKyBjb2F1dGhvcl9wdWJzX2NpdHNfY3VtdWxhdGl2ZSRjb3VudF9wdWJzX3RvdGFsX29hDQoNCmNvYXV0aG9yX3llYXJfcF9jIDwtIGNvYXV0aG9yX3B1YnNfY2l0c19jdW11bGF0aXZlICU+JQ0KICBhcnJhbmdlKGlkLCB5ZWFyKSU+JQ0KICBzZWxlY3QoLWRpc3BsYXlfbmFtZSwgLWNvdW50X3B1YnNfdG90YWwsIC1jaXRlZF9ieV90b3RhbCkNCmBgYA0KDQpHZXQgdGhlaXIgYXR0ZW50aW9uOg0KYGBge3J9DQpjb2F1dGhvcl9hdHRlbnRpb24gPC0gZGJSZWFkVGFibGUoY29uLCAiYWx0bWV0cmljX2NvYXV0aG9yX2F0dGVudGlvbiIpDQoNCnNlbGVjdGVkX2F0dGVudGlvbiA8LSBjb2F1dGhvcl9hdHRlbnRpb24gJT4lDQogIGZpbHRlciguLCBtZW50aW9uX3R5cGUgJWluJSBjKCJtc20iLCAiYmxvZyIsICJ0d2VldCIpKQ0KYGBgDQoNCkN1bXVsYXRpdmVzOg0KYGBge3J9DQpjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUgPC0gc2VsZWN0ZWRfYXR0ZW50aW9uICU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gbWVudGlvbl90eXBlLCB2YWx1ZXNfZnJvbSA9IHllYXJseV9jb3VudCwgdmFsdWVzX2ZpbGwgPSAwKQ0KDQpjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUgPC0gY29hdXRob3JfYXR0ZW50aW9uX3RhYmxlICU+JQ0KICBncm91cF9ieShpZCklPiUNCiAgYXJyYW5nZSh5ZWFyKSU+JQ0KICBtdXRhdGUobXNtX3RvdGFsID0gY3Vtc3VtKG1zbSksDQogICAgICAgICBibG9nX3RvdGFsID0gY3Vtc3VtKGJsb2cpLA0KICAgICAgICAgdHdlZXRfdG90YWwgPSBjdW1zdW0odHdlZXQpKSAlPiUNCiAgYXJyYW5nZShpZCwgeWVhcikNCg0KIyByZW5hbWUgc29tZSBjb2x1bW5zDQpjb2xuYW1lcyhjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUpW3doaWNoKGNvbG5hbWVzKGNvYXV0aG9yX2F0dGVudGlvbl90YWJsZSk9PSJtc20iKV0gPC0gImNvYV9hdHRuX25ld3NfYnkiDQpjb2xuYW1lcyhjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUpW3doaWNoKGNvbG5hbWVzKGNvYXV0aG9yX2F0dGVudGlvbl90YWJsZSk9PSJtc21fdG90YWwiKV0gPC0gImNvYV9hdHRuX25ld3NfYnlfdG90YWwiDQpjb2xuYW1lcyhjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUpW3doaWNoKGNvbG5hbWVzKGNvYXV0aG9yX2F0dGVudGlvbl90YWJsZSk9PSJibG9nIildIDwtICJjb2FfYXR0bl9ibG9nX2J5Ig0KY29sbmFtZXMoY29hdXRob3JfYXR0ZW50aW9uX3RhYmxlKVt3aGljaChjb2xuYW1lcyhjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUpPT0iYmxvZ190b3RhbCIpXSA8LSAiY29hX2F0dG5fYmxvZ19ieV90b3RhbCINCmNvbG5hbWVzKGNvYXV0aG9yX2F0dGVudGlvbl90YWJsZSlbd2hpY2goY29sbmFtZXMoY29hdXRob3JfYXR0ZW50aW9uX3RhYmxlKT09InR3ZWV0IildIDwtICJjb2FfYXR0bl90d2l0dGVyX2J5Ig0KY29sbmFtZXMoY29hdXRob3JfYXR0ZW50aW9uX3RhYmxlKVt3aGljaChjb2xuYW1lcyhjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUpPT0idHdlZXRfdG90YWwiKV0gPC0gImNvYV9hdHRuX3R3aXR0ZXJfYnlfdG90YWwiDQpgYGANCg0KQ29tYmluZSBjaXRhdGlvbnMgYW5kIGF0dGVudGlvbi4gU2V0IG1lbnRpb25zIHRvIDAgaWYgd2UgaGF2ZSBjb2F1dGhvcnMnIE9SQ0lEIA0KYW5kIHRoZXJlIGFyZSBubyBtZW50aW9uczsgaWYgd2UgZG9uJ3QgaGF2ZSB0aGVpciBPUkNJRCwgc2V0IG1lbnRpb25zIHRvIE5BOg0KYGBge3J9DQpjb2F1dGhvcl95ZWFyX3BfY19hIDwtIG1lcmdlKGNvYXV0aG9yX3llYXJfcF9jLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2F1dGhvcl9hdHRlbnRpb25fdGFibGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygiaWQiLCAieWVhciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCmNvYXV0aG9yX29yY2lkcyA8LSBvYV9jb2F1dGhvcl9pbmZvX2Z1bGwgJT4lDQogIGRpc3RpbmN0KGlkLCAua2VlcF9hbGwgPSBUUlVFKSU+JQ0KICBzZWxlY3QoaWQsIG9yY2lkKQ0KDQoNCmNvYXV0aG9yX3llYXJfcF9jX2EgPC0gbWVyZ2UoY29hdXRob3JfeWVhcl9wX2NfYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3Jfb3JjaWRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImlkIikNCg0KIyBmaWxsIHRoZSBhdHRlbnRpb24gYnkgcHJvZmlsZSBJRA0KY29hdXRob3JfeWVhcl9wX2NfYTIgPC0gY29hdXRob3JfeWVhcl9wX2NfYSAlPiUNCiAgZ3JvdXBfYnkoaWQpJT4lDQogIGZpbGwoY29hX2F0dG5fbmV3c19ieV90b3RhbCwgY29hX2F0dG5fYmxvZ19ieV90b3RhbCwgY29hX2F0dG5fdHdpdHRlcl9ieV90b3RhbCkNCg0KY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fbmV3c19ieSA8LSBpZmVsc2UoKGlzLm5hKGNvYXV0aG9yX3llYXJfcF9jX2EyJGNvYV9hdHRuX25ld3NfYnkpICYgIWlzLm5hKGNvYXV0aG9yX3llYXJfcF9jX2EyJG9yY2lkKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvYXV0aG9yX3llYXJfcF9jX2EyJGNvYV9hdHRuX25ld3NfYnkpDQpjb2F1dGhvcl95ZWFyX3BfY19hMiRjb2FfYXR0bl9uZXdzX2J5X3RvdGFsIDwtIGlmZWxzZSgoaXMubmEoY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fbmV3c19ieV90b3RhbCkgJiAhaXMubmEoY29hdXRob3JfeWVhcl9wX2NfYTIkb3JjaWQpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fbmV3c19ieV90b3RhbCkNCg0KY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fYmxvZ19ieSA8LSBpZmVsc2UoKGlzLm5hKGNvYXV0aG9yX3llYXJfcF9jX2EyJGNvYV9hdHRuX2Jsb2dfYnkpICYgIWlzLm5hKGNvYXV0aG9yX3llYXJfcF9jX2EyJG9yY2lkKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvYXV0aG9yX3llYXJfcF9jX2EyJGNvYV9hdHRuX2Jsb2dfYnkpDQpjb2F1dGhvcl95ZWFyX3BfY19hMiRjb2FfYXR0bl9ibG9nX2J5X3RvdGFsIDwtIGlmZWxzZSgoaXMubmEoY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fYmxvZ19ieV90b3RhbCkgJiAhaXMubmEoY29hdXRob3JfeWVhcl9wX2NfYTIkb3JjaWQpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fYmxvZ19ieV90b3RhbCkNCg0KY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fdHdpdHRlcl9ieSA8LSBpZmVsc2UoKGlzLm5hKGNvYXV0aG9yX3llYXJfcF9jX2EyJGNvYV9hdHRuX3R3aXR0ZXJfYnkpICYgIWlzLm5hKGNvYXV0aG9yX3llYXJfcF9jX2EyJG9yY2lkKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvYXV0aG9yX3llYXJfcF9jX2EyJGNvYV9hdHRuX3R3aXR0ZXJfYnkpDQpjb2F1dGhvcl95ZWFyX3BfY19hMiRjb2FfYXR0bl90d2l0dGVyX2J5X3RvdGFsIDwtIGlmZWxzZSgoaXMubmEoY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fdHdpdHRlcl9ieV90b3RhbCkgJiAhaXMubmEoY29hdXRob3JfeWVhcl9wX2NfYTIkb3JjaWQpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3JfeWVhcl9wX2NfYTIkY29hX2F0dG5fdHdpdHRlcl9ieV90b3RhbCkNCmBgYA0KDQpBcHBlbmQgZ2VuZGVyOg0KYGBge3J9DQpjb2xuYW1lcyhjb2F1dGhvcl9uYW1lX2dlbmRlcilbMV0gPC0gImlkIg0KDQpjb2F1dGhvcl95ZWFyX3BfY19hX2cgPC0gbWVyZ2UoY29hdXRob3JfeWVhcl9wX2NfYTIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3JfbmFtZV9nZW5kZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSAiaWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSkNCg0KY29hdXRob3JfeWVhcl9wX2NfYV9nIDwtIGNvYXV0aG9yX3llYXJfcF9jX2FfZyU+JQ0KICBhcnJhbmdlKGlkLCB5ZWFyKQ0KDQp3cml0ZV9jc3YoY29hdXRob3JfeWVhcl9wX2NfYV9nLCAicGFuZWxfZGF0YXNldHMvY29hdXRob3JfeWVhcl9wYW5lbF8yNl83LmNzdiIpDQpgYGANCg0KRmlsdGVyIG91dCBjb2F1dGhvciBvYnNlcnZhdGlvbnMgd2l0aG91dCB5ZWFyOg0KYGBge3J9DQpjb2F1dGhvcl95ZWFyX3BfY19hX2ckZHVwbCA8LSBkdXBsaWNhdGVkKGNvYXV0aG9yX3llYXJfcF9jX2FfZ1tjKCJwcm9maWxlX2lkIiwgInllYXIiKV0pDQoNCmNvYXV0aG9yX3llYXJfcF9jX2FfZyA8LSBmaWx0ZXIoY29hdXRob3JfeWVhcl9wX2NfYV9nLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzLm5hKHllYXIpKSU+JQ0KICBzZWxlY3QoLWR1cGwpDQpgYGANCg0KTWFyZ2UgY29hdXRob3JzIHdpdGggaW5mZXJyZWQgZ2VuZGVyOg0KYGBge3J9DQpjb2xuYW1lcyhjb2F1dGhvcl9uYW1lX2dlbmRlcikgPC0gYygiYXVfaWQiLCAiaW5mZXJyZWRfZ2VuZGVyIikNCm9hX2NvYXV0aG9yX2luZm9fZ2VuZGVyIDwtIG1lcmdlKG9hX2NvYXV0aG9yX2luZm8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2F1dGhvcl9uYW1lX2dlbmRlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImF1X2lkIikNCg0Kb2FfY29hdXRob3JfaW5mb19nZW5kZXIkaW5mZXJyZWRfZ2VuZGVyIDwtIGlmZWxzZShpcy5uYShvYV9jb2F1dGhvcl9pbmZvX2dlbmRlciRpbmZlcnJlZF9nZW5kZXIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5rbm93biIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9hX2NvYXV0aG9yX2luZm9fZ2VuZGVyJGluZmVycmVkX2dlbmRlcikNCmBgYA0KDQpDbGVhbiB0aGUgbWVtb3J5IGEgYml0Og0KYGBge3J9DQpybShvYV9jb2F1dGhvcl9pbmZvKQ0Kcm0oY29hdXRob3JfbmFtZV9nZW5kZXIpDQpybShjb2F1dGhvcl9nZW5kZXIpDQpybShhbGxfbmFtZXMpDQpnYygpDQpgYGANCg0KRm9yIGVhY2ggYXV0aG9yLCBtYXRjaCB0aGVpciBjb2F1dGhvcnMgZnJvbSB0aGF0IHllYXI6DQpgYGB7cn0NCm9hX2NvYXV0aG9yX21hdGNoaW5nIDwtIGRiUmVhZFRhYmxlKGNvbiwgIm9hX2NvYXV0aG9yX21hdGNoaW5nIikNCm9hX2NvYXV0aG9yX21hdGNoaW5nIDwtIG9hX2NvYXV0aG9yX21hdGNoaW5nW2MoImlkIiwgImF1X2lkIiwgInByb2ZpbGVfaWQiLCAicHVibGljYXRpb25feWVhciIpXQ0KDQpwcm9maWxlX2lkcyA8LSB1bmlxdWUocHJvZl95ZWFyX3BfY19nX2FfbF9mX2lfYV9sJHByb2ZpbGVfaWQpDQpgYGANCg0KTm93LCBjb21waWxlIGNvYXV0aG9yIGRhdGEgZm9yIGVhY2ggcHJvZmVzc29yOg0KYGBge3Igd2FybmluZyA9IEYsIG1lc3NhZ2UgPSBGfQ0KcHJvZl9wYW5lbF9jb21iaW5lZCA8LSBhcy5kYXRhLmZyYW1lKG1hdHJpeChOQSwgbnJvdyA9IDAsIG5jb2wgPSAxMTgpKQ0KDQpmb3IgKGkgaW4gMTpsZW5ndGgocHJvZmlsZV9pZHMpKXsNCiAgcHJvZl9vdXRwdXQgPC0gTkENCiAgdHJ5KA0KICAgIHByb2Zfb3V0cHV0IDwtIGNvYXV0aG9yX2RhdGFfY29tcGlsZXIocHJvZmlsZV9pZCA9IHByb2ZpbGVfaWRzW2ldLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9wYW5lbCA9IHByb2ZfeWVhcl9wX2NfZ19hX2xfZl9pX2FfbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfY29hdXRob3JfbWF0Y2hpbmcgPSBvYV9jb2F1dGhvcl9tYXRjaGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZfY29hdXRob3JfcGFuZWwgPSBjb2F1dGhvcl95ZWFyX3BfY19hX2csDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9mX2NvYXV0aG9yX2luZm9fd19nZW5kZXIgPSBvYV9jb2F1dGhvcl9pbmZvX2dlbmRlcikpDQoNCiANCiAgaWYgKCFhbGwoaXMubmEocHJvZl9vdXRwdXQpKSl7DQogICAgDQogICAgcHJvZl9wYW5lbF9jb21iaW5lZCA8LSByYmluZC5kYXRhLmZyYW1lKHByb2ZfcGFuZWxfY29tYmluZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Zfb3V0cHV0KQ0KICB9DQogIHByaW50KHBhc3RlKCJkb25lIHdpdGggIiwgaSAsICIgb3V0IG9mIiwgbGVuZ3RoKHByb2ZpbGVfaWRzKSkpDQp9DQpgYGANCg0KV3JpdGUgdGhpczoNCmBgYHtyfQ0Kd3JpdGVfY3N2KHByb2ZfcGFuZWxfY29tYmluZWQsICJwYW5lbF9kYXRhc2V0cy9wcm9mX3llYXJfcHVic19jaXRhdGlvbnNfZ3JhbnRzX2FsdF9sZXhpc19maWVsZF9sYWdfY29hdXRob3JzLmNzdiIpDQpgYGANCg0KDQojIFRpZHlpbmcgdXANCg0KVGlkeSB1cCB0aGUgcGFuZWwgZGF0YXNldDoNCmBgYHtyIHdhcm5pbmcgPSBGLCBtZXNzYWdlID0gRn0NCiMgcmVjb2RlIHRoZSBmaWVsZHMNCnByb2ZfcGFuZWxfY29tYmluZWQgPC0gcHJvZl9wYW5lbF9jb21iaW5lZCAlPiUgDQogIG11dGF0ZShnZW5lcmFsX2ZpZWxkID0gY2FzZV9tYXRjaCgNCiAgICBvdmVyYWxsX2ZpZWxkLA0KICAgICJBcnRzIGFuZCBIdW1hbml0aWVzIiAgfiAiQXJ0cyBhbmQgSHVtYW5pdGllcyIsDQogICAgYygiQmlvY2hlbWlzdHJ5LCBHZW5ldGljcyBhbmQgTW9sZWN1bGFyIEJpb2xvZ3kiLCJBZ3JpY3VsdHVyYWwgYW5kIEJpb2xvZ2ljYWwgU2NpZW5jZXMiLA0KICAgICAgIkNoZW1pY2FsIEVuZ2luZWVyaW5nIiwgIkNoZW1pc3RyeSIsICAiQ29tcHV0ZXIgU2NpZW5jZSIsICJEZWNpc2lvbiBTY2llbmNlcyIsDQogICAgICAiRWFydGggYW5kIFBsYW5ldGFyeSBTY2llbmNlcyIsICJFbmVyZ3kiLCAiRW5naW5lZXJpbmciLCAiRW52aXJvbm1lbnRhbCBTY2llbmNlIiwNCiAgICAgICJJbW11bm9sb2d5IGFuZCBNaWNyb2Jpb2xvZ3kiLCAiTWF0ZXJpYWxzIFNjaWVuY2UiLCAiTWF0aGVtYXRpY3MiLCAiTmV1cm9zY2llbmNlIiwgDQogICAgICAiUGh5c2ljcyBhbmQgQXN0cm9ub215IiApIH4gIlNURU0iLA0KICAgIGMoIkRlbnRpc3RyeSIsICJIZWFsdGggUHJvZmVzc2lvbnMiLCAiTWVkaWNpbmUiKSB+ICJNZWRpY2luZSIsDQogICAgYygiQnVzaW5lc3MsIE1hbmFnZW1lbnQgYW5kIEFjY291bnRpbmciLCAiRWNvbm9taWNzLCBFY29ub21ldHJpY3MgYW5kIEZpbmFuY2UiLA0KICAgICAgIlBzeWNob2xvZ3kiLCAiU29jaWFsIFNjaWVuY2VzIikgfiAiU29jaWFsIHNjaWVuY2VzIikpDQoNCnByb2ZfcGFuZWxfY29tYmluZWQgPC0gcHJvZl9wYW5lbF9jb21iaW5lZCAlPiUgDQogIG11dGF0ZShnZW5lcmFsX2ZpZWxkX3llYXJseSA9IGNhc2VfbWF0Y2goDQogICAgeWVhcmx5X2ZpZWxkLA0KICAgICJBcnRzIGFuZCBIdW1hbml0aWVzIiAgfiAiQXJ0cyBhbmQgSHVtYW5pdGllcyIsDQogICAgYygiQmlvY2hlbWlzdHJ5LCBHZW5ldGljcyBhbmQgTW9sZWN1bGFyIEJpb2xvZ3kiLCJBZ3JpY3VsdHVyYWwgYW5kIEJpb2xvZ2ljYWwgU2NpZW5jZXMiLA0KICAgICAgIkNoZW1pY2FsIEVuZ2luZWVyaW5nIiwgIkNoZW1pc3RyeSIsICAiQ29tcHV0ZXIgU2NpZW5jZSIsICJEZWNpc2lvbiBTY2llbmNlcyIsDQogICAgICAiRWFydGggYW5kIFBsYW5ldGFyeSBTY2llbmNlcyIsICJFbmVyZ3kiLCAiRW5naW5lZXJpbmciLCAiRW52aXJvbm1lbnRhbCBTY2llbmNlIiwNCiAgICAgICJJbW11bm9sb2d5IGFuZCBNaWNyb2Jpb2xvZ3kiLCAiTWF0ZXJpYWxzIFNjaWVuY2UiLCAiTWF0aGVtYXRpY3MiLCAiTmV1cm9zY2llbmNlIiwgDQogICAgICAiUGh5c2ljcyBhbmQgQXN0cm9ub215IiApIH4gIlNURU0iLA0KICAgIGMoIkRlbnRpc3RyeSIsICJIZWFsdGggUHJvZmVzc2lvbnMiLCAiTWVkaWNpbmUiKSB+ICJNZWRpY2luZSIsDQogICAgYygiQnVzaW5lc3MsIE1hbmFnZW1lbnQgYW5kIEFjY291bnRpbmciLCAiRWNvbm9taWNzLCBFY29ub21ldHJpY3MgYW5kIEZpbmFuY2UiLA0KICAgICAgIlBzeWNob2xvZ3kiLCAiU29jaWFsIFNjaWVuY2VzIikgfiAiU29jaWFsIHNjaWVuY2VzIikpDQpgYGANCiANClJlbmFtZSB0aGUgY29sdW1ucyBuZWF0bHk6DQpgYGB7cn0NCnByb2ZfcGFuZWxfdGlkeSA8LSBwcm9mX3BhbmVsX2NvbWJpbmVkICU+JQ0KICBzZWxlY3QoLWMoY2l0ZWRfYnlfYmVmb3JlXzIwMTIsIGNpdGVkX2J5X3RvdGFsX29hLCBjaXRlZF9ieV90b3RhbF9vYV9sLCANCiAgICAgICAgICAgY29hX2NpdGVkX2J5X2JlZm9yZV8yMDEyLCBjb2FfY291bnRfcHVic19iZWZvcmVfMjAxMiwgY29hX2NpdGVkX2J5X2JlZm9yZV8yMDEyX2wsDQogICAgICAgICAgIGNvYV9jb3VudF9wdWJzX2JlZm9yZV8yMDEyLCBwcm9mX3RvdF9jb3VudF9wdWJzX3RvdGFsX29hLCBwcm9mX3RvdF9jb3VudF9wdWJzX3RvdGFsX29hX2wsIA0KICAgICAgICAgICBwcm9mX3RvdF9jaXRlZF9ieV90b3RhbF9vYSwgcHJvZl90b3RfY2l0ZWRfYnlfdG90YWxfb2FfbCwNCiAgICAgICAgICAgcHJvZl90b3RfY2l0ZWRfYnlfYmVmb3JlXzIwMTIscHJvZl90b3RfY2l0ZWRfYnlfYmVmb3JlXzIwMTJfbCwNCiAgICAgICAgICAgcHJvZl90b3RfY291bnRfcHVic19iZWZvcmVfMjAxMiwgcHJvZl90b3RfY291bnRfcHVic19iZWZvcmVfMjAxMl9sICkpJT4lDQogIHJlbmFtZSgNCiAgICBncmFudF92ZW5pID0gdmVuaSwNCiAgICBncmFudF92ZW5pX2wgPSB2ZW5pX2wsDQogICAgZ3JhbnRfdmlkaSA9IHZpZGksDQogICAgZ3JhbnRfdmlkaV9sID0gdmlkaV9sLCAgICANCiAgICBncmFudF92aWNpID0gdmljaSwNCiAgICBncmFudF92aWNpX2wgPSB2aWNpX2wsDQogICAgZ3JhbnRfc3RldmluID0gc3RldmluLA0KICAgIGdyYW50X3N0ZXZpbl9sID0gc3RldmluX2wsDQogICAgZ3JhbnRfc3Bpbm96YSA9IHNwaW5vemEsDQogICAgZ3JhbnRfc3Bpbm96YV9sID0gc3Bpbm96YV9sLA0KICAgIGdyYW50X3N0YXJ0aW5nID0gc3RhcnRpbmcsDQogICAgZ3JhbnRfc3RhcnRpbmdfbCA9IHN0YXJ0aW5nX2wsDQogICAgZ3JhbnRfYWR2YW5jZWQgPSBhZHZhbmNlZCwNCiAgICBncmFudF9hZHZhbmNlZF9sID0gYWR2YW5jZWRfbCwNCiAgICBncmFudF9jb25zb2xpZGF0b3IgPSBjb25zb2xpZGF0b3IsDQogICAgZ3JhbnRfY29uc29saWRhdG9yX2wgPSBjb25zb2xpZGF0b3JfbCwNCiAgICBncmFudF9zeW5lcmd5ID0gc3luZXJneSwNCiAgICBncmFudF9zeW5lcmd5X2wgPSBzeW5lcmd5X2wsDQogICAgY29hX29ubGluZV9uZXdzID0gY29hX2F0dG5fbmV3c19ieSwNCiAgICBjb2FfYmxvZ3MgPSBjb2FfYXR0bl9ibG9nX2J5LA0KICAgIGNvYV90d2l0dGVyID0gY29hX2F0dG5fdHdpdHRlcl9ieSwNCiAgICBjb2Ffb25saW5lX25ld3NfdG90YWwgPSBjb2FfYXR0bl9uZXdzX2J5X3RvdGFsLA0KICAgIGNvYV9ibG9nc190b3RhbCA9IGNvYV9hdHRuX2Jsb2dfYnlfdG90YWwsDQogICAgY29hX3R3aXR0ZXJfdG90YWwgPSBjb2FfYXR0bl90d2l0dGVyX2J5X3RvdGFsLA0KICAgIGNvYV9vbmxpbmVfbmV3c19sID0gY29hX2F0dG5fbmV3c19ieV9sLA0KICAgIGNvYV9ibG9nc19sID0gY29hX2F0dG5fYmxvZ19ieV9sLA0KICAgIGNvYV90d2l0dGVyX2wgPSBjb2FfYXR0bl90d2l0dGVyX2J5X2wsDQogICAgY29hX29ubGluZV9uZXdzX3RvdGFsX2wgPSBjb2FfYXR0bl9uZXdzX2J5X3RvdGFsX2wsDQogICAgY29hX2Jsb2dzX3RvdGFsX2wgPSBjb2FfYXR0bl9ibG9nX2J5X3RvdGFsX2wsDQogICAgY29hX3R3aXR0ZXJfdG90YWxfbCA9IGNvYV9hdHRuX3R3aXR0ZXJfYnlfdG90YWxfbCwNCiAgICBjb2FfdG90X2NvdW50X3B1YnMgPSBwcm9mX3RvdF9jb3VudF9wdWJzLCANCiAgICBjb2FfdG90X2NpdGVkX2J5ID0gcHJvZl90b3RfY2l0ZWRfYnksDQogICAgY29hX3RvdF9jb3VudF9wdWJzX3RvdGFsID0gcHJvZl90b3RfY291bnRfcHVic190b3RhbF9hbGwsDQogICAgY29hX3RvdF9jaXRlZF9ieV90b3RhbCA9IHByb2ZfdG90X2NpdGVkX2J5X3RvdGFsX2FsbCwNCiAgICBjb2FfdG90X29ubGluZV9uZXdzID0gcHJvZl90b3RfY29hX2F0dG5fbmV3c19ieSwNCiAgICBjb2FfdG90X2Jsb2dzID0gcHJvZl90b3RfY29hX2F0dG5fYmxvZ19ieSwNCiAgICBjb2FfdG90X3R3aXR0ZXIgPSBwcm9mX3RvdF9jb2FfYXR0bl90d2l0dGVyX2J5LA0KICAgIGNvYV90b3Rfb25saW5lX25ld3NfdG90YWwgPSBwcm9mX3RvdF9jb2FfYXR0bl9uZXdzX2J5X3RvdGFsLA0KICAgIGNvYV90b3RfYmxvZ3NfdG90YWwgPSBwcm9mX3RvdF9jb2FfYXR0bl9ibG9nX2J5X3RvdGFsLA0KICAgIGNvYV90b3RfdHdpdHRlcl90b3RhbCA9IHByb2ZfdG90X2NvYV9hdHRuX3R3aXR0ZXJfYnlfdG90YWwsDQogICAgY29hX3RvdF91bmlxdWVfbSA9IHByb2ZfdG90X3VuaXF1ZV9jb2FfbSwNCiAgICBjb2FfdG90X3VuaXF1ZV93ID0gcHJvZl90b3RfdW5pcXVlX2NvYV93LA0KICAgIGNvYV90b3RfdW5pcXVlX3UgPSBwcm9mX3RvdF91bmlxdWVfY29hX3UsDQogICAgY29hX3RvdF9jb3VudF9wdWJzX2wgPSBwcm9mX3RvdF9jb3VudF9wdWJzX2wsIA0KICAgIGNvYV90b3RfY2l0ZWRfYnlfbCA9IHByb2ZfdG90X2NpdGVkX2J5X2wsDQogICAgY29hX3RvdF9jb3VudF9wdWJzX3RvdGFsX2wgPSBwcm9mX3RvdF9jb3VudF9wdWJzX3RvdGFsX2FsbF9sLA0KICAgIGNvYV90b3RfY2l0ZWRfYnlfdG90YWxfbCA9IHByb2ZfdG90X2NpdGVkX2J5X3RvdGFsX2FsbF9sLA0KICAgIGNvYV90b3Rfb25saW5lX25ld3NfbCA9IHByb2ZfdG90X2NvYV9hdHRuX25ld3NfYnlfbCwNCiAgICBjb2FfdG90X2Jsb2dzX2wgPSBwcm9mX3RvdF9jb2FfYXR0bl9ibG9nX2J5X2wsDQogICAgY29hX3RvdF90d2l0dGVyX2wgPSBwcm9mX3RvdF9jb2FfYXR0bl90d2l0dGVyX2J5X2wsDQogICAgY29hX3RvdF9vbmxpbmVfbmV3c190b3RhbF9sID0gcHJvZl90b3RfY29hX2F0dG5fbmV3c19ieV90b3RhbF9sLA0KICAgIGNvYV90b3RfYmxvZ3NfdG90YWxfbCA9IHByb2ZfdG90X2NvYV9hdHRuX2Jsb2dfYnlfdG90YWxfbCwNCiAgICBjb2FfdG90X3R3aXR0ZXJfdG90YWxfbCA9IHByb2ZfdG90X2NvYV9hdHRuX3R3aXR0ZXJfYnlfdG90YWxfbCwNCiAgICBjb2FfdG90X3VuaXF1ZV9tX2wgPSBwcm9mX3RvdF91bmlxdWVfY29hX21fbCwNCiAgICBjb2FfdG90X3VuaXF1ZV93X2wgPSBwcm9mX3RvdF91bmlxdWVfY29hX3dfbCwNCiAgICBjb2FfdG90X3VuaXF1ZV91X2wgPSBwcm9mX3RvdF91bmlxdWVfY29hX3VfbCkNCmBgYA0KIA0KU2VsZWN0IHJlbGV2YW50IGNvbHVtbnMgYW5kIHRpZHkgZXZlcnl0aGluZyB1cDoNCmBgYHtyfQ0KcHJvZl9wYW5lbF90aWR5IDwtIHByb2ZfcGFuZWxfdGlkeSAlPiUNCiAgIyBidXQgbm90IDIwMjQNCiAgZmlsdGVyKHllYXIgPD0gMjAyMyAmIHllYXIgPj0gMjAxMiAmICFpcy5uYSh5ZWFyKSkNCg0KIyBjb2F1dGhvcnMgdGhpcyB5ZWFyDQpwcm9mX3BhbmVsX3RpZHkkY29hX29ubGluZV9uZXdzIDwtIHByb2ZfcGFuZWxfdGlkeSRjb2Ffb25saW5lX25ld3MgKyBwcm9mX3BhbmVsX3RpZHkkY29hX2Jsb2dzDQpwcm9mX3BhbmVsX3RpZHkkY29hX29ubGluZV9uZXdzX2wgPC0gcHJvZl9wYW5lbF90aWR5JGNvYV9vbmxpbmVfbmV3c19sICsgcHJvZl9wYW5lbF90aWR5JGNvYV9ibG9nc19sDQpwcm9mX3BhbmVsX3RpZHkkY29hX29ubGluZV9uZXdzX3RvdGFsIDwtIHByb2ZfcGFuZWxfdGlkeSRjb2Ffb25saW5lX25ld3NfdG90YWwgKyBwcm9mX3BhbmVsX3RpZHkkY29hX2Jsb2dzX3RvdGFsDQpwcm9mX3BhbmVsX3RpZHkkY29hX29ubGluZV9uZXdzX3RvdGFsX2wgPC0gcHJvZl9wYW5lbF90aWR5JGNvYV9vbmxpbmVfbmV3c190b3RhbF9sICsgcHJvZl9wYW5lbF90aWR5JGNvYV9ibG9nc190b3RhbF9sDQoNCiMgYWxsIGNvYXV0aG9ycyB1cCB1bnRpbCBub3cNCnByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X29ubGluZV9uZXdzIDwtIHByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X29ubGluZV9uZXdzICsgcHJvZl9wYW5lbF90aWR5JGNvYV90b3RfYmxvZ3MNCnByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X29ubGluZV9uZXdzX2wgPC0gcHJvZl9wYW5lbF90aWR5JGNvYV90b3Rfb25saW5lX25ld3NfbCArIHByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X2Jsb2dzX2wNCnByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X29ubGluZV9uZXdzX3RvdGFsIDwtIHByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X29ubGluZV9uZXdzX3RvdGFsICsgcHJvZl9wYW5lbF90aWR5JGNvYV90b3RfYmxvZ3NfdG90YWwNCnByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X29ubGluZV9uZXdzX3RvdGFsX2wgPC0gcHJvZl9wYW5lbF90aWR5JGNvYV90b3Rfb25saW5lX25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfdGlkeSRjb2FfdG90X2Jsb2dzX3RvdGFsX2wNCg0KIyBnZXQgZ3JvdXBzIHBlciB5ZWFycyBzaW5jZSBlbnRyeQ0KcHJvZl9wYW5lbF90aWR5JGVudHJ5X2JhdGNoIDwtIGN1dChwcm9mX3BhbmVsX3RpZHkkeWVhcnNfc2luY2VfZmlyc3RfcHViLCBicmVha3MgPSBzZXEoMCwgNTAsIGJ5PTEwKSkNCnByb2ZfcGFuZWxfdGlkeSR5ZWFyc19zaW5jZV9lbnRyeSA8LSBwYXN0ZSgidXAgdG8iLCBzdHJfcmVtb3ZlKHN0cl9zcGxpdF9pKGFzLmNoYXJhY3Rlcihwcm9mX3BhbmVsX3RpZHkkZW50cnlfYmF0Y2gpLCAiLCIsIDIpLCJdIikpDQpgYGANCg0KQWRkIHRoZSBub24tdGltZSB2YXJpYWJsZSBlbnRyeSBiYXRjaCBnaXZlbiB0aGUgMjAyMyBjdXRvZmY6DQpgYGB7cn0NCnByb2ZfcGFuZWxfdGlkeSR5ZWFyc19zaW5jZV9lbnRyeV8yMDIzIDwtIDIwMjMgLSBwcm9mX3BhbmVsX3RpZHkkZmlyc3RfcHViDQoNCnByb2ZfcGFuZWxfdGlkeSRlbnRyeV9iYXRjaF8yMDIzIDwtIGlmZWxzZShwcm9mX3BhbmVsX3RpZHkkeWVhcnNfc2luY2VfZW50cnlfMjAyMyA8PSAxMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidXAgdG8gMTAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShwcm9mX3BhbmVsX3RpZHkkeWVhcnNfc2luY2VfZW50cnlfMjAyMyA8PSAyMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVwIHRvIDIwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHByb2ZfcGFuZWxfdGlkeSR5ZWFyc19zaW5jZV9lbnRyeV8yMDIzIDw9IDMwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVwIHRvIDMwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShwcm9mX3BhbmVsX3RpZHkkeWVhcnNfc2luY2VfZW50cnlfMjAyMyA8PSA0MCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidXAgdG8gNDAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShwcm9mX3BhbmVsX3RpZHkkeWVhcnNfc2luY2VfZW50cnlfMjAyMyA8PSA1MCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVwIHRvIDUwIiwgTkEpKSkpKQ0KDQpgYGANCg0KDQpTY29wdXMgZmllbGRzIGFzIHBlciBodHRwczovL3NlcnZpY2UuZWxzZXZpZXIuY29tL2FwcC9hbnN3ZXJzL2RldGFpbC9hX2lkLzEyMDA3L3N1cHBvcnRodWIvc2NvcHVzLzoNCg0KYGBge3J9DQpwcm9mX3BhbmVsX3RpZHkgPC0gcHJvZl9wYW5lbF90aWR5ICU+JSANCiAgbXV0YXRlKHNjb3B1c19maWVsZF9vdmVyYWxsID0gY2FzZV9tYXRjaCgNCiAgICBvdmVyYWxsX2ZpZWxkLA0KICAgICJBcnRzIGFuZCBIdW1hbml0aWVzIiAgfiAiQXJ0cyBhbmQgSHVtYW5pdGllcyIsDQogICAgYygiQ2hlbWljYWwgRW5naW5lZXJpbmciLCAiQ2hlbWlzdHJ5IiwgIkNvbXB1dGVyIFNjaWVuY2UiLCAiRWFydGggYW5kIFBsYW5ldGFyeSBTY2llbmNlcyIsDQogICAgIkVuZXJneSIsICJFbmdpbmVlcmluZyIsICJFbnZpcm9ubWVudGFsIFNjaWVuY2UiLCAiTWF0ZXJpYWxzIFNjaWVuY2UiLCAiTWF0aGVtYXRpY3MiLCANCiAgICAiUGh5c2ljcyBhbmQgQXN0cm9ub215IikgfiAiUGh5c2ljYWwgU2NpZW5jZXMiLA0KICAgIGMoIk1lZGljaW5lIiwgIk51cnNpbmciLCAiVmV0ZXJpbmFyeSIsICJEZW50aXN0cnkiLCAiSGVhbHRoIFByb2Zlc3Npb25zIikgfiANCiAgICAgICJIZWFsdGggU2NpZW5jZXMiLA0KICAgIGMoIkJ1c2luZXNzLCBNYW5hZ2VtZW50IGFuZCBBY2NvdW50aW5nIiwgIkRlY2lzaW9uIFNjaWVuY2VzIiwgDQogICAgICAiRWNvbm9taWNzLCBFY29ub21ldHJpY3MgYW5kIEZpbmFuY2UiLCAiUHN5Y2hvbG9neSIsIA0KICAgICAgIlNvY2lhbCBTY2llbmNlcyIpIH4gIlNvY2lhbCBTY2llbmNlcyIsDQogICAgYygiQWdyaWN1bHR1cmFsIGFuZCBCaW9sb2dpY2FsIFNjaWVuY2VzIiwgIkJpb2NoZW1pc3RyeSwgR2VuZXRpY3MgYW5kIE1vbGVjdWxhciBCaW9sb2d5IiwNCiAgICAgICJJbW11bm9sb2d5IGFuZCBNaWNyb2Jpb2xvZ3kiLCAiTmV1cm9zY2llbmNlIiwgDQogICAgICAiUGhhcm1hY29sb2d5LCBUb3hpY29sb2d5IGFuZCBQaGFybWFjZXV0aWNzIikgfiAiTGlmZSBTY2llbmNlcyIpKQ0KYGBgDQoNCldyaXRlIHRoaXMgb3V0Og0KYGBge3J9DQp3cml0ZV9jc3YocHJvZl9wYW5lbF90aWR5LCAicGFuZWxfZGF0YXNldHMvcHJvZl9wYW5lbF90aWR5LmNzdiIpDQpgYGANCg0KDQpUaWR5IHVwIHNvbWUgY29sdW1ucywgZHJvcCBwcm9mZXNzb3JzIHdpdGhvdXQgZ2VuZXJhbCBmaWVsZHM6DQpgYGB7cn0NCnByb2ZfcGFuZWxfZmlsdGVyIDwtIGZpbHRlcihwcm9mX3BhbmVsX3RpZHksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhciA8IDIwMjQgJiAhaXMubmEoZ2VuZXJhbF9maWVsZCkpDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfYWxsX3RvdGFsIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9ibG9nc190b3RhbA0KcHJvZl9wYW5lbF9maWx0ZXIkY29hX29ubGluZV9hbGxfdG90YWxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRjb2Ffb25saW5lX25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9ibG9nc190b3RhbF9sDQpwcm9mX3BhbmVsX2ZpbHRlciRjb2Ffb25saW5lX2FsbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRjb2Ffb25saW5lX25ld3MgKyBwcm9mX3BhbmVsX2ZpbHRlciRjb2FfYmxvZ3MNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfYWxsX2wgPC0gcHJvZl9wYW5lbF9maWx0ZXIkY29hX29ubGluZV9uZXdzX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRjb2FfYmxvZ3NfbA0KDQpwcm9mX3BhbmVsX2ZpbHRlciRjb2FfdG90X29ubGluZV9hbGxfdG90YWwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkY29hX3RvdF9vbmxpbmVfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3RfYmxvZ3NfdG90YWwNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3Rfb25saW5lX2FsbF90b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3Rfb25saW5lX25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3RfYmxvZ3NfdG90YWxfbA0KcHJvZl9wYW5lbF9maWx0ZXIkY29hX3RvdF9vbmxpbmVfYWxsIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3Rfb25saW5lX25ld3MgKyBwcm9mX3BhbmVsX2ZpbHRlciRjb2FfdG90X2Jsb2dzDQpwcm9mX3BhbmVsX2ZpbHRlciRjb2FfdG90X29ubGluZV9hbGxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRjb2FfdG90X29ubGluZV9uZXdzICsgcHJvZl9wYW5lbF9maWx0ZXIkY29hX3RvdF9ibG9nc19sDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfYWxsIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfbmV3cyArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9ibG9ncw0KYGBgDQoNCk9idGFpbiBiaW5hcnkgdmFyaWFibGVzIGZvciBhbnkgYXR0ZW50aW9uIHJlY2VpdmVkIHRoYXQgeWVhcjoNCmBgYHtyfQ0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X25ld3MgPC0gYXMuZmFjdG9yKGlmZWxzZShwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2FsbCA+IDAsIDEsIDApKQ0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X25ld3NfbCA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYWxsX2wgPiAwLCAxLCAwKSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X29ubGluZV9uZXdzIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X29ubGluZV9hbGwgPiAwLCAxLCAwKSkNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9vbmxpbmVfbmV3c19sIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X29ubGluZV9hbGxfbCA+IDAsIDEsIDApKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfb25saW5lX25ld3NfZ2VuIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X29ubGluZV9nZW5lcmFsX2FsbCA+IDAsIDEsIDApKQ0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X29ubGluZV9uZXdzX2dlbl9sIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X29ubGluZV9nZW5lcmFsX2FsbF9sID4gMCwgMSwgMCkpDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9vbmxpbmVfbmV3c19uYW1lIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X29ubGluZV9hbGwgPiAwLCAxLCAwKSkNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9vbmxpbmVfbmV3c19sIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X29ubGluZV9hbGxfbCA+IDAsIDEsIDApKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfdHdpdHRlciA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF90d2l0dGVyID4gMCwgMSwgMCkpDQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfdHdpdHRlcl9sIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYWx0X3R3aXR0ZXJfbCA+IDAsIDEsIDApKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfZ3JhbnQgPC0gYXMuZmFjdG9yKGlmZWxzZShwcm9mX3BhbmVsX2ZpbHRlciRhbnlfbndvID4gMHxwcm9mX3BhbmVsX2ZpbHRlciRhbnlfZXJjLCAxLCAwKSkNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9ncmFudF9sIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkYW55X253b19sID4gMHxwcm9mX3BhbmVsX2ZpbHRlciRhbnlfZXJjX2wsIDEsIDApKQ0KYGBgDQoNCk5vdyBnZXQgc29tZSBtb3JlIHByaW50ZWQgbmV3cyB2YXJpYWJsZXM6DQpgYGB7cn0NCiMgb25seSBvbmxpbmUgcmVzb3VyY2VzDQpwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX29ubGluZV9hbGwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19hbGwgLSBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX29mZl9hbGwNCnByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfb25saW5lX2FsbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYWxsX2wgLSBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX29mZl9hbGxfbA0KDQojIG9ubHkgcmVzb3VyY2VzIHdpdGhvdXQgaW5zdGl0dXRpb25hbCBtZW50aW9ucw0KcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19ub19pbnN0X2FsbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2FsbCAtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfaW5zdF9hbGwNCnByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfbm9faW5zdF9hbGxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2FsbF9sIC0gcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19pbnN0X2FsbF9sDQoNCnByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfaW50bF9vdGhlcl9zb3VyY2VzIDwtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfbG9jYWxfaW50bCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfaW50bF9vdGhlciArIA0KICBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2ZpbmFuY2UgKyBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX3Byb2Zlc3Npb25hbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfc2NpZW5jZSArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYmxvZyArDQogIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYWdnciArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfdW5rbm93biArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfb3RoZXIgDQoNCnByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfaW50bF9vdGhlcl9zb3VyY2VzX2wgPC0gcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19sb2NhbF9pbnRsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2ludGxfb3RoZXJfbCArIA0KICBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2ZpbmFuY2VfbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfcHJvZmVzc2lvbmFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX3NjaWVuY2VfbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYmxvZ19sICsNCiAgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19hZ2dyX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX3Vua25vd25fbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfb3RoZXJfbA0KDQoNCg0KIyBvbmx5IG9ubGluZSByZXNvdXJjZXMNCnByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfb25saW5lX2FsbF90b3RhbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2FsbF90b3RhbCAtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfb2ZmX2FsbF90b3RhbA0KcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19vbmxpbmVfYWxsX3RvdGFsX2wgPC0gcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19hbGxfdG90YWxfbCAtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3Nfb2ZmX2FsbF90b3RhbF9sDQoNCiMgb25seSByZXNvdXJjZXMgd2l0aG91dCBpbnN0aXR1dGlvbmFsIG1lbnRpb25zDQpwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX25vX2luc3RfYWxsX3RvdGFsIDwtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYWxsX3RvdGFsIC0gcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19pbnN0X2FsbF90b3RhbA0KcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19ub19pbnN0X2FsbF90b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYWxsX3RvdGFsX2wgLSBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2luc3RfYWxsX3RvdGFsX2wNCg0KcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19pbnRsX290aGVyX3NvdXJjZXNfdG90YWwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19sb2NhbF9pbnRsX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19pbnRsX290aGVyX3RvdGFsICsgDQogIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfZmluYW5jZV90b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfcHJvZmVzc2lvbmFsX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19zY2llbmNlX3RvdGFsICsNCiAgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19ibG9nX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19hZ2dyX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c191bmtub3duX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19vdGhlcl90b3RhbA0KDQpwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2ludGxfb3RoZXJfc291cmNlc190b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfbG9jYWxfaW50bF90b3RhbF9sICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19pbnRsX290aGVyX3RvdGFsX2wgKyANCiAgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19maW5hbmNlX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX3Byb2Zlc3Npb25hbF90b3RhbF9sICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c19zY2llbmNlX3RvdGFsX2wgKw0KICBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2Jsb2dfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5ld3NfYWdncl90b3RhbF9sICsgcHJvZl9wYW5lbF9maWx0ZXIkbmV3c191bmtub3duX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX290aGVyX3RvdGFsX2wNCmBgYA0KDQpBbmQgc29tZSBtb3JlIG9ubGluZSBuZXdzIHZhcmlhYmxlczoNCmBgYHtyfQ0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3cyA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3cw0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c19sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9nZW5lcmFsX2ludGVyZXN0X25ld3NfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfbA0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbHRfc2NpZW5jZV9jb21iaV9uZXdzIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9wb3BzY2lfbmV3cyArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2llbmNlX25ld3MgKyAgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X21lZGljYWxfbmV3cyArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2lfbmV3c19hZ2dyZWdhdG9yDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2llbmNlX2NvbWJpX25ld3NfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfcG9wc2NpX25ld3NfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2llbmNlX25ld3NfbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfbWVkaWNhbF9uZXdzX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfc2NpX25ld3NfYWdncmVnYXRvcl9sDQoNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X290aGVyX2NvbWJpX25ld3MgPC0gcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZpbmFuY2VfbmV3cyArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYmxvZyArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfbmV3c19hZ2dyZWdhdG9yICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X290aGVyX25ld3MNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X290aGVyX2NvbWJpX25ld3NfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZmluYW5jZV9uZXdzX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfb25saW5lX2Jsb2dfbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfbmV3c19hZ2dyZWdhdG9yX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfb3RoZXJfbmV3c19sDQoNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbA0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9nZW5lcmFsX2ludGVyZXN0X25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWxfbA0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbHRfc2NpZW5jZV9jb21iaV9uZXdzX3RvdGFsIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9wb3BzY2lfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2llbmNlX25ld3NfdG90YWwgKyAgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X21lZGljYWxfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2lfbmV3c19hZ2dyZWdhdG9yX3RvdGFsDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2llbmNlX2NvbWJpX25ld3NfdG90YWxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfcG9wc2NpX25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9zY2llbmNlX25ld3NfdG90YWxfbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfbWVkaWNhbF9uZXdzX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfc2NpX25ld3NfYWdncmVnYXRvcl90b3RhbF9sDQoNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X290aGVyX2NvbWJpX25ld3NfdG90YWwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZpbmFuY2VfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYmxvZ190b3RhbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfbmV3c19hZ2dyZWdhdG9yX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X290aGVyX25ld3NfdG90YWwNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X290aGVyX2NvbWJpX25ld3NfdG90YWxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZmluYW5jZV9uZXdzX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfb25saW5lX2Jsb2dfdG90YWxfbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfbmV3c19hZ2dyZWdhdG9yX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfb3RoZXJfbmV3c190b3RhbF9sDQoNCiMgd2l0aCBuYW1lDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2NvbWJpX25ld3MgPC0gcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfbmV3cyArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3MNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2NvbWJpX25ld3NfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfZ2VuZXJhbF9pbnRlcmVzdF9sb2NhbF9uZXdzX2wNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX3NjaWVuY2VfY29tYmlfbmV3cyA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfcG9wc2NpX25ld3MgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfc2NpZW5jZV9uZXdzICsgIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9tZWRpY2FsX25ld3MgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfc2NpX25ld3NfYWdncmVnYXRvcg0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfc2NpZW5jZV9jb21iaV9uZXdzX2wgPC0gcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX3BvcHNjaV9uZXdzX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfc2NpZW5jZV9uZXdzX2wgKyAgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX21lZGljYWxfbmV3c19sICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX3NjaV9uZXdzX2FnZ3JlZ2F0b3JfbA0KDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9vdGhlcl9jb21iaV9uZXdzIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9maW5hbmNlX25ld3MgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfb25saW5lX2Jsb2cgKyAgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX25ld3NfYWdncmVnYXRvciArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9vdGhlcl9uZXdzDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9vdGhlcl9jb21iaV9uZXdzX2wgPC0gcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX2ZpbmFuY2VfbmV3c19sICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX29ubGluZV9ibG9nX2wgKyAgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX25ld3NfYWdncmVnYXRvcl9sICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX290aGVyX25ld3NfbA0KDQoNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfZ2VuZXJhbF9pbnRlcmVzdF9uZXdzX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfbG9jYWxfbmV3c190b3RhbA0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2xvY2FsX25ld3NfdG90YWxfbA0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfc2NpZW5jZV9jb21iaV9uZXdzX3RvdGFsIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9wb3BzY2lfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9zY2llbmNlX25ld3NfdG90YWwgKyAgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX21lZGljYWxfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9zY2lfbmV3c19hZ2dyZWdhdG9yX3RvdGFsDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9zY2llbmNlX2NvbWJpX25ld3NfdG90YWxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfcG9wc2NpX25ld3NfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9zY2llbmNlX25ld3NfdG90YWxfbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfbWVkaWNhbF9uZXdzX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfc2NpX25ld3NfYWdncmVnYXRvcl90b3RhbF9sDQoNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX290aGVyX2NvbWJpX25ld3NfdG90YWwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX2ZpbmFuY2VfbmV3c190b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9mbmFtZV9vbmxpbmVfYmxvZyArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfbmV3c19hZ2dyZWdhdG9yX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX290aGVyX25ld3NfdG90YWwNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYWx0X2ZuYW1lX290aGVyX2NvbWJpX25ld3NfdG90YWxfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfZmluYW5jZV9uZXdzX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfb25saW5lX2Jsb2dfbCArICBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfbmV3c19hZ2dyZWdhdG9yX3RvdGFsX2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRhbHRfZm5hbWVfb3RoZXJfbmV3c190b3RhbF9sDQpgYGANCg0KDQpBbmQgc29tZSBhZGRpdGlvbmFsIHZhcmlhYmxlcyByZWdhcmRpbmcgU0pSIGFuZCBhdXRob3JzaGlwczoNCmBgYHtyfQ0KcHJvZl9wYW5lbF9maWx0ZXIkYXZnX3NqciA8LSByb3VuZChwcm9mX3BhbmVsX2ZpbHRlciRzdW1fc2pyL3Byb2ZfcGFuZWxfZmlsdGVyJGNvdW50X3B1YnMsIDUpDQpwcm9mX3BhbmVsX2ZpbHRlciRhdmdfc2pyX3RvdGFsIDwtIHJvdW5kKHByb2ZfcGFuZWxfZmlsdGVyJHN1bV9zanJfdG90YWwvcHJvZl9wYW5lbF9maWx0ZXIkY291bnRfcHVic190b3RhbCwgNSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkc2hhcmVfZmlyc3RfYXUgPC0gcm91bmQoKHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19maXJzdF9hdSArIHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19zaW5nbGVfYXUpIC8gcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX2FsbF9hdSwgNSkNCnByb2ZfcGFuZWxfZmlsdGVyJHNoYXJlX2xhc3RfYXUgPC0gcm91bmQoKHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19sYXN0X2F1ICsgcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX3NpbmdsZV9hdSApIC8gcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX2FsbF9hdSwgNSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkc2hhcmVfZmlyc3RfYXVfdG90YWwgPC0gcm91bmQoKHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19maXJzdF9hdV90b3RhbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19zaW5nbGVfYXVfdG90YWwpIC8gcHJvZl9wYW5lbF9maWx0ZXIkY291bnRfcHVic190b3RhbCwgNSkNCnByb2ZfcGFuZWxfZmlsdGVyJHNoYXJlX2xhc3RfYXVfdG90YWwgPC0gcm91bmQoKHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19sYXN0X2F1X3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX3NpbmdsZV9hdV90b3RhbCApIC8gcHJvZl9wYW5lbF9maWx0ZXIkY291bnRfcHVic190b3RhbCwgNSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkcHVic19zanJfdG90YWwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkY291bnRfcHVic190b3RhbCAqIHByb2ZfcGFuZWxfZmlsdGVyJGF2Z19zanJfdG90YWwgDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfY29tYmlfdG90YWwgPC0gcHJvZl9wYW5lbF9maWx0ZXIkY29hX3RvdF9vbmxpbmVfYWxsX3RvdGFsICsgcHJvZl9wYW5lbF9maWx0ZXIkY29hX3RvdF90d2l0dGVyX3RvdGFsDQpwcm9mX3BhbmVsX2ZpbHRlciRjb2Ffb25saW5lX2NvbWJpIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3Rfb25saW5lX2FsbCArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3RfdHdpdHRlcg0KDQpwcm9mX3BhbmVsX2ZpbHRlciRjb2Ffb25saW5lX2NvbWJpX3RvdGFsb2cgPC0gbG9nKHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfY29tYmlfdG90YWwrMSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYXZnX3Nqcl9sIDwtIHJvdW5kKHByb2ZfcGFuZWxfZmlsdGVyJHN1bV9zanJfbC9wcm9mX3BhbmVsX2ZpbHRlciRjb3VudF9wdWJzX2wsIDUpDQpwcm9mX3BhbmVsX2ZpbHRlciRhdmdfc2pyX3RvdGFsX2wgPC0gcm91bmQocHJvZl9wYW5lbF9maWx0ZXIkc3VtX3Nqcl90b3RhbF9sL3Byb2ZfcGFuZWxfZmlsdGVyJGNvdW50X3B1YnNfdG90YWxfbCwgNSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkc2hhcmVfZmlyc3RfYXVfbCA8LSByb3VuZCgocHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX2ZpcnN0X2F1X2wgKyBwcm9mX3BhbmVsX2ZpbHRlciRuX3B1YnNfc2luZ2xlX2F1X2wpIC8gcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX2FsbF9hdV9sLCA1KQ0KcHJvZl9wYW5lbF9maWx0ZXIkc2hhcmVfbGFzdF9hdV9sIDwtIHJvdW5kKChwcm9mX3BhbmVsX2ZpbHRlciRuX3B1YnNfbGFzdF9hdV9sICsgcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX3NpbmdsZV9hdV9sICkgLyBwcm9mX3BhbmVsX2ZpbHRlciRuX3B1YnNfYWxsX2F1X2wsIDUpDQoNCnByb2ZfcGFuZWxfZmlsdGVyJHNoYXJlX2ZpcnN0X2F1X3RvdGFsX2wgPC0gcm91bmQoKHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19maXJzdF9hdV90b3RhbF9sICsgcHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX3NpbmdsZV9hdV90b3RhbF9sKSAvIHByb2ZfcGFuZWxfZmlsdGVyJGNvdW50X3B1YnNfdG90YWxfbCwgNSkNCnByb2ZfcGFuZWxfZmlsdGVyJHNoYXJlX2xhc3RfYXVfdG90YWxfbCA8LSByb3VuZCgocHJvZl9wYW5lbF9maWx0ZXIkbl9wdWJzX2xhc3RfYXVfdG90YWxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJG5fcHVic19zaW5nbGVfYXVfdG90YWxfbCApIC8gcHJvZl9wYW5lbF9maWx0ZXIkY291bnRfcHVic190b3RhbF9sLCA1KQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciRwdWJzX3Nqcl90b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvdW50X3B1YnNfdG90YWxfbCAqIHByb2ZfcGFuZWxfZmlsdGVyJGF2Z19zanJfdG90YWxfbCANCg0KcHJvZl9wYW5lbF9maWx0ZXIkY29hX29ubGluZV9jb21iaV90b3RhbF9sIDwtIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3Rfb25saW5lX2FsbF90b3RhbF9sICsgcHJvZl9wYW5lbF9maWx0ZXIkY29hX3RvdF90d2l0dGVyX3RvdGFsX2wNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfY29tYmlfbCA8LSBwcm9mX3BhbmVsX2ZpbHRlciRjb2FfdG90X29ubGluZV9hbGxfbCArIHByb2ZfcGFuZWxfZmlsdGVyJGNvYV90b3RfdHdpdHRlcl9sDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfY29tYmlfdG90YWxfbF9sb2cgPC0gbG9nKHByb2ZfcGFuZWxfZmlsdGVyJGNvYV9vbmxpbmVfY29tYmlfdG90YWxfbCsxKQ0KYGBgDQoNClNldCBzb21lIHZhcmlhYmxlcyB0byBmYWN0b3IgYXMgbmVlZGVkOg0KYGBge3J9DQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfZ3JhbnRfbCA8LSBhcy5mYWN0b3IocHJvZl9wYW5lbF9maWx0ZXIkYW55X2dyYW50X2wpDQpwcm9mX3BhbmVsX2ZpbHRlciRpbnN0aXR1dGlvbl9kdXRjaF90b3RhbF9uYXJjaXMgPC0gYXMuZmFjdG9yKHByb2ZfcGFuZWxfZmlsdGVyJGluc3RpdHV0aW9uX2R1dGNoX3RvdGFsX25hcmNpcykNCmBgYA0KDQpNYWtlIG5ldyB2YXJpYWJsZXMgZm9yIHRvcCBuJSBvZiBhdHRlbnRpb246DQpgYGB7cn0NCnBhbmVsX2ZpbHRlcl9sb25nIDwtIHByb2ZfcGFuZWxfZmlsdGVyICU+JQ0KICBwaXZvdF9sb25nZXIoYyhhbHRfb25saW5lX2FsbCwgbmV3c19hbGwsIGFsdF90d2l0dGVyKSwgbmFtZXNfdG8gPSAibWVhc3VyZSIsIHZhbHVlc190byA9ICJ2YWx1ZSIpDQoNCnRvcF8xX2F0dG4gPC0gcGFuZWxfZmlsdGVyX2xvbmcgJT4lDQogIGZpbHRlcighaXMubmEob3ZlcmFsbF9hZGpfZG9tYWluKSAmICFpcy5uYSh5ZWFyKSAmIHllYXIgPiAyMDExKSU+JQ0KICBncm91cF9ieShvdmVyYWxsX2Fkal9kb21haW4sIHllYXIsIG1lYXN1cmUpJT4lDQogIGZpbHRlcihxdWFudGlsZSh2YWx1ZSwgMC45OSwgbmEucm0gPSBUUlVFKTw9dmFsdWUpJT4lDQogIGRwbHlyOjpzZWxlY3QocHJvZmlsZV9pZCwgb3ZlcmFsbF9hZGpfZG9tYWluLCB5ZWFyLCBtZWFzdXJlLCB2YWx1ZSkNCg0KdG9wXzFfYXR0biRtZWFzdXJlIDwtIHBhc3RlMCh0b3BfMV9hdHRuJG1lYXN1cmUsICJfdG9wXzEiKQ0KDQp0b3BfMV9hdHRuIDwtIHRvcF8xX2F0dG4gJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSAibWVhc3VyZSIpJT4lDQogIG11dGF0ZShhY3Jvc3MoY29udGFpbnMoJ3RvcF8xJyksICB+aWZlbHNlKGlzLm5hKC4pLCAwLCAxKSkpDQoNCnByb2ZfcGFuZWxfZmlsdGVyIDwtIG1lcmdlKHByb2ZfcGFuZWxfZmlsdGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wXzFfYXR0bltjKCJ5ZWFyIiwgInByb2ZpbGVfaWQiLCAib3ZlcmFsbF9hZGpfZG9tYWluIiwgImFsdF9vbmxpbmVfYWxsX3RvcF8xIiwgImFsdF90d2l0dGVyX3RvcF8xIiwgIm5ld3NfYWxsX3RvcF8xIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiLCAib3ZlcmFsbF9hZGpfZG9tYWluIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IEZBTFNFKQ0KDQp0b3BfNV9hdHRuIDwtIHBhbmVsX2ZpbHRlcl9sb25nICU+JQ0KICBmaWx0ZXIoIWlzLm5hKG92ZXJhbGxfYWRqX2RvbWFpbikgJiAhaXMubmEoeWVhcikgJiB5ZWFyID4gMjAxMSklPiUNCiAgZ3JvdXBfYnkob3ZlcmFsbF9hZGpfZG9tYWluLCB5ZWFyLCBtZWFzdXJlKSU+JQ0KICBmaWx0ZXIocXVhbnRpbGUodmFsdWUsIDAuOTUsIG5hLnJtID0gVFJVRSk8PXZhbHVlKSU+JQ0KICBkcGx5cjo6c2VsZWN0KHByb2ZpbGVfaWQsIG92ZXJhbGxfYWRqX2RvbWFpbiwgeWVhciwgbWVhc3VyZSwgdmFsdWUpDQoNCnRvcF81X2F0dG4kbWVhc3VyZSA8LSBwYXN0ZTAodG9wXzVfYXR0biRtZWFzdXJlLCAiX3RvcF81IikNCg0KdG9wXzVfYXR0biA8LSB0b3BfNV9hdHRuICU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gIm1lYXN1cmUiKSU+JQ0KICBtdXRhdGUoYWNyb3NzKGNvbnRhaW5zKCd0b3BfNScpLCAgfmlmZWxzZShpcy5uYSguKSwgMCwgMSkpKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciA8LSBtZXJnZShwcm9mX3BhbmVsX2ZpbHRlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcF81X2F0dG5bYygieWVhciIsICJwcm9maWxlX2lkIiwgIm92ZXJhbGxfYWRqX2RvbWFpbiIsICJhbHRfb25saW5lX2FsbF90b3BfNSIsICJhbHRfdHdpdHRlcl90b3BfNSIsICJuZXdzX2FsbF90b3BfNSIpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gYygicHJvZmlsZV9pZCIsICJ5ZWFyIiwgIm92ZXJhbGxfYWRqX2RvbWFpbiIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnkgPSBGQUxTRSkNCg0KdG9wXzEwX2F0dG4gPC0gcGFuZWxfZmlsdGVyX2xvbmcgJT4lDQogIGZpbHRlcighaXMubmEob3ZlcmFsbF9hZGpfZG9tYWluKSAmICFpcy5uYSh5ZWFyKSAmIHllYXIgPiAyMDExKSU+JQ0KICBncm91cF9ieShvdmVyYWxsX2Fkal9kb21haW4sIHllYXIsIG1lYXN1cmUpJT4lDQogIGZpbHRlcihxdWFudGlsZSh2YWx1ZSwgMC45MCwgbmEucm0gPSBUUlVFKTw9dmFsdWUpJT4lDQogIGRwbHlyOjpzZWxlY3QocHJvZmlsZV9pZCwgb3ZlcmFsbF9hZGpfZG9tYWluLCB5ZWFyLCBtZWFzdXJlLCB2YWx1ZSkNCg0KdG9wXzEwX2F0dG4kbWVhc3VyZSA8LSBwYXN0ZTAodG9wXzEwX2F0dG4kbWVhc3VyZSwgIl90b3BfMTAiKQ0KDQoNCnRvcF8xMF9hdHRuIDwtIHRvcF8xMF9hdHRuICU+JQ0KICBwaXZvdF93aWRlcihuYW1lc19mcm9tID0gIm1lYXN1cmUiKSU+JQ0KICBtdXRhdGUoYWNyb3NzKGNvbnRhaW5zKCd0b3BfMTAnKSwgIH5pZmVsc2UoaXMubmEoLiksIDAsIDEpKSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIgPC0gbWVyZ2UocHJvZl9wYW5lbF9maWx0ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BfMTBfYXR0bltjKCJ5ZWFyIiwgInByb2ZpbGVfaWQiLCAib3ZlcmFsbF9hZGpfZG9tYWluIiwgImFsdF9vbmxpbmVfYWxsX3RvcF8xMCIsICJhbHRfdHdpdHRlcl90b3BfMTAiLCAibmV3c19hbGxfdG9wXzEwIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiLCAib3ZlcmFsbF9hZGpfZG9tYWluIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IEZBTFNFKQ0KDQp0b3BfMjBfYXR0biA8LSBwYW5lbF9maWx0ZXJfbG9uZyAlPiUNCiAgZmlsdGVyKCFpcy5uYShvdmVyYWxsX2Fkal9kb21haW4pICYgIWlzLm5hKHllYXIpICYgeWVhciA+IDIwMTEpJT4lDQogIGdyb3VwX2J5KG92ZXJhbGxfYWRqX2RvbWFpbiwgeWVhciwgbWVhc3VyZSklPiUNCiAgZmlsdGVyKHF1YW50aWxlKHZhbHVlLCAwLjgwLCBuYS5ybSA9IFRSVUUpPD12YWx1ZSklPiUNCiAgZHBseXI6OnNlbGVjdChwcm9maWxlX2lkLCBvdmVyYWxsX2Fkal9kb21haW4sIHllYXIsIG1lYXN1cmUsIHZhbHVlKQ0KDQp0b3BfMjBfYXR0biRtZWFzdXJlIDwtIHBhc3RlMCh0b3BfMjBfYXR0biRtZWFzdXJlLCAiX3RvcF8yMCIpDQoNCg0KdG9wXzIwX2F0dG4gPC0gdG9wXzIwX2F0dG4gJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSAibWVhc3VyZSIpJT4lDQogIG11dGF0ZShhY3Jvc3MoY29udGFpbnMoJ3RvcF8yMCcpLCAgfmlmZWxzZShpcy5uYSguKSwgMCwgMSkpKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciA8LSBtZXJnZShwcm9mX3BhbmVsX2ZpbHRlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcF8yMF9hdHRuW2MoInllYXIiLCAicHJvZmlsZV9pZCIsICJvdmVyYWxsX2Fkal9kb21haW4iLCAiYWx0X29ubGluZV9hbGxfdG9wXzIwIiwgImFsdF90d2l0dGVyX3RvcF8yMCIsICJuZXdzX2FsbF90b3BfMjAiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIsICJvdmVyYWxsX2Fkal9kb21haW4iKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC54ID0gVFJVRSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC55ID0gRkFMU0UpDQoNCnByb2ZfcGFuZWxfZmlsdGVyIDwtIGZpbHRlcihwcm9mX3BhbmVsX2ZpbHRlciwgIWlzLm5hKG92ZXJhbGxfYWRqX2RvbWFpbikpDQoNCiMgaWYgTkEsIG5lZWRzIHRvIGJlIDANCnByb2ZfcGFuZWxfZmlsdGVyIDwtIHByb2ZfcGFuZWxfZmlsdGVyICU+JQ0KICBtdXRhdGUoYWNyb3NzKGNvbnRhaW5zKCd0b3BfMScpLCAgfmlmZWxzZShpcy5uYSguKSwgMCwgLikpKSU+JQ0KICBtdXRhdGUoYWNyb3NzKGNvbnRhaW5zKCd0b3BfNScpLCAgfmlmZWxzZShpcy5uYSguKSwgMCwgLikpKSU+JQ0KICBtdXRhdGUoYWNyb3NzKGNvbnRhaW5zKCd0b3BfMTAnKSwgIH5pZmVsc2UoaXMubmEoLiksIDAsIC4pKSklPiUNCiAgbXV0YXRlKGFjcm9zcyhjb250YWlucygndG9wXzIwJyksICB+aWZlbHNlKGlzLm5hKC4pLCAwLCAuKSkpDQpgYGANCg0KDQpTYXZlIHRoaXM6DQpgYGB7cn0NCndyaXRlX2Nzdihwcm9mX3BhbmVsX2ZpbHRlciwgInBhbmVsX2RhdGFzZXRzL3Byb2ZfcGFuZWxfZmluYWxfYWxsX3ZhcnMuY3N2IikNCmBgYA0KDQpBbm9ueW1pemUgdGhlIGRhdGFzZXQgZm9yIHNoYXJpbmcgYnkgcmVtb3ZpbmcgTkFSQ0lTIElEcy4gQWRkIG5ldyBpZGVudGlmaWVycyBhbmQNCmRyb3AgYW55IHJlZHVuZGFudCBjb2x1bW5zLg0KYGBge3J9DQojICMgZ2VuZXJhdGUgbmV3IElEIG1hcHBpbmcNCiMgdW5pcXVlX25hcmNpcyA8LSB1bmlxdWUocHJvZl9wYW5lbF9maWx0ZXIkcHJvZmlsZV9pZCkNCiMgbmV3X2lkcyA8LSBwYXN0ZSgicHJvZiIsIGMoMTpsZW5ndGgodW5pcXVlX25hcmNpcykpLCBzZXA9ICJfIikNCiMgDQojIG5ld19pZF9tYXBwaW5nIDwtIGRhdGEuZnJhbWUocHJvZmlsZV9pZCA9IHVuaXF1ZV9uYXJjaXMsDQojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZl9pZCA9IG5ld19pZHMpDQojIA0KIyBkYldyaXRlVGFibGUoY29uLCAiYW5vbnltb3VzX2lkX21hcHBpbmciLCBuZXdfaWRfbWFwcGluZywgcm93Lm5hbWVzPUZBTFNFLCBhcHBlbmQ9VFJVRSkNCg0KbmV3X2lkX21hcHBpbmcgPC0gZGJSZWFkVGFibGUoY29uLCAiYW5vbnltb3VzX2lkX21hcHBpbmciKQ0KDQojIGNvbWJpbmUgdGhlIHBhbmVsIHdpdGggdGhlIG5ldyBJRCBtYXBwaW5nDQpwcm9mX3BhbmVsX2ZpbHRlcl9hbm9ueW1vdXMgPC0gbWVyZ2UocHJvZl9wYW5lbF9maWx0ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3X2lkX21hcHBpbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFKQ0KDQpgYGANCg0KDQpgYGB7cn0NCiMgdGlkeSB1cCB0aGUgdmFyaWFibGUgb3JkZXIgYWdhaW4NCnByb2ZfcGFuZWxfZmlsdGVyX2Fub255bW91cyA8LSBwcm9mX3BhbmVsX2ZpbHRlcl9hbm9ueW1vdXMgJT4lDQogIGRwbHlyOjpzZWxlY3QocHJvZl9pZCwgeWVhciwgb3ZlcmFsbF9hZGpfZG9tYWluICwgZmlyc3RfcHViLCB5ZWFyc19zaW5jZV9maXJzdF9wdWIsIGVudHJ5X2JhdGNoXzIwMjMsIGluc3RpdHV0aW9uX2R1dGNoX3RvdGFsX25hcmNpcywgDQogICAgICAgICAgICAgICAgaW5zdGl0dXRpb25fZHV0Y2hfeWVhcmx5X3N0cmljdCwgaW5zdGl0dXRpb25fZHV0Y2hfeWVhcmx5X3N0cmljdF9sLA0KICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciwgbmV3c19hbGwsIG5ld3NfYWxsX2wsIGFsdF9vbmxpbmVfYWxsX2wsIGFsdF90d2l0dGVyX2wsDQogICAgICAgICAgICAgICAgYWx0X29ubGluZV9hbGwsIGFsdF90d2l0dGVyLCANCiAgICAgICAgICAgICAgICBjb3VudF9wdWJzLCBjb3VudF9wdWJzX2wsIGNvdW50X3B1YnNfdG90YWwsIGNvdW50X3B1YnNfdG90YWxfbCwgDQogICAgICAgICAgICAgICAgc2hhcmVfZmlyc3RfYXUsIHNoYXJlX2ZpcnN0X2F1X2wsIHNoYXJlX2ZpcnN0X2F1X3RvdGFsLCBzaGFyZV9maXJzdF9hdV90b3RhbF9sLA0KICAgICAgICAgICAgICAgIHNoYXJlX2xhc3RfYXUsIHNoYXJlX2xhc3RfYXVfbCwgc2hhcmVfbGFzdF9hdV90b3RhbCwgc2hhcmVfbGFzdF9hdV90b3RhbF9sLA0KICAgICAgICAgICAgICAgIGNpdGVkX2J5LCBjaXRlZF9ieV9sLCBjaXRlZF9ieV90b3RhbF9hbGwsIGNpdGVkX2J5X3RvdGFsX2FsbF9sLA0KICAgICAgICAgICAgICAgIGF2Z19zanIsIGF2Z19zanJfbCwgYXZnX3Nqcl90b3RhbCwgYXZnX3Nqcl90b3RhbF9sLA0KICAgICAgICAgICAgICAgIGNvYV90b3RfY2l0ZWRfYnksICBjb2FfdG90X2NpdGVkX2J5X2wsIGNvYV9vbmxpbmVfY29tYmksIGNvYV9vbmxpbmVfY29tYmlfbCwgDQogICAgICAgICAgICAgICAgY29hX3RvdF9jaXRlZF9ieV90b3RhbCwgY29hX3RvdF9jaXRlZF9ieV90b3RhbF9sLA0KICAgICAgICAgICAgICAgIGNvYV9vbmxpbmVfY29tYmlfdG90YWwsIGNvYV9vbmxpbmVfY29tYmlfdG90YWxfbCwNCiAgICAgICAgICAgICAgICBuZXdzX2FsbF90b3RhbCwgbmV3c19hbGxfdG90YWxfbCwgIGFsdF9vbmxpbmVfYWxsX3RvdGFsLCBhbHRfb25saW5lX2FsbF90b3RhbF9sLA0KICAgICAgICAgICAgICAgIGFsdF90d2l0dGVyX3RvdGFsLCBhbHRfdHdpdHRlcl90b3RhbF9sLA0KICAgICAgICAgICAgICAgIGFueV9ncmFudCwgYW55X2dyYW50X2wsIA0KICAgICAgICAgICAgICAgIGFueV9uZXdzLCBuZXdzX2FsbF90b3BfMSwgbmV3c19hbGxfdG9wXzUsIG5ld3NfYWxsX3RvcF8xMCwgbmV3c19hbGxfdG9wXzIwLCANCiAgICAgICAgICAgICAgICBhbnlfb25saW5lX25ld3MsIGFsdF9vbmxpbmVfYWxsX3RvcF8xLCBhbHRfb25saW5lX2FsbF90b3BfNSwgYWx0X29ubGluZV9hbGxfdG9wXzEwLCBhbHRfb25saW5lX2FsbF90b3BfMjAsIA0KICAgICAgICAgICAgICAgIGFueV90d2l0dGVyLCBhbHRfdHdpdHRlcl90b3BfMSwgYWx0X3R3aXR0ZXJfdG9wXzUsIGFsdF90d2l0dGVyX3RvcF8xMCwgYWx0X3R3aXR0ZXJfdG9wXzIwLCBuZXdzX2FsbCwNCiAgICAgICAgICAgICAgICBuZXdzX3N0cmljdF9hbGwsIG5ld3Nfc3RyaWN0X2FsbF9sLCANCiAgICAgICAgICAgICAgICBuZXdzX29mZl9hbGwsIG5ld3Nfb2ZmX2FsbF9sLCAgbmV3c19vZmZfYWxsX3RvdGFsLCBuZXdzX29mZl9hbGxfdG90YWxfbCwgDQogICAgICAgICAgICAgICAgbmV3c19vbmxpbmVfYWxsLCBuZXdzX29ubGluZV9hbGxfbCwgbmV3c19vbmxpbmVfYWxsX3RvdGFsLCBuZXdzX29ubGluZV9hbGxfdG90YWxfbCwgIA0KICAgICAgICAgICAgICAgIG5ld3NfZGVkX2FsbCwgbmV3c19kZWRfYWxsX2wsIG5ld3NfZGVkX2FsbF90b3RhbCwgbmV3c19kZWRfYWxsX3RvdGFsX2wsIA0KICAgICAgICAgICAgICAgIG5ld3NfbmF0aW9uYWwsIG5ld3NfbmF0aW9uYWxfbCwgbmV3c19uYXRpb25hbF90b3RhbCwgbmV3c19uYXRpb25hbF90b3RhbF9sLCANCiAgICAgICAgICAgICAgICBuZXdzX3JlZ2lvbmFsLCBuZXdzX3JlZ2lvbmFsX2wsbmV3c19yZWdpb25hbF90b3RhbCwgbmV3c19yZWdpb25hbF90b3RhbF9sLCANCiAgICAgICAgICAgICAgICBuZXdzX2ludGwsICBuZXdzX2ludGxfbCxuZXdzX2ludGxfdG90YWwsICBuZXdzX2ludGxfdG90YWxfbCwgDQogICAgICAgICAgICAgICAgbmV3c19pbnRsX290aGVyX3NvdXJjZXMsIG5ld3NfaW50bF9vdGhlcl9zb3VyY2VzX2wsIG5ld3NfaW50bF9vdGhlcl9zb3VyY2VzX3RvdGFsLCBuZXdzX2ludGxfb3RoZXJfc291cmNlc190b3RhbF9sLCANCiAgICAgICAgICAgICAgICBhbHRfb25saW5lX2FsbCwgYWx0X29ubGluZV9hbGxfbCwgYWx0X29ubGluZV9hbGxfdG90YWwsIGFsdF9vbmxpbmVfYWxsX3RvdGFsX2wsIA0KICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfc2luZ2xlX2FsbCwgYWx0X29ubGluZV9zaW5nbGVfYWxsX2wsDQogICAgICAgICAgICAgICAgYWx0X29ubGluZV9uYW1lX2FsbCwgYWx0X29ubGluZV9uYW1lX2FsbF9sLCBhbHRfb25saW5lX2ZuYW1lX2FsbCwgYWx0X29ubGluZV9mbmFtZV9hbGxfbCwgDQogICAgICAgICAgICAgICAgYWx0X29ubGluZV9mbmFtZV9hbGxfdG90YWwsIGFsdF9vbmxpbmVfZm5hbWVfYWxsX3RvdGFsX2wsDQogICAgICAgICAgICAgICAgYWx0X29ubGluZV9kdXRjaF9hbGwsIGFsdF9vbmxpbmVfZHV0Y2hfYWxsX2wsIA0KICAgICAgICAgICAgICAgIGFsdF9nZW5lcmFsX2ludGVyZXN0X2NvbWJpX25ld3MsIGFsdF9nZW5lcmFsX2ludGVyZXN0X2NvbWJpX25ld3NfbCwgDQogICAgICAgICAgICAgICAgYWx0X2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbCwgYWx0X2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbF9sLA0KICAgICAgICAgICAgICAgIGFsdF9zY2llbmNlX2NvbWJpX25ld3MsIGFsdF9zY2llbmNlX2NvbWJpX25ld3NfbCwgYWx0X3NjaWVuY2VfY29tYmlfbmV3c190b3RhbCwgYWx0X3NjaWVuY2VfY29tYmlfbmV3c190b3RhbF9sLCANCiAgICAgICAgICAgICAgICBhbHRfb3RoZXJfY29tYmlfbmV3cywgYWx0X290aGVyX2NvbWJpX25ld3NfbCwgYWx0X290aGVyX2NvbWJpX25ld3NfdG90YWwsIGFsdF9vdGhlcl9jb21iaV9uZXdzX3RvdGFsX2wsDQogICAgICAgICAgICAgICAgIGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2NvbWJpX25ld3MsIGFsdF9mbmFtZV9nZW5lcmFsX2ludGVyZXN0X2NvbWJpX25ld3NfbCwgDQogICAgICAgICAgICAgICAgYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbCwgYWx0X2ZuYW1lX2dlbmVyYWxfaW50ZXJlc3RfY29tYmlfbmV3c190b3RhbF9sLA0KICAgICAgICAgICAgICAgIGFsdF9mbmFtZV9zY2llbmNlX2NvbWJpX25ld3MsIGFsdF9mbmFtZV9zY2llbmNlX2NvbWJpX25ld3NfbCwgDQogICAgICAgICAgICAgICAgYWx0X2ZuYW1lX3NjaWVuY2VfY29tYmlfbmV3c190b3RhbCwgYWx0X2ZuYW1lX3NjaWVuY2VfY29tYmlfbmV3c190b3RhbF9sLCANCiAgICAgICAgICAgICAgICBhbHRfZm5hbWVfb3RoZXJfY29tYmlfbmV3cywgYWx0X2ZuYW1lX290aGVyX2NvbWJpX25ld3NfbCwgYWx0X2ZuYW1lX290aGVyX2NvbWJpX25ld3NfdG90YWwsIGFsdF9mbmFtZV9vdGhlcl9jb21iaV9uZXdzX3RvdGFsX2wpDQoNCg0KY29sbmFtZXMocHJvZl9wYW5lbF9maWx0ZXJfYW5vbnltb3VzKVsxXSA8LSAicHJvZmlsZV9pZCINCg0KIyB3cml0ZSBpdCBvdXQNCndyaXRlX2Nzdihwcm9mX3BhbmVsX2ZpbHRlcl9hbm9ueW1vdXMsICJwYW5lbF9kYXRhc2V0cy9wcm9mX3BhbmVsX2Fub255bWlzZWQuY3N2IikNCmBgYA0KDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Panel_data_compilation.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
